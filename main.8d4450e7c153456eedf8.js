(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=s),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=Object(r.g)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=Object(r.e)(c.value,2),h=l[1];s===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(f){e={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=Object(r.g)(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=s),this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e=n("zIRd"),r=n("/6Yf"),i=n("qOnz"),o=n("mrSG"),s=n("q/0M"),a="";function u(t){a=t}var c,l=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(i.J)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(i.D)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),h=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(i.i)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l(e)}}catch(n){}return new h},d=f("localStorage"),p=f("sessionStorage"),g=new s.b("@firebase/database"),y=(c=1,function(){return c++}),v=function(t){var e=Object(i.I)(t),n=new i.d;n.update(e);var r=n.digest();return i.g.encodeByteArray(r)},m=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var o=t[r];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?n+=m.apply(null,o):n+="object"==typeof o?Object(i.J)(o):o,n+=" "}return n},b=null,_=!0,w=function(t,e){Object(i.e)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(g.logLevel=s.a.VERBOSE,b=g.log.bind(g),e&&p.set("logging_enabled",!0)):"function"==typeof t?b=t:(b=null,p.remove("logging_enabled"))},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===b&&!0===p.get("logging_enabled")&&w(!0)),b){var n=m.apply(null,t);b(n)}},O=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];C.apply(void 0,Object(o.f)([t],Object(o.e)(e)))}},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,Object(o.f)([],Object(o.e)(t)));g.error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,Object(o.f)([],Object(o.e)(t)));throw g.error(n),new Error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,Object(o.f)([],Object(o.e)(t)));g.warn(n)},I=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},k="[MIN_NAME]",x="[MAX_NAME]",j=function(t,e){if(t===e)return 0;if(t===k||e===x)return-1;if(e===k||t===x)return 1;var n=F(t),r=F(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},A=function(t,e){return t===e?0:t<e?-1:1},R=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(i.J)(e))},N=function(t){if("object"!=typeof t||null===t)return Object(i.J)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",o=0;o<e.length;o++)0!==o&&(r+=","),r+=Object(i.J)(e[o]),r+=":",r+=N(t[e[o]]);return r+"}"},P=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function D(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var L=function(t){var e,n,r,o,s;Object(i.e)(!I(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},M=new RegExp("^-?(0*)\\d{1,10}$"),F=function(t){if(M.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},U=function(t){try{t()}catch(e){setTimeout(function(){throw E("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},V=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},q=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(n,r){setTimeout(function(){e.appCheck?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){E('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),B=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):new Promise(function(n,r){setTimeout(function(){e.auth_?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)})},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';E(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),H=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),z=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,W="websocket",K="long_polling",G=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=d.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&d.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function Q(t,e,n){var r;if(Object(i.e)("string"==typeof e,"typeof type must == string"),Object(i.e)("object"==typeof n,"typeof params must == object"),e===W)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==K)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var o=[];return D(n,function(t,e){o.push(t+"="+e)}),r+o.join("&")}var $=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(i.i)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(i.l)(this.counters_)},t}(),Y={},J={};function X(t){var e=t.toString();return Y[e]||(Y[e]=new $),Y[e]}var Z=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&U(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),tt="start",et="close",nt=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=O(t),this.stats_=X(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),Q(e,K,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Z(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(i.y)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new rt(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,5),i=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===tt)n.id=s,n.password=a;else{if(i!==et)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,2),i=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&z.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(i.y)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(i.J)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(i.h)(e),r=P(n,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(i.y)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(i.J)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),rt=function(){function t(e,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(i.y)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=y(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){C("frame writing exception"),u.stack&&C(u.stack),C(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||C("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(i.y)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){C("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),it=null;"undefined"!=typeof MozWebSocket?it=MozWebSocket:"undefined"!=typeof WebSocket&&(it=WebSocket);var ot=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=O(this.connId),this.stats_=X(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var o={v:"5"};return!Object(i.y)()&&"undefined"!=typeof location&&location.hostname&&z.test(location.hostname)&&(o.r="f"),e&&(o.s=e),n&&(o.ls=n),r&&(o.ac=r),Q(t,W,o)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,d.set("previous_websocket_failure",!0);try{if(Object(i.y)()){var r={headers:{"User-Agent":"Firebase/5/"+a+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(r.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var o=process.env,s=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new it(this.connURL,[],r)}else this.mySock=new it(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==it&&!t.forceDisallow_},t.previouslyFailed=function(){return d.isInMemoryStorage||!0===d.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){d.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(i.D)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(i.e)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(i.J)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=P(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),st=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[nt,ot]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=ot&&ot.isAvailable(),s=i&&!ot.previouslyFailed();if(e.webSocketOnly&&(i||E("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ot];else{var a=this.transports_=[];try{for(var u=Object(o.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),at=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=O("c:"+this.id+":"),this.transportManager_=new st(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=V(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=R("t",t),n=R("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=R("t",t),n=R("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=R("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?S("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):S("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&E("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),V(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(d.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ut=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ct=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(i.e)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(o.f)([],Object(o.e)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(i.e)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),lt=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(i.w)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.e)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ct),ht=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function ft(){return new ht("")}function dt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pt(t){return t.pieces_.length-t.pieceNum_}function gt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new ht(t.pieces_,e)}function yt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function vt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function mt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ht(e,0)}function bt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ht)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ht(n,0)}function _t(t){return t.pieceNum_>=t.pieces_.length}function wt(t,e){var n=dt(t),r=dt(e);if(null===n)return e;if(n===r)return wt(gt(t),gt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ct(t,e){for(var n=vt(t,0),r=vt(e,0),i=0;i<n.length&&i<r.length;i++){var o=j(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Ot(t,e){if(pt(t)!==pt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function St(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(pt(t)>pt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Tt=function(){return function(t,e){this.errorPrefix_=e,this.parts_=vt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(i.H)(this.parts_[n]);Et(this)}}();function Et(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+It(t))}function It(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var kt,xt,jt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.e)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ct),At=1e3,Rt=function(t){function e(n,r,o,s,a,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=o,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=O("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=At,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(i.y)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return jt.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&lt.getInstance().on("online",h.onOnline_,h),h}return Object(o.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,o={r:r,a:t,b:e};this.log_(Object(i.J)(o)),Object(i.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new i.a,r={p:t._path.toString(),q:t._queryObject},o={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&o===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var o=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),Object(i.e)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(i.e)(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(o,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(i.i)(t,"w")){var n=Object(i.G)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',o=e._path.toString();E("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(i.q)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(i.C)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(i.e)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(i.J)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):S("Unrecognized action received from server: "+Object(i.J)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(i.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=At,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=At,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=At),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Object(o.b)(this,void 0,void 0,function(){var t,n,r,s,a,u,c,l,h,f,d,p,g,y=this;return Object(o.d)(this,function(v){switch(v.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){Object(i.e)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,v.label=1;case 1:return v.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return f=o.e.apply(void 0,[v.sent(),2]),d=f[0],p=f[1],u?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,c=new at(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){E(t+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")},a)),[3,4];case 3:return g=v.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&E(g),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){C("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){C("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(i.u)(this.interruptReasons_)&&(this.reconnectDelay_=At,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return N(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new ht(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){C("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){C("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Object(o.g)(this.listens.values()),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,Object(o.g)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(i.y)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+a.replace(/\./g,"-")]=1,Object(i.w)()?t["framework.cordova"]=1:Object(i.z)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=lt.getInstance().currentlyOnline();return Object(i.u)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ut),Nt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Pt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Nt(k,t),r=new Nt(k,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Nt.MIN},t}(),Dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return kt},set:function(t){kt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return j(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(i.f)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Nt.MIN},e.prototype.maxPost=function(){return new Nt(x,kt)},e.prototype.makePost=function(t,e){return Object(i.e)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Nt(t,kt)},e.prototype.toString=function(){return".key"},e}(Pt),Lt=new Dt,Mt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ft=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Vt.EMPTY_NODE,this.right=null!=o?o:Vt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Vt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Vt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ut=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ft(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Vt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Mt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Mt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Mt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Mt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ut,t}();function qt(t,e){return j(t.name,e.name)}function Bt(t,e){return j(t,e)}var Ht,zt,Wt,Kt,Gt,Qt=function(t){return"number"==typeof t?"number:"+L(t):"string:"+t},$t=function(t){if(t.isLeafNode()){var e=t.val();Object(i.e)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(i.i)(e,".sv"),"Priority must be a string or number.")}else Object(i.e)(t===xt||t.isEmpty(),"priority of unexpected type.");Object(i.e)(t===xt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Yt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(i.e)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),$t(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ht},set:function(t){Ht=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return _t(e)?this:".priority"===dt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=dt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(i.e)(".priority"!==r||1===pt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(gt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Qt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?L(this.value_):this.value_,this.lazyHash_=v(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(i.e)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(i.e)(o>=0,"Unknown leaf type: "+n),Object(i.e)(s>=0,"Unknown leaf type: "+r),o===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Jt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?j(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Nt.MIN},e.prototype.maxPost=function(){return new Nt(x,new Yt("[PRIORITY-POST]",Wt))},e.prototype.makePost=function(t,e){var n=zt(t);return new Nt(e,new Yt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Pt)),Xt=Math.log(2),Zt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Xt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),te=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Ft(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Ft.BLACK):(a(h,Ft.BLACK),a(h,Ft.RED))}return o}(new Zt(t.length));return new Vt(r||e,o)},ee={},ne=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(i.e)(ee&&Jt,"ChildrenNode.ts has not been loaded"),Kt=Kt||new t({".priority":ee},{".priority":Jt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(i.G)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vt?e:null},t.prototype.hasIndex=function(t){return Object(i.i)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(i.e)(e!==Lt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Nt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?te(s,e.getCompare()):ee;var l=e.toString(),h=Object(o.a)({},this.indexSet_);h[l]=e;var f=Object(o.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(i.E)(this.indexes_,function(t,o){var s=Object(i.G)(r.indexSet_,o);if(Object(i.e)(s,"Missing index implementation for "+o),t===ee){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Nt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),te(a,s.getCompare())}return ee}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Nt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(i.E)(this.indexes_,function(t){if(t===ee)return t;var r=n.get(e.name);return r?t.remove(new Nt(e.name,r)):t}),this.indexSet_)},t}(),re=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&$t(this.priorityNode_),this.children_.isEmpty()&&Object(i.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Gt||(Gt=new t(new Vt(Bt),null,ne.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Gt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Gt:e},t.prototype.getChild=function(t){var e=dt(t);return null===e?this:this.getImmediateChild(e).getChild(gt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(i.e)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Nt(e,n),o=void 0,s=void 0;n.isEmpty()?(o=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=o.isEmpty()?Gt:this.priorityNode_;return new t(o,a,s)},t.prototype.updateChild=function(t,e){var n=dt(t);if(null===n)return e;Object(i.e)(".priority"!==dt(t)||1===pt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(gt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Jt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Qt(this.getPriority().val())+":"),this.forEachChild(Jt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":v(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Nt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Nt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Nt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Nt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Nt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ie?-1:0},t.prototype.withIndex=function(e){if(e===Lt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Lt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Jt),r=e.getIterator(Jt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Lt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ie=new(function(t){function e(){return t.call(this,new Vt(Bt),re.EMPTY_NODE,ne.Default)||this}return Object(o.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return re.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(re));function oe(t,e){if(void 0===e&&(e=null),null===t)return re.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(i.e)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Yt(t,oe(e));if(t instanceof Array){var n=re.EMPTY_NODE;return D(t,function(e,r){if(Object(i.i)(t,e)&&"."!==e.substring(0,1)){var o=oe(r);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(e,o))}}),n.updatePriority(oe(e))}var r=[],o=!1;if(D(t,function(t,e){if("."!==t.substring(0,1)){var n=oe(e);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new Nt(t,n)))}}),0===r.length)return re.EMPTY_NODE;var s=te(r,qt,function(t){return t.name},Bt);if(o){var a=te(r,Jt.getCompare());return new re(s,oe(e),new ne({".priority":a},{".priority":Jt}))}return new re(s,oe(e),ne.Default)}Object.defineProperties(Nt,{MIN:{value:new Nt(k,re.EMPTY_NODE)},MAX:{value:new Nt(x,ie)}}),Dt.__EMPTY_NODE=re.EMPTY_NODE,Yt.__childrenNodeConstructor=re,xt=ie,Wt=ie,zt=oe;var se,ae,ue=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(i.e)(!_t(e)&&".priority"!==dt(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(o.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?j(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=oe(t),r=re.EMPTY_NODE.updateChild(this.indexPath_,n);return new Nt(e,r)},e.prototype.maxPost=function(){var t=re.EMPTY_NODE.updateChild(this.indexPath_,ie);return new Nt(x,t)},e.prototype.toString=function(){return vt(this.indexPath_,0).join("/")},e}(Pt),ce=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?j(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Nt.MIN},e.prototype.maxPost=function(){return Nt.MAX},e.prototype.makePost=function(t,e){var n=oe(t);return new Nt(e,n)},e.prototype.toString=function(){return".value"},e}(Pt)),le="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",he=(se=0,ae=[],function(t){var e,n=t===se;se=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=le.charAt(t%64),t=Math.floor(t/64);Object(i.e)(0===t,"Cannot push at time == 0");var o=r.join("");if(n){for(e=11;e>=0&&63===ae[e];e--)ae[e]=0;ae[e]++}else for(e=0;e<12;e++)ae[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)o+=le.charAt(ae[e]);return Object(i.e)(20===o.length,"nextPushId: Length should be 20."),o}),fe=function(t){if("2147483647"===t)return"-";var e=F(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return x;var o=le.charAt(le.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},de=function(t){if("-2147483648"===t)return k;var e=F(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=le.charAt(le.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function pe(t){return{type:"value",snapshotNode:t}}function ge(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ye(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ve(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var me=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,o,s){Object(i.e)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(ye(e,a)):Object(i.e)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ge(e,n)):s.trackChildChange(ve(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Jt,function(t,r){e.hasChild(t)||n.trackChildChange(ye(t,r))}),e.isLeafNode()||e.forEachChild(Jt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ve(e,r,i))}else n.trackChildChange(ge(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?re.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(e){this.indexedFilter_=new me(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Nt(e,n))||(n=re.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=re.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(re.EMPTY_NODE);var i=this;return e.forEachChild(Jt,function(t,e){i.matches(new Nt(t,e))||(r=r.updateImmediateChild(t,re.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),_e=function(){function t(t){this.rangedFilter_=new be(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Nt(e,n))||(n=re.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=re.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=re.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(re.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,re.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,o){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(i.e)(u.numChildren()===this.limit_,"");var c=new Nt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=o&&o.trackChildChange(ve(e,n,f)),u.updateImmediateChild(e,n);null!=o&&o.trackChildChange(ye(e,f));var g=u.updateImmediateChild(e,re.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=o&&o.trackChildChange(ge(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=o&&(o.trackChildChange(ye(l.name,l.node)),o.trackChildChange(ge(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,re.EMPTY_NODE)):t},t}(),we=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(i.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(i.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:k},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(i.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(i.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:x},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(i.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Jt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Ce(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Oe(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Se(t,e){var n=t.copy();return n.index_=e,n}function Te(t){var e,n={};return t.isDefault()||(t.index_===Jt?e="$priority":t.index_===ce?e="$value":t.index_===Lt?e="$key":(Object(i.e)(t.index_ instanceof ue,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(i.J)(e),t.startSet_&&(n.startAt=Object(i.J)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(i.J)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(i.J)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(i.J)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Ee(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Jt&&(e.i=t.index_.toString()),e}var Ie=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=O("p:rest:"),o.listens_={},o}return Object(o.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(i.e)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,o){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Te(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(i.G)(s.listens_,u)===c&&o(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Te(t._queryParams),r=t._path.toString(),o=new i.a;return this.restRequest_(r+".json",n,function(t,n){var i=n;404===t&&(i=null,t=null),null===t?(e.onDataUpdate_(r,i,!1,null),o.resolve(i)):o.reject(new Error(i))}),o.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(s){var a=Object(o.e)(s,2),u=a[0],c=a[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(i.F)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=Object(i.D)(h.responseText)}catch(e){E("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&E("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},e}(ut),ke=function(){function t(){this.rootNode_=re.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function xe(){return{value:null,children:new Map}}function je(t,e,n){if(_t(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=dt(e);t.children.has(r)||t.children.set(r,xe()),je(t.children.get(r),e=gt(e),n)}}function Ae(t,e){if(_t(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Jt,function(e,n){je(t,new ht(e),n)}),Ae(t,e)}if(t.children.size>0){var r=dt(e);return e=gt(e),t.children.has(r)&&Ae(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Re(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){Re(r,new ht(e.toString()+"/"+t),n)})}var Ne=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(o.a)({},t);return this.last_&&D(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Pe=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ne(t);var n=1e4+2e4*Math.random();V(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;D(e,function(e,o){o>0&&Object(i.i)(t.statsToReport_,e)&&(n[e]=o,r=!0)}),r&&this.server_.reportStats(n),V(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),De=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Le(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Me,Fe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=De.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(_t(this.path)){if(null!=this.affectedTree.value)return Object(i.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ht(e));return new t(ft(),n,this.revert)}return Object(i.e)(dt(this.path)===e,"operationForChild called for unrelated child."),new t(gt(this.path),this.affectedTree,this.revert)},t}(),Ue=function(){function t(t,e){this.source=t,this.path=e,this.type=De.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,ft()):new t(this.source,gt(this.path))},t}(),Ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=De.OVERWRITE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,ft(),this.snap.getImmediateChild(e)):new t(this.source,gt(this.path),this.snap)},t}(),qe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=De.MERGE}return t.prototype.operationForChild=function(e){if(_t(this.path)){var n=this.children.subtree(new ht(e));return n.isEmpty()?null:n.value?new Ve(this.source,ft(),n.value):new t(this.source,ft(),n)}return Object(i.e)(dt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,gt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Be=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(_t(t))return this.isFullyInitialized()&&!this.filtered_;var e=dt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),He=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function ze(t,e,n,r,o,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(i.f)("Should only compare child_ events.");var r=new Nt(e.childName,e.snapshotNode),o=new Nt(n.childName,n.snapshotNode);return t.index_.compare(r,o)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);o.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function We(t,e){return{eventCache:t,serverCache:e}}function Ke(t,e,n,r){return We(new Be(e,n,r),t.serverCache)}function Ge(t,e,n,r){return We(t.eventCache,new Be(e,n,r))}function Qe(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function $e(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ye=function(){function t(t,e){void 0===e&&(Me||(Me=new Vt(A)),e=Me),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return D(e,function(t,e){n=n.set(new ht(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ft(),value:this.value};if(_t(t))return null;var n=dt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(gt(t),e);return null!=i?{path:bt(new ht(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(_t(e))return this;var n=dt(e),r=this.children.get(n);return null!==r?r.subtree(gt(e)):new t(null)},t.prototype.set=function(e,n){if(_t(e))return new t(n,this.children);var r=dt(e),i=(this.children.get(r)||new t(null)).set(gt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(_t(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=dt(e),r=this.children.get(n);if(r){var i=r.remove(gt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(_t(t))return this.value;var e=dt(t),n=this.children.get(e);return n?n.get(gt(t)):null},t.prototype.setTree=function(e,n){if(_t(e))return n;var r,i=dt(e),o=(this.children.get(i)||new t(null)).setTree(gt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(ft(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(bt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ft(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(_t(t))return null;var i=dt(t),o=this.children.get(i);return o?o.findOnPath_(gt(t),bt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ft(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(_t(e))return this;this.value&&r(n,this.value);var i=dt(e),o=this.children.get(i);return o?o.foreachOnPath_(gt(e),bt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(ft(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(bt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Je=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ye(null))},t}();function Xe(t,e,n){if(_t(e))return new Je(new Ye(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=wt(i,e);return o=o.updateChild(s,n),new Je(t.writeTree_.set(i,o))}var a=new Ye(n),u=t.writeTree_.setTree(e,a);return new Je(u)}function Ze(t,e,n){var r=t;return D(n,function(t,n){r=Xe(r,bt(e,t),n)}),r}function tn(t,e){if(_t(e))return Je.empty();var n=t.writeTree_.setTree(e,new Ye(null));return new Je(n)}function en(t,e){return null!=nn(t,e)}function nn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(wt(n.path,e)):null}function rn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Jt,function(t,n){e.push(new Nt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Nt(t,n.value))}),e}function on(t,e){if(_t(e))return t;var n=nn(t,e);return new Je(null!=n?new Ye(n):t.writeTree_.subtree(e))}function sn(t){return t.writeTree_.isEmpty()}function an(t,e){return un(ft(),t.writeTree_,e)}function un(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,o){".priority"===e?(Object(i.e)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=un(bt(t,e),o,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(bt(t,".priority"),r)),n}function cn(t,e){return _n(e,t)}function ln(t,e){if(t.snap)return St(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&St(bt(t.path,n),e))return!0;return!1}function hn(t){return t.visible}function fn(t,e,n){for(var r=Je.empty(),o=0;o<t.length;++o){var s=t[o];if(e(s)){var a=s.path,u=void 0;if(s.snap)St(n,a)?r=Xe(r,u=wt(n,a),s.snap):St(a,n)&&(u=wt(a,n),r=Xe(r,ft(),s.snap.getChild(u)));else{if(!s.children)throw Object(i.f)("WriteRecord should have .snap or .children");if(St(n,a))r=Ze(r,u=wt(n,a),s.children);else if(St(a,n))if(_t(u=wt(a,n)))r=Ze(r,ft(),s.children);else{var c=Object(i.G)(s.children,dt(u));if(c){var l=c.getChild(gt(u));r=Xe(r,ft(),l)}}}}}return r}function dn(t,e,n,r,i){if(r||i){var o=on(t.visibleWrites,e);return!i&&sn(o)?n:i||null!=n||en(o,ft())?an(fn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(St(t.path,e)||St(e,t.path))},e),n||re.EMPTY_NODE):null}var s=nn(t.visibleWrites,e);if(null!=s)return s;var a=on(t.visibleWrites,e);return sn(a)?n:null!=n||en(a,ft())?an(a,n||re.EMPTY_NODE):null}function pn(t,e,n,r){return dn(t.writeTree,t.treePath,e,n,r)}function gn(t,e){return function(t,e,n){var r=re.EMPTY_NODE,i=nn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Jt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=on(t.visibleWrites,e);return n.forEachChild(Jt,function(t,e){var n=an(on(o,new ht(t)),e);r=r.updateImmediateChild(t,n)}),rn(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return rn(on(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function yn(t,e,n,r){return function(t,e,n,r,o){Object(i.e)(r||o,"Either existingEventSnap or existingServerSnap must exist");var s=bt(e,n);if(en(t.visibleWrites,s))return null;var a=on(t.visibleWrites,s);return sn(a)?o.getChild(n):an(a,o.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function vn(t,e){return function(t,e){return nn(t.visibleWrites,e)}(t.writeTree,bt(t.treePath,e))}function mn(t,e,n){return function(t,e,n,r){var i=bt(e,n),o=nn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?an(on(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function bn(t,e){return _n(bt(t.treePath,e),t.writeTree)}function _n(t,e){return{treePath:t,writeTree:e}}var wn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(i.e)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(i.e)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(n,ve(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(n,ye(n,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(n,ge(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw Object(i.f)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ve(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Cn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),On=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Be(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return mn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:$e(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=on(t.visibleWrites,e),c=nn(u,ft());if(null!=c)a=c;else{if(null==n)return[];a=an(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),d=f.getNext();d&&l.length<1;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function Sn(t,e,n,r,o,s){var a=e.eventCache;if(null!=vn(r,n))return e;var u=void 0,c=void 0;if(_t(n))if(Object(i.e)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=$e(e),h=gn(r,l instanceof re?l:re.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var f=pn(r,$e(e));u=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{var d=dt(n);if(".priority"===d){Object(i.e)(1===pt(n),"Can't have a priority with additional path components");var p=a.getNode(),g=yn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var y=gt(n),v=void 0;if(a.isCompleteForChild(d)){c=e.serverCache.getNode();var m=yn(r,n,a.getNode(),c);v=null!=m?a.getNode().getImmediateChild(d).updateChild(y,m):a.getNode().getImmediateChild(d)}else v=mn(r,d,e.serverCache);u=null!=v?t.filter.updateChild(a.getNode(),d,v,y,o,s):a.getNode()}}return Ke(e,u,a.isFullyInitialized()||_t(n),t.filter.filtersNodes())}function Tn(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(_t(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=dt(n);if(!c.isCompleteForPath(n)&&pt(n)>1)return e;var d=gt(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,Cn,null)}var g=Ge(e,u,c.isFullyInitialized()||_t(n),l.filtersNodes());return Sn(t,g,n,i,new On(i,g,o),a)}function En(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new On(i,e,o);if(_t(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=Ke(e,u,!0,t.filter.filtersNodes());else{var h=dt(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Ke(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=gt(n),d=c.getNode().getImmediateChild(h),p=void 0;if(_t(f))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===yt(f)&&g.getChild(mt(f)).isEmpty()?g:g.updateChild(f,r):re.EMPTY_NODE}a=d.equals(p)?e:Ke(e,t.filter.updateChild(c.getNode(),h,p,f,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function In(t,e){return t.eventCache.isCompleteForChild(e)}function kn(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function xn(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=_t(n)?r:new Ye(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=kn(0,e.serverCache.getNode().getImmediateChild(n),r);c=Tn(t,c,new ht(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=kn(0,e.serverCache.getNode().getImmediateChild(n),r);c=Tn(t,c,new ht(n),h,i,o,s,a)}}),c}var jn,An=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new me(r.getIndex()),o=(n=r).loadsAllData()?new me(n.getIndex()):n.hasLimit()?new _e(n):new be(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(re.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(re.EMPTY_NODE,a.getNode(),null),l=new Be(u,s.isFullyInitialized(),i.filtersNodes()),h=new Be(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=We(h,l),this.eventGenerator_=new He(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Rn(t,e){var n=$e(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!_t(e)&&!n.getImmediateChild(dt(e)).isEmpty())?n.getChild(e):null}function Nn(t){return 0===t.eventRegistrations_.length}function Pn(t,e,n){var r=[];if(n){Object(i.e)(null==e,"A cancel should cancel all event registrations.");var o=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,o);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Dn(t,e,n,r){e.type===De.MERGE&&null!==e.source.queryId&&(Object(i.e)($e(t.viewCache_),"We should always have a full cache before handling merges"),Object(i.e)(Qe(t.viewCache_),"Missing event cache, even though we have a server cache"));var o,s,a=t.viewCache_,u=function(t,e,n,r,o){var s,a,u=new wn;if(n.type===De.OVERWRITE){var c=n;c.source.fromUser?s=En(t,e,c.path,c.snap,r,o,u):(Object(i.e)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!_t(c.path),s=Tn(t,e,c.path,c.snap,r,o,a,u))}else if(n.type===De.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=bt(n,r);In(e,dt(c))&&(a=En(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=bt(n,r);In(e,dt(c))||(a=En(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,o,u):(Object(i.e)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=xn(t,e,l.path,l.children,r,o,a,u))}else if(n.type===De.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,o,s){var a;if(null!=vn(r,n))return e;var u=new On(r,e,o),c=e.eventCache.getNode(),l=void 0;if(_t(n)||".priority"===dt(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=pn(r,$e(e));else{var f=e.serverCache.getNode();Object(i.e)(f instanceof re,"serverChildren would be complete if leaf node"),h=gn(r,f)}l=t.filter.updateFullNode(c,h=h,s)}else{var d=dt(n),p=mn(r,d,e.serverCache);null==p&&e.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?t.filter.updateChild(c,d,p,gt(n),u,s):e.eventCache.getNode().hasChild(d)?t.filter.updateChild(c,d,re.EMPTY_NODE,gt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=pn(r,$e(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=vn(r,ft()),Ke(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,o,u):function(t,e,n,r,i,o,s){if(null!=vn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(_t(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Tn(t,e,n,u.getNode().getChild(n),i,o,a,s);if(_t(n)){var c=new Ye(null);return u.getNode().forEachChild(Lt,function(t,e){c=c.set(new ht(t),e)}),xn(t,e,n,c,i,o,a,s)}return e}var l=new Ye(null);return r.foreach(function(t,e){var r=bt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),xn(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,o,u)}else{if(n.type!==De.LISTEN_COMPLETE)throw Object(i.f)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return Sn(t,Ge(e,o.getNode(),o.isFullyInitialized()||_t(n),o.isFiltered()),n,r,Cn,i)}(t,e,n.path,r,u)}var f=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Qe(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pe(Qe(e)))}}(e,s,f),{viewCache:s,changes:f}}(t.processor_,a,e,n,r);return o=t.processor_,s=u.viewCache,Object(i.e)(s.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Object(i.e)(s.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Object(i.e)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Ln(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Ln(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),ze(t,i,"child_removed",e,r,n),ze(t,i,"child_added",e,r,n),ze(t,i,"child_moved",o,r,n),ze(t,i,"child_changed",e,r,n),ze(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Mn,Fn=function(){return function(){this.views=new Map}}();function Un(t,e,n,r){var s,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(i.e)(null!=c,"SyncTree gave us an op for an invalid query."),Dn(c,e,n,r)}var l=[];try{for(var h=Object(o.g)(t.views.values()),f=h.next();!f.done;f=h.next())l=l.concat(Dn(c=f.value,e,n,r))}catch(d){s={error:d}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return l}function Vn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=pn(n,i?r:null),a=!1;s?a=!0:r instanceof re?(s=gn(n,r),a=!1):(s=re.EMPTY_NODE,a=!1);var u=We(new Be(s,a,!1),new Be(r,i,!1));return new An(e,u)}return o}function qn(t){var e,n,r=[];try{for(var i=Object(o.g)(t.views.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Bn(t,e){var n,r,i=null;try{for(var s=Object(o.g)(t.views.values()),a=s.next();!a.done;a=s.next())i=i||Rn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function Hn(t,e){return e._queryParams.loadsAllData()?Kn(t):t.views.get(e._queryIdentifier)}function zn(t,e){return null!=Hn(t,e)}function Wn(t){return null!=Kn(t)}function Kn(t){var e,n;try{for(var r=Object(o.g)(t.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.query._queryParams.loadsAllData())return s}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Gn=1,Qn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Ye(null),this.pendingWriteTree_={visibleWrites:Je.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function $n(t,e,n,r,o){return function(t,e,n,r,o){Object(i.e)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=Xe(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,o),o?er(t,new Ve({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Yn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(i.e)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var o=r.visible,s=!1,a=t.allWrites.length-1;o&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&ln(u,r.path)?o=!1:St(r.path,u.path)&&(s=!0)),a--}return!!o&&(s?(function(t){t.visibleWrites=fn(t.allWrites,hn,ft()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=tn(t.visibleWrites,r.path):D(r.children,function(e){t.visibleWrites=tn(t.visibleWrites,bt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var o=new Ye(null);return null!=r.snap?o=o.set(ft(),!0):D(r.children,function(t){o=o.set(new ht(t),!0)}),er(t,new Fe(r.path,o,n))}return[]}function Jn(t,e,n){return er(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Xn(t,e,n,r){var s=e._path,a=t.syncPointTree_.get(s),u=[];if(a&&("default"===e._queryIdentifier||zn(a,e))){var c=function(t,e,n,r){var s,a,u=e._queryIdentifier,c=[],l=[],h=Wn(t);if("default"===u)try{for(var f=Object(o.g)(t.views.entries()),d=f.next();!d.done;d=f.next()){var p,g=Object(o.e)(d.value,2),y=g[0];l=l.concat(Pn(p=g[1],n,r)),Nn(p)&&(t.views.delete(y),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(v){s={error:v}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(s)throw s.error}}else(p=t.views.get(u))&&(l=l.concat(Pn(p,n,r)),Nn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Wn(t)&&c.push(new(Object(i.e)(jn,"Reference.ts has not been loaded"),jn)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(s));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),f=t.syncPointTree_.findOnPath(s,function(t,e){return Wn(e)});if(h&&!f){var d=t.syncPointTree_.subtree(s);if(!d.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Wn(e))return[Kn(e)];var r=[];return e&&(r=qn(e)),D(n,function(t,e){r=r.concat(e)}),r})}(d),g=0;g<p.length;++g){var y=p[g],v=y.query,m=ir(t,y);t.listenProvider_.startListening(lr(v),or(t,v),m.hashFn,m.onComplete)}}!f&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(lr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(sr(e));t.listenProvider_.stopListening(lr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=sr(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Zn(t,e,n){var r=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=wt(t,r);o=o||Bn(e,n),s=s||Wn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Wn(u),o=o||Bn(u,ft())):(u=new Fn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=o?a=!0:(a=!1,o=re.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Bn(e,ft());n&&(o=o.updateImmediateChild(t,n))}));var c=zn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=sr(e);Object(i.e)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Gn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var f=function(t,e,n,r,i,o){var s=Vn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Jt,function(t,e){r.push(ge(t,e))}),n.isFullyInitialized()&&r.push(pe(n.getNode())),Ln(t,r,n.getNode(),e)}(s,n)}(u,e,n,cn(t.pendingWriteTree_,r),o,a);if(!c&&!s){var d=Hn(u,e);f=f.concat(function(t,e,n){var r=e._path,o=or(t,e),s=ir(t,n),a=t.listenProvider_.startListening(lr(e),o,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(o)Object(i.e)(!Wn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!_t(t)&&e&&Wn(e))return[Kn(e).query];var r=[];return e&&(r=r.concat(qn(e).map(function(t){return t.query}))),D(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(lr(h),or(t,h))}return a}(t,e,d))}return f}function tr(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Bn(n,wt(t,e));if(r)return r});return dn(r,e,i,n,!0)}function er(t,e){return nr(e,t.syncPointTree_,null,cn(t.pendingWriteTree_,ft()))}function nr(t,e,n,r){if(_t(t.path))return rr(t,e,n,r);var i=e.get(ft());null==n&&null!=i&&(n=Bn(i,ft()));var o=[],s=dt(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=bn(r,s);o=o.concat(nr(a,u,c,l))}return i&&(o=o.concat(Un(i,t,r,n))),o}function rr(t,e,n,r){var i=e.get(ft());null==n&&null!=i&&(n=Bn(i,ft()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=bn(r,e),u=t.operationForChild(e);u&&(o=o.concat(rr(u,i,s,a)))}),i&&(o=o.concat(Un(i,t,r,n))),o}function ir(t,e){var n=e.query,r=or(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||re.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ar(t,n);if(r){var i=ur(r),o=i.path,s=i.queryId,a=wt(o,e);return cr(t,o,new Ue(Le(s),a))}return[]}(t,n._path,r):function(t,e){return er(t,new Ue({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Xn(t,n,null,i)}}}function or(t,e){var n=sr(e);return t.queryToTagMap.get(n)}function sr(t){return t._path.toString()+"$"+t._queryIdentifier}function ar(t,e){return t.tagToQueryMap.get(e)}function ur(t){var e=t.indexOf("$");return Object(i.e)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ht(t.substr(0,e))}}function cr(t,e,n){var r=t.syncPointTree_.get(e);return Object(i.e)(r,"Missing sync point for query tag that we're tracking"),Un(r,n,cn(t.pendingWriteTree_,e),null)}function lr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(i.e)(Mn,"Reference.ts has not been loaded"),Mn)(t._repo,t._path):t}var hr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),fr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=bt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return tr(this.syncTree_,this.path_)},t}(),dr=function(t,e,n){return t&&"object"==typeof t?(Object(i.e)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?pr(t[".sv"],e,n):"object"==typeof t[".sv"]?gr(t[".sv"],e):void Object(i.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},pr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(i.e)(!1,"Unexpected server value: "+t)}},gr=function(t,e,n){t.hasOwnProperty("increment")||Object(i.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(i.e)(!1,"Unexpected increment value: "+r);var o=e.node();if(Object(i.e)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var s=o.getValue();return"number"!=typeof s?r:s+r},yr=function(t,e,n,r){return mr(e,new fr(n,t),r)},vr=function(t,e,n){return mr(t,new hr(e),n)};function mr(t,e,n){var r,i=t.getPriority().val(),o=dr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=dr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Yt(a,oe(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Yt(o))),u.forEachChild(Jt,function(t,i){var o=mr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var br=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function _r(t,e){for(var n=e instanceof ht?e:new ht(e),r=t,o=dt(n);null!==o;){var s=Object(i.G)(r.node.children,o)||{children:{},childCount:0};r=new br(o,r,s),o=dt(n=gt(n))}return r}function wr(t){return t.node.value}function Cr(t,e){t.node.value=e,Ir(t)}function Or(t){return t.node.childCount>0}function Sr(t,e){D(t.node.children,function(n,r){e(new br(n,t,r))})}function Tr(t,e,n,r){n&&!r&&e(t),Sr(t,function(t){Tr(t,e,!0,r)}),n&&r&&e(t)}function Er(t){return new ht(null===t.parent?t.name:Er(t.parent)+"/"+t.name)}function Ir(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===wr(t)&&!Or(t)}(n),o=Object(i.i)(t.node.children,e);r&&o?(delete t.node.children[e],t.node.childCount--,Ir(t)):r||o||(t.node.children[e]=n.node,t.node.childCount++,Ir(t))}(t.parent,t.name,t)}var kr=/[\[\].#$\/\u0000-\u001F\u007F]/,xr=/[\[\].#$\u0000-\u001F\u007F]/,jr=10485760,Ar=function(t){return"string"==typeof t&&0!==t.length&&!kr.test(t)},Rr=function(t){return"string"==typeof t&&0!==t.length&&!xr.test(t)},Nr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!I(t)||t&&"object"==typeof t&&Object(i.i)(t,".sv")},Pr=function(t,e,n,r){r&&void 0===e||Dr(Object(i.n)(t,"value"),e,n)},Dr=function(t,e,n){var r=n instanceof ht?new Tt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+It(r));if("function"==typeof e)throw new Error(t+"contains a function "+It(r)+" with contents = "+e.toString());if(I(e))throw new Error(t+"contains "+e.toString()+" "+It(r));if("string"==typeof e&&e.length>jr/3&&Object(i.H)(e)>jr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+It(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var o=!1,s=!1;if(D(e,function(e,n){if(".value"===e)o=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Ar(e)))throw new Error(t+" contains an invalid key ("+e+") "+It(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(i.H)(e),Et(t)}(r,e),Dr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=Object(i.H)(u),a.parts_.length>0&&(a.byteLength_-=1)}),o&&s)throw new Error(t+' contains ".value" child '+It(r)+" in addition to actual children.")}},Lr=function(t,e,n,r){if(!r||void 0!==e){var o=Object(i.n)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");var s=[];D(e,function(t,e){var r=new ht(t);if(Dr(o,e,bt(n,r)),".priority"===yt(r)&&!Nr(e))throw new Error(o+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=vt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Ar(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ct);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&St(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},Mr=function(t,e,n){if(!n||void 0!==e){if(I(e))throw new Error(Object(i.n)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Nr(e))throw new Error(Object(i.n)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Fr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(i.n)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ur=function(t,e,n,r){if(!(r&&void 0===n||Ar(n)))throw new Error(Object(i.n)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vr=function(t,e,n,r){if(!(r&&void 0===n||Rr(n)))throw new Error(Object(i.n)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qr=function(t,e){if(".info"===dt(e))throw new Error(t+" failed = Can't modify data under /.info/")},Br=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Ar(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Rr(t)}(n))throw new Error(Object(i.n)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Hr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(i.n)(t,e)+"must be a boolean.")},zr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Wr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Ot(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Kr(t,e,n){Wr(t,n),Qr(t,function(t){return Ot(t,e)})}function Gr(t,e,n){Wr(t,n),Qr(t,function(t){return St(t,e)||St(e,t)})}function Qr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?($r(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function $r(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();b&&C("event: "+n.toString()),U(r)}}}var Yr="repo_interrupt",Jr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xe(),this.transactionQueueTree_=new br,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Xr(t){var e=t.infoData_.getNode(new ht(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Zr(t){return(e=(e={timestamp:Xr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ti(t,e,n,r,o){t.dataUpdateCount++;var s=new ht(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(o)if(r){var u=Object(i.E)(n,function(t){return oe(t)});a=function(t,e,n,r){var i=ar(t,r);if(i){var o=ur(i),s=o.path,a=o.queryId,u=wt(s,e),c=Ye.fromObject(n);return cr(t,s,new qe(Le(a),u,c))}return[]}(t.serverSyncTree_,s,u,o)}else{var c=oe(n);a=function(t,e,n,r){var i=ar(t,r);if(null!=i){var o=ur(i),s=o.path,a=o.queryId,u=wt(s,e);return cr(t,s,new Ve(Le(a),u,n))}return[]}(t.serverSyncTree_,s,c,o)}else if(r){var l=Object(i.E)(n,function(t){return oe(t)});a=function(t,e,n){var r=Ye.fromObject(n);return er(t,new qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=oe(n);a=Jn(t.serverSyncTree_,s,h)}var f=s;a.length>0&&(f=di(t,s)),Gr(t.eventQueue_,f,a)}function ei(t,e){ni(t,"connected",e),!1===e&&function(t){ci(t,"onDisconnectEvents");var e=Zr(t),n=xe();Re(t.onDisconnect_,ft(),function(r,i){var o=yr(r,i,t.serverSyncTree_,e);je(n,r,o)});var r=[];Re(n,ft(),function(e,n){r=r.concat(Jn(t.serverSyncTree_,e,n));var i=mi(t,e);di(t,i)}),t.onDisconnect_=xe(),Gr(t.eventQueue_,ft(),r)}(t)}function ni(t,e,n){var r=new ht("/.info/"+e),i=oe(n);t.infoData_.updateSnapshot(r,i);var o=Jn(t.infoSyncTree_,r,i);Gr(t.eventQueue_,r,o)}function ri(t){return t.nextWriteId_++}function ii(t,e,n,r,i){ci(t,"set",{path:e.toString(),value:n,priority:r});var o=Zr(t),s=oe(n,r),a=tr(t.serverSyncTree_,e),u=vr(s,a,o),c=ri(t),l=$n(t.serverSyncTree_,e,u,c,!0);Wr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||E("set at "+e+" failed: "+n);var s=Yn(t.serverSyncTree_,c,!o);Gr(t.eventQueue_,e,s),li(0,i,n,r)});var h=mi(t,e);di(t,h),Gr(t.eventQueue_,h,[])}function oi(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Ae(t.onDisconnect_,e),li(0,n,r,i)})}function si(t,e,n,r){var i=oe(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&je(t.onDisconnect_,e,i),li(0,r,n,o)})}function ai(t,e,n){var r;r=".info"===dt(e._path)?Xn(t.infoSyncTree_,e,n):Xn(t.serverSyncTree_,e,n),Kr(t.eventQueue_,e._path,r)}function ui(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Yr)}function ci(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),C.apply(void 0,Object(o.f)([r],Object(o.e)(e)))}function li(t,e,n,r){e&&U(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function hi(t,e,n){return tr(t.serverSyncTree_,e,n)||re.EMPTY_NODE}function fi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||vi(t,e),wr(e)){var n=gi(t,e);Object(i.e)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),o=hi(t,e,r),s=o,a=o.hash(),u=0;u<n.length;u++){var c=n[u];Object(i.e)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=wt(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=e;t.server_.put(f.toString(),h,function(r){ci(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Yn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(vi(t,_r(t.transactionQueueTree_,e)),fi(t,t.transactionQueueTree_),Gr(t.eventQueue_,e,i),a=0;a<o.length;a++)U(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(E("transaction at "+f.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;di(t,e)}},a)}(t,Er(e),n)}else Or(e)&&Sr(e,function(e){fi(t,e)})}function di(t,e){var n=pi(t,e),r=Er(n);return function(t,e,n){if(0!==e.length){for(var r=[],o=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=wt(n,c.path),h=!1;if(Object(i.e)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,o=o.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",o=o.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0));else{var f=hi(t,c.path,s);c.currentInputSnapshot=f;var d=e[a].update(f.val());if(void 0!==d){Dr("transaction failed: Data returned ",d,c.path);var p=oe(d);"object"==typeof d&&null!=d&&Object(i.i)(d,".priority")||(p=p.updatePriority(f.getPriority()));var g=c.currentWriteId,y=Zr(t),v=vr(p,f,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=v,c.currentWriteId=ri(t),s.splice(s.indexOf(g),1),o=(o=o.concat($n(t.serverSyncTree_,c.path,v,c.currentWriteId,c.applyLocally))).concat(Yn(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",o=o.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0))}Gr(t.eventQueue_,n,o),o=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(vi(t,t.transactionQueueTree_),u=0;u<r.length;u++)U(r[u]);fi(t,t.transactionQueueTree_)}}(t,gi(t,n),r),r}function pi(t,e){var n,r=t.transactionQueueTree_;for(n=dt(e);null!==n&&void 0===wr(r);)r=_r(r,n),n=dt(e=gt(e));return r}function gi(t,e){var n=[];return yi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function yi(t,e,n){var r=wr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Sr(e,function(e){yi(t,e,n)})}function vi(t,e){var n=wr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Cr(e,n.length>0?n:void 0)}Sr(e,function(e){vi(t,e)})}function mi(t,e){var n=Er(pi(t,e)),r=_r(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){bi(t,e)}),bi(t,r),Tr(r,function(e){bi(t,e)}),n}function bi(t,e){var n=wr(e);if(n){for(var r=[],o=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(i.e)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(i.e)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),o=o.concat(Yn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Cr(e,void 0):n.length=s+1,Gr(t.eventQueue_,Er(e),o),a=0;a<r.length;a++)U(r[a])}}var _i=function(t,e){var n=wi(t),r=n.namespace;return"firebase.com"===n.domain&&T(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||T("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&E("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new G(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new ht(n.pathString)}},wi=function(t){var e="",n="",r="",i="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(o.g)(t.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):E("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:s}},Ci=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(i.J)(this.snapshot.exportVal())},t}(),Oi=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Si=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(i.e)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Ti=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new i.a;return oi(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){qr("OnDisconnect.remove",this._path);var t=new i.a;return si(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){qr("OnDisconnect.set",this._path),Pr("OnDisconnect.set",t,this._path,!1);var e=new i.a;return si(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){qr("OnDisconnect.setWithPriority",this._path),Pr("OnDisconnect.setWithPriority",t,this._path,!1),Mr("OnDisconnect.setWithPriority",e,!1);var n=new i.a;return function(t,e,n,r,i){var o=oe(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&je(t.onDisconnect_,e,o),li(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){qr("OnDisconnect.update",this._path),Lr("OnDisconnect.update",t,this._path,!1);var e=new i.a;return function(t,e,n,r){if(Object(i.u)(n))return C("onDisconnect().update() called with empty data.  Don't do anything."),void li(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&D(n,function(n,r){var i=oe(r);je(t.onDisconnect_,bt(e,n),i)}),li(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),Ei=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return _t(this._path)?null:yt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ji(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Ee(this._queryParams),e=N(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Ee(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(i.o)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Ot(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Ii(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function ki(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Lt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==k)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==x)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(t.getIndex()===Jt){if(null!=e&&!Nr(e)||null!=n&&!Nr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(i.e)(t.getIndex()instanceof ue||t.getIndex()===ce,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function xi(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var ji=function(t){function e(e,n){return t.call(this,e,n,new we,!1)||this}return Object(o.c)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=mt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Ei),Ai=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new ht(e),r=Pi(this.ref,e);return new t(this._node.getChild(n),r,Jt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Pi(n.ref,r),Jt))})},t.prototype.hasChild=function(t){var e=new ht(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ri(t,e){return(t=Object(i.o)(t))._checkNotDeleted("ref"),void 0!==e?Pi(t._root,e):t._root}function Ni(t,e){(t=Object(i.o)(t))._checkNotDeleted("refFromURL");var n=_i(e,t._repo.repoInfo_.nodeAdmin);Br("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||T("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ri(t,n.path.toString())}function Pi(t,e){var n;return null===dt((t=Object(i.o)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vr("child","path",n,!1)):Vr("child","path",e,!1),new ji(t._repo,bt(t._path,e))}function Di(t,e){t=Object(i.o)(t),qr("push",t._path),Pr("push",e,t._path,!0);var n,r=Xr(t._repo),o=he(r),s=Pi(t,o),a=Pi(t,o);return n=null!=e?Mi(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Li(t){return qr("remove",t._path),Mi(t,null)}function Mi(t,e){t=Object(i.o)(t),qr("set",t._path),Pr("set",e,t._path,!1);var n=new i.a;return ii(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Fi(t,e){t=Object(i.o)(t),qr("setPriority",t._path),Mr("setPriority",e,!1);var n=new i.a;return ii(t._repo,bt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Ui(t,e,n){if(qr("setWithPriority",t._path),Pr("setWithPriority",e,t._path,!1),Mr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new i.a;return ii(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Vi(t,e){Lr("update",e,t._path,!1);var n=new i.a;return function(t,e,n,r){ci(t,"update",{path:e.toString(),value:n});var o=!0,s=Zr(t),a={};if(D(n,function(n,r){o=!1,a[n]=yr(bt(e,n),oe(r),t.serverSyncTree_,s)}),o)C("update() called with empty data.  Don't do anything."),li(0,r,"ok",void 0);else{var u=ri(t),c=function(t,e,n,r){!function(t,e,n,r){Object(i.e)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ze(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var o=Ye.fromObject(n);return er(t,new qe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(t.serverSyncTree_,e,a,u);Wr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||E("update at "+e+" failed: "+n);var s=Yn(t.serverSyncTree_,u,!o),a=s.length>0?di(t,e):e;Gr(t.eventQueue_,a,s),li(0,r,n,i)}),D(n,function(n){var r=mi(t,bt(e,n));di(t,r)}),Gr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var qi=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Ci("value",this,new Ai(t.snapshotNode,new ji(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Oi(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Bi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Oi(this,t,e):null},t.prototype.createEvent=function(t,e){Object(i.e)(null!=t.childName,"Child events should have a childName.");var n=Pi(new ji(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Ci(t.type,this,new Ai(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Hi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){ai(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Si(n,o||void 0),c="value"===e?new qi(u):new Bi(e,u);return function(t,e,n){var r;r=".info"===dt(e._path)?Zn(t.infoSyncTree_,e,n):Zn(t.serverSyncTree_,e,n),Kr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ai(t._repo,t,c)}}function zi(t,e,n,r){return Hi(t,"value",e,n,r)}function Wi(t,e,n,r){return Hi(t,"child_added",e,n,r)}function Ki(t,e,n,r){return Hi(t,"child_changed",e,n,r)}function Gi(t,e,n,r){return Hi(t,"child_moved",e,n,r)}function Qi(t,e,n,r){return Hi(t,"child_removed",e,n,r)}function $i(t,e,n){var r=null,i=n?new Si(n):null;"value"===e?r=new qi(i):e&&(r=new Bi(e,i)),ai(t._repo,t,r)}var Yi=function(){return function(){}}(),Ji=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Pr("endAt",this._value,t._path,!0);var e=Oe(t._queryParams,this._value,this._key);if(xi(e),ki(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ei(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function Xi(t,e){return Ur("endAt","key",e,!0),new Ji(t,e)}var Zi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Pr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Lt?("string"==typeof n&&(n=de(n)),i=Oe(e,n,r)):i=Oe(e,n,null==r?k:de(r)),i.endBeforeSet_=!0,i);if(xi(o),ki(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ei(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function to(t,e){return Ur("endBefore","key",e,!0),new Zi(t,e)}var eo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Pr("startAt",this._value,t._path,!0);var e=Ce(t._queryParams,this._value,this._key);if(xi(e),ki(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ei(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function no(t,e){return void 0===t&&(t=null),Ur("startAt","key",e,!0),new eo(t,e)}var ro=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Pr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Lt?("string"==typeof n&&(n=fe(n)),i=Ce(e,n,r)):i=Ce(e,n,null==r?x:fe(r)),i.startAfterSet_=!0,i);if(xi(o),ki(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ei(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function io(t,e){return Ur("startAfter","key",e,!0),new ro(t,e)}var oo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ei(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Yi);function so(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oo(t)}var ao=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ei(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Yi);function uo(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ao(t)}var co=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){Ii(t,"orderByChild");var e=new ht(this._path);if(_t(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ue(e),r=Se(t._queryParams,n);return ki(r),new Ei(t._repo,t._path,r,!0)},e}(Yi);function lo(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vr("orderByChild","path",t,!1),new co(t)}var ho=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){Ii(t,"orderByKey");var e=Se(t._queryParams,Lt);return ki(e),new Ei(t._repo,t._path,e,!0)},e}(Yi);function fo(){return new ho}var po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){Ii(t,"orderByPriority");var e=Se(t._queryParams,Jt);return ki(e),new Ei(t._repo,t._path,e,!0)},e}(Yi);function go(){return new po}var yo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){Ii(t,"orderByValue");var e=Se(t._queryParams,ce);return ki(e),new Ei(t._repo,t._path,e,!0)},e}(Yi);function vo(){return new yo}var mo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){if(Pr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ji(this._value,this._key)._apply(new eo(this._value,this._key)._apply(t))},e}(Yi);function bo(t,e){return Ur("equalTo","key",e,!0),new mo(t,e)}function _o(t){for(var e,n,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];var a=Object(i.o)(t);try{for(var u=Object(o.g)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){Object(i.e)(!jn,"__referenceConstructor has already been defined"),jn=t}(ji),function(t){Object(i.e)(!Mn,"__referenceConstructor has already been defined"),Mn=t}(ji);var wo={},Co=!1;function Oo(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||T("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),C("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=_i(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=_i(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new H(H.OWNER):new B(t.name,t.options,e);Br("Invalid Firebase Database URL",a),_t(a.path)||T("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=wo[e.name];i||(wo[e.name]=i={});var o=i[t.toURLString()];return o&&T("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Jr(t,Co,n,r),i[t.toURLString()]=o,o}(u,t,l,new q(t.name,n));return new So(h,t)}var So=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=X(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ie(t.repoInfo_,function(e,n,r,i){ti(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return ei(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(i.J)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Rt(t.repoInfo_,e,function(e,n,r,i){ti(t,e,n,r,i)},function(e){ei(t,e)},function(e){!function(t,e){D(e,function(e,n){ni(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,o;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new Pe(t.stats_,t.server_)},o=t.repoInfo_.toString(),J[o]||(J[o]=r()),J[o]),t.infoData_=new ke,t.infoSyncTree_=new Qn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Jn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ni(t,"connected",!1),t.serverSyncTree_=new Qn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Gr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new ji(this._repo,ft())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return null!==this._rootInternal&&(t=this._repo,(n=wo[e=this.app.name])&&n[t.key]===t||T("Database "+e+"("+t.repoInfo_+") has already been deleted."),ui(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null),Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&T("Cannot call "+t+" on a deleted database.")},t}();function To(t){(t=Object(i.o)(t))._checkNotDeleted("goOffline"),ui(t._repo)}function Eo(t){var e;(t=Object(i.o)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(Yr)}var Io={".sv":"timestamp"},ko=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function xo(t,e,n){var r;if(t=Object(i.o)(t),qr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var o=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new i.a,a=zi(t,function(){});return function(e,n,r,o,a,u){ci(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Ai(r,new ji(t._repo,t._path),Jt),s.resolve(new ko(n,i)))},status:null,order:y(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=hi(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Dr("transaction failed: Data returned ",h,c.path),c.status=0;var f=_r(e.transactionQueueTree_,n),d=wr(f)||[];d.push(c),Cr(f,d);var p=void 0;"object"==typeof h&&null!==h&&Object(i.i)(h,".priority")?(p=Object(i.G)(h,".priority"),Object(i.e)(Nr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(tr(e.serverSyncTree_,n)||re.EMPTY_NODE).getPriority().val();var g=Zr(e),v=oe(h,p),m=vr(v,l,g);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=m,c.currentWriteId=ri(e);var b=$n(e.serverSyncTree_,n,m,c.currentWriteId,c.applyLocally);Gr(e.eventQueue_,n,b),fi(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,o),s.promise}var jo=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(i.K)("OnDisconnect.cancel",0,1,arguments.length),Object(i.L)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){Object(i.K)("OnDisconnect.remove",0,1,arguments.length),Object(i.L)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){Object(i.K)("OnDisconnect.set",1,2,arguments.length),Object(i.L)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){Object(i.K)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(i.L)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if(Object(i.K)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(i.L)("OnDisconnect.update","onComplete",e,!0);var o=this._delegate.update(t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},t}(),Ao=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(i.K)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Ro=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(i.K)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(i.K)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(i.K)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(i.K)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(i.K)("DataSnapshot.child",0,1,arguments.length),e=String(e),Vr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(i.K)("DataSnapshot.hasChild",1,1,arguments.length),Vr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(i.K)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(i.K)("DataSnapshot.forEach",1,1,arguments.length),Object(i.L)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return Object(i.K)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(i.K)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(i.K)("DataSnapshot.ref",0,0,arguments.length),new Po(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),No=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,o){var s,a=this;Object(i.K)("Query.on",2,4,arguments.length),Object(i.L)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,o),c=function(t,e){n.call(u.context,new Ro(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return zi(this._delegate,c,l),n;case"child_added":return Wi(this._delegate,c,l),n;case"child_removed":return Qi(this._delegate,c,l),n;case"child_changed":return Ki(this._delegate,c,l),n;case"child_moved":return Gi(this._delegate,c,l),n;default:throw new Error(Object(i.n)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(i.K)("Query.off",0,3,arguments.length),Fr("Query.off",t,!0),Object(i.L)("Query.off","callback",e,!0),Object(i.M)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,$i(this._delegate,t,r)}else $i(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=wt(t,n);r=r||Bn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Bn(i,ft()):(i=new Fn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Be(r,!0,!1):null;return Qe(Vn(i,e,cn(t.pendingWriteTree_,e._path),o?s.getNode():re.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=oe(n).withIndex(e._queryParams.getIndex()),i=Jn(t.serverSyncTree_,e._path,r);return Kr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return ci(t,"get for query "+Object(i.J)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=Object(i.o)(t))._repo,t).then(function(e){return new Ai(e,new ji(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new Ro(t.database,e)})},t.prototype.once=function(e,n,r,o){var s=this;Object(i.K)("Query.once",1,4,arguments.length),Object(i.L)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,o),u=new i.a,c=function(t,e){var r=new Ro(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Wi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Qi(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Ki(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Gi(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(i.n)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(i.K)("Query.limitToFirst",1,1,arguments.length),new t(this.database,_o(this._delegate,so(e)))},t.prototype.limitToLast=function(e){return Object(i.K)("Query.limitToLast",1,1,arguments.length),new t(this.database,_o(this._delegate,uo(e)))},t.prototype.orderByChild=function(e){return Object(i.K)("Query.orderByChild",1,1,arguments.length),new t(this.database,_o(this._delegate,lo(e)))},t.prototype.orderByKey=function(){return Object(i.K)("Query.orderByKey",0,0,arguments.length),new t(this.database,_o(this._delegate,fo()))},t.prototype.orderByPriority=function(){return Object(i.K)("Query.orderByPriority",0,0,arguments.length),new t(this.database,_o(this._delegate,go()))},t.prototype.orderByValue=function(){return Object(i.K)("Query.orderByValue",0,0,arguments.length),new t(this.database,_o(this._delegate,vo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(i.K)("Query.startAt",0,2,arguments.length),new t(this.database,_o(this._delegate,no(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(i.K)("Query.startAfter",0,2,arguments.length),new t(this.database,_o(this._delegate,io(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(i.K)("Query.endAt",0,2,arguments.length),new t(this.database,_o(this._delegate,Xi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(i.K)("Query.endBefore",0,2,arguments.length),new t(this.database,_o(this._delegate,to(e,n)))},t.prototype.equalTo=function(e,n){return Object(i.K)("Query.equalTo",1,2,arguments.length),new t(this.database,_o(this._delegate,bo(e,n)))},t.prototype.toString=function(){return Object(i.K)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(i.K)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(i.K)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(i.L)(t,"cancel",r.cancel,!0),r.context=n,Object(i.M)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(i.n)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Po(this.database,new ji(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Po=function(t){function e(e,n){var r=t.call(this,e,new Ei(n._repo,n._path,new we,!1))||this;return r.database=e,r._delegate=n,r}return Object(o.c)(e,t),e.prototype.getKey=function(){return Object(i.K)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(i.K)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Pi(this._delegate,t))},e.prototype.getParent=function(){Object(i.K)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(i.K)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(i.K)("Reference.set",1,2,arguments.length),Object(i.L)("Reference.set","onComplete",e,!0);var n=Mi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if(Object(i.K)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}qr("Reference.update",this._delegate._path),Object(i.L)("Reference.update","onComplete",e,!0);var o=Vi(this._delegate,t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},e.prototype.setWithPriority=function(t,e,n){Object(i.K)("Reference.setWithPriority",2,3,arguments.length),Object(i.L)("Reference.setWithPriority","onComplete",n,!0);var r=Ui(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){Object(i.K)("Reference.remove",0,1,arguments.length),Object(i.L)("Reference.remove","onComplete",t,!0);var e=Li(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;Object(i.K)("Reference.transaction",1,3,arguments.length),Object(i.L)("Reference.transaction","transactionUpdate",t,!1),Object(i.L)("Reference.transaction","onComplete",e,!0),Hr("Reference.transaction","applyLocally",n,!0);var o=xo(this._delegate,t,{applyLocally:n}).then(function(t){return new Ao(t.committed,new Ro(r.database,t.snapshot))});return e&&o.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),o},e.prototype.setPriority=function(t,e){Object(i.K)("Reference.setPriority",1,2,arguments.length),Object(i.L)("Reference.setPriority","onComplete",e,!0);var n=Fi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;Object(i.K)("Reference.push",0,2,arguments.length),Object(i.L)("Reference.push","onComplete",n,!0);var o=Di(this._delegate,t),s=o.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,o);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return qr("Reference.onDisconnect",this._delegate._path),new jo(new Ti(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(No),Do=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=Object(i.o)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&T("Cannot call useEmulator() after instance has already been initialized.");var o=t._repoInternal,s=void 0;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&T('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new H(H.OWNER);else if(r.mockUserToken){var a="string"==typeof r.mockUserToken?r.mockUserToken:Object(i.j)(r.mockUserToken,t.app.options.projectId);s=new H(a)}!function(t,e,n,r){t.repoInfo_=new G(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(o,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if(Object(i.K)("database.ref",0,1,arguments.length),t instanceof Po){var e=Ni(this._delegate,t.toString());return new Po(this,e)}return e=Ri(this._delegate,t),new Po(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(i.K)(e,1,1,arguments.length);var n=Ni(this._delegate,t);return new Po(this,n)},t.prototype.goOffline=function(){return Object(i.K)("database.goOffline",0,0,arguments.length),To(this._delegate)},t.prototype.goOnline=function(){return Object(i.K)("database.goOnline",0,0,arguments.length),Eo(this._delegate)},t.ServerValue={TIMESTAMP:Io,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Lo=Object.freeze({__proto__:null,forceLongPolling:function(){ot.forceDisallow(),nt.forceAllow()},forceWebSockets:function(){nt.forceDisallow()},isWebSocketsAvailable:function(){return ot.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Ne(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);D(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;u(t.version);var c=new r.c("auth-internal",new r.b("database-standalone"));return c.setComponent(new r.a("auth-internal",function(){return i},"PRIVATE")),{instance:new Do(Oo(e,c,void 0,n,a),e),namespace:o}}}),Mo=Rt;Rt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Rt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Fo=Object.freeze({__proto__:null,DataConnection:Mo,RealTimeConnection:at,hijackHash:function(t){var e=Rt.prototype.put;return Rt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Rt.prototype.put=e}},ConnectionTarget:G,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){Co=t}(t)}}),Uo=Do.ServerValue;!function(e){u(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new r.a("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Do(Oo(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:Po,Query:No,Database:Do,DataSnapshot:Ro,enableLogging:w,INTERNAL:Lo,ServerValue:Uo,TEST_ACCESS:Fo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.11.0"),Object(i.y)()&&(t.exports=n)}(e.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a});var i="8.10.1";r.a.registerVersion("firebase",i,"app"),r.a.SDK_VERSION=i},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return Je}),n.d(e,"b",function(){return Ba}),n.d(e,"c",function(){return Ma}),n.d(e,"d",function(){return Da}),n.d(e,"e",function(){return La}),n.d(e,"f",function(){return Du}),n.d(e,"g",function(){return Tu}),n.d(e,"h",function(){return zs}),n.d(e,"i",function(){return Za}),n.d(e,"j",function(){return ps}),n.d(e,"k",function(){return Wa}),n.d(e,"l",function(){return ms}),n.d(e,"m",function(){return lr}),n.d(e,"n",function(){return ma}),n.d(e,"o",function(){return zi}),n.d(e,"p",function(){return vn}),n.d(e,"q",function(){return T}),n.d(e,"r",function(){return Ye}),n.d(e,"s",function(){return so}),n.d(e,"t",function(){return Ms}),n.d(e,"u",function(){return Us}),n.d(e,"v",function(){return za}),n.d(e,"w",function(){return ea}),n.d(e,"x",function(){return Iu}),n.d(e,"y",function(){return ta}),n.d(e,"z",function(){return _u}),n.d(e,"A",function(){return nu}),n.d(e,"B",function(){return mn}),n.d(e,"C",function(){return qa}),n.d(e,"D",function(){return Va}),n.d(e,"E",function(){return ws}),n.d(e,"F",function(){return _s}),n.d(e,"G",function(){return pr}),n.d(e,"H",function(){return Os}),n.d(e,"I",function(){return or}),n.d(e,"J",function(){return bn}),n.d(e,"K",function(){return ju}),n.d(e,"L",function(){return Ys}),n.d(e,"M",function(){return cu}),n.d(e,"N",function(){return Xe}),n.d(e,"O",function(){return Ts}),n.d(e,"P",function(){return Ss}),n.d(e,"Q",function(){return ra}),n.d(e,"R",function(){return A}),n.d(e,"S",function(){return wu}),n.d(e,"T",function(){return mu}),n.d(e,"U",function(){return d}),n.d(e,"V",function(){return vu}),n.d(e,"W",function(){return Nu}),n.d(e,"X",function(){return fu}),n.d(e,"Y",function(){return Ha}),n.d(e,"Z",function(){return Ki}),n.d(e,"ab",function(){return ts}),n.d(e,"bb",function(){return rr}),n.d(e,"cb",function(){return Vn}),n.d(e,"db",function(){return xn}),n.d(e,"eb",function(){return An}),n.d(e,"fb",function(){return Dn}),n.d(e,"gb",function(){return Nn}),n.d(e,"hb",function(){return Rn}),n.d(e,"ib",function(){return Pn}),n.d(e,"jb",function(){return Yo}),n.d(e,"kb",function(){return Ru}),n.d(e,"lb",function(){return Jo}),n.d(e,"mb",function(){return Xo}),n.d(e,"nb",function(){return jn}),n.d(e,"ob",function(){return L}),n.d(e,"pb",function(){return yo}),n.d(e,"qb",function(){return Ao}),n.d(e,"rb",function(){return xo}),n.d(e,"sb",function(){return jo}),n.d(e,"tb",function(){return $o}),n.d(e,"ub",function(){return St}),n.d(e,"vb",function(){return l}),n.d(e,"wb",function(){return kn}),n.d(e,"xb",function(){return uo}),n.d(e,"yb",function(){return mt}),n.d(e,"zb",function(){return hs}),n.d(e,"Ab",function(){return Yr}),n.d(e,"Bb",function(){return bo}),n.d(e,"Cb",function(){return Uo}),n.d(e,"Db",function(){return Aa}),n.d(e,"Eb",function(){return G}),n.d(e,"Fb",function(){return tt}),n.d(e,"Gb",function(){return y}),n.d(e,"Hb",function(){return v}),n.d(e,"Ib",function(){return J}),n.d(e,"Jb",function(){return et}),n.d(e,"Kb",function(){return Co}),n.d(e,"Lb",function(){return Io}),n.d(e,"Mb",function(){return Eo}),n.d(e,"Nb",function(){return To}),n.d(e,"Ob",function(){return ko}),n.d(e,"Pb",function(){return Ke}),n.d(e,"Qb",function(){return Wo}),n.d(e,"Rb",function(){return pn}),n.d(e,"Sb",function(){return Ge}),n.d(e,"Tb",function(){return Pa}),n.d(e,"Ub",function(){return Ro}),n.d(e,"Vb",function(){return Ra}),n.d(e,"Wb",function(){return Do}),n.d(e,"Xb",function(){return Oo}),n.d(e,"Yb",function(){return ja}),n.d(e,"Zb",function(){return wo}),n.d(e,"ac",function(){return qt}),n.d(e,"bc",function(){return sr}),n.d(e,"cc",function(){return X}),n.d(e,"dc",function(){return _o}),n.d(e,"ec",function(){return zo});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const f=u({__forward_ref__:u});function d(t){return t.__forward_ref__=d,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(f)&&t.__forward_ref__===d}function y(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function v(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function m(t){return b(t,w)||b(t,O)}function b(t,e){return t.hasOwnProperty(e)?t[e]:null}function _(t){return t&&(t.hasOwnProperty(C)||t.hasOwnProperty(S))?t[C]:null}const w=u({"\u0275prov":u}),C=u({"\u0275inj":u}),O=u({ngInjectableDef:u}),S=u({ngInjectorDef:u});var T=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let E;function I(t){const e=E;return E=t,e}function k(t,e,n){const r=m(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&T.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${l(t)}]`)}function x(t){return{toString:t}.toString()}var j=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),A=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const R="undefined"!=typeof globalThis&&globalThis,N="undefined"!=typeof window&&window,P="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,D="undefined"!=typeof global&&global,L=R||D||N||P,M={},F=[],U=u({"\u0275cmp":u}),V=u({"\u0275dir":u}),q=u({"\u0275pipe":u}),B=u({"\u0275mod":u}),H=u({"\u0275loc":u}),z=u({"\u0275fac":u}),W=u({__NG_ELEMENT_ID__:u});let K=0;function G(t){return x(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===j.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||F,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||A.Emulated,id:"c",styles:t.styles||F,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=K++,n.inputs=Z(t.inputs,e),n.outputs=Z(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Q):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map($):null,n})}function Q(t){return nt(t)||function(t){return t[V]||null}(t)}function $(t){return function(t){return t[q]||null}(t)}const Y={};function J(t){const e={type:t.type,bootstrap:t.bootstrap||F,declarations:t.declarations||F,imports:t.imports||F,exports:t.exports||F,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&x(()=>{Y[t.id]=t.type}),e}function X(t,e){return x(()=>{const n=rt(t,!0);n.declarations=e.declarations||F,n.imports=e.imports||F,n.exports=e.exports||F})}function Z(t,e){if(null==t)return M;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const tt=G;function et(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function nt(t){return t[U]||null}function rt(t,e){const n=t[B]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const it=20,ot=10;function st(t){return Array.isArray(t)&&"object"==typeof t[1]}function at(t){return Array.isArray(t)&&!0===t[1]}function ut(t){return 0!=(8&t.flags)}function ct(t){return 2==(2&t.flags)}function lt(t){return 1==(1&t.flags)}function ht(t){return null!==t.template}function ft(t,e){return t.hasOwnProperty(z)?t[z]:null}class dt extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function pt(t){return"string"==typeof t?t:null==t?"":String(t)}function gt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():pt(t)}function yt(t,e){const n=e?` in ${e}`:"";throw new dt("201",`No provider for ${gt(t)} found${n}`)}class vt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function mt(){return bt}function bt(t){return t.type.prototype.ngOnChanges&&(t.setInput=wt),_t}function _t(){const t=Ct(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===M)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function wt(t,e,n,r){const i=Ct(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:M,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new vt(u&&u.currentValue,e,s===M),t[r]=e}function Ct(t){return t.__ngSimpleChanges__||null}let Ot;function St(t){Ot=t}function Tt(t){return!!t.listen}mt.ngInherit=!0;const Et={createRenderer:(t,e)=>void 0!==Ot?Ot:"undefined"!=typeof document?document:void 0};function It(t){for(;Array.isArray(t);)t=t[0];return t}function kt(t,e){return It(e[t.index])}function xt(t,e){return t.data[e]}function jt(t,e){const n=e[t];return st(n)?n:n[0]}function At(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Rt(t){return 4==(4&t[2])}function Nt(t){return 128==(128&t[2])}function Pt(t,e){return null==e?null:t[e]}function Dt(t){t[18]=0}function Lt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Mt={lFrame:re(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ft(){return Mt.bindingsEnabled}function Ut(){return Mt.lFrame.lView}function Vt(){return Mt.lFrame.tView}function qt(t){Mt.lFrame.contextLView=t}function Bt(){let t=Ht();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ht(){return Mt.lFrame.currentTNode}function zt(t,e){const n=Mt.lFrame;n.currentTNode=t,n.isParent=e}function Wt(){return Mt.lFrame.isParent}function Kt(){return Mt.isInCheckNoChangesMode}function Gt(t){Mt.isInCheckNoChangesMode=t}function Qt(){return Mt.lFrame.bindingIndex++}function $t(t,e){const n=Mt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Yt(e)}function Yt(t){Mt.lFrame.currentDirectiveIndex=t}function Jt(){return Mt.lFrame.currentQueryIndex}function Xt(t){Mt.lFrame.currentQueryIndex=t}function Zt(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function te(t,e,n){if(n&T.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&T.Host||(r=Zt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Mt.lFrame=ne();return r.currentTNode=e,r.lView=t,!0}function ee(t){const e=ne(),n=t[1];Mt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ne(){const t=Mt.lFrame,e=null===t?null:t.child;return null===e?re(t):e}function re(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ie(){const t=Mt.lFrame;return Mt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const oe=ie;function se(){const t=ie();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ae(){return Mt.lFrame.selectedIndex}function ue(t){Mt.lFrame.selectedIndex=t}function ce(){const t=Mt.lFrame;return xt(t.tView,t.selectedIndex)}function le(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function he(t,e,n){pe(t,e,3,n)}function fe(t,e,n,r){(3&t[2])===n&&pe(t,e,n,r)}function de(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function pe(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(ge(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function ge(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const ye=-1;class ve{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function me(t,e,n){const r=Tt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];_e(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function be(t){return 3===t||4===t||6===t}function _e(t){return 64===t.charCodeAt(0)}function we(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ce(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ce(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Oe(t){return t!==ye}function Se(t){return 32767&t}function Te(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ee=!0;function Ie(t){const e=Ee;return Ee=t,e}let ke=0;function xe(t,e){const n=Ae(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,je(r.data,t),je(e,null),je(r.blueprint,null));const i=Re(t,e),o=t.injectorIndex;if(Oe(i)){const t=Se(i),n=Te(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function je(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ae(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Re(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return ye;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ye}function Ne(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(W)&&(r=n[W]),null==r&&(r=n[W]=ke++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Pe(t,e,n){if(n&T.Optional)return t;yt(e,"NodeInjector")}function De(t,e,n,r){if(n&T.Optional&&void 0===r&&(r=null),0==(n&(T.Self|T.Host))){const i=t[9],o=I(void 0);try{return i?i.get(e,r,n&T.Optional):k(e,r,n&T.Optional)}finally{I(o)}}return Pe(r,e,n)}function Le(t,e,n,r=T.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(W)?t[W]:void 0;return"number"==typeof e?e>=0?255&e:Fe:e}(n);if("function"==typeof o){if(!te(e,t,r))return r&T.Host?Pe(i,n,r):De(e,n,r,i);try{const t=o();if(null!=t||r&T.Optional)return t;yt(n)}finally{oe()}}else if("number"==typeof o){let i=null,s=Ae(t,e),a=ye,u=r&T.Host?e[16][6]:null;for((-1===s||r&T.SkipSelf)&&(a=-1===s?Re(t,e):e[s+8],a!==ye&&He(r,!1)?(i=e[1],s=Se(a),e=Te(a,e)):s=-1);-1!==s;){const t=e[1];if(Be(o,s,t.data)){const t=Ue(s,e,n,i,r,u);if(t!==Me)return t}a=e[s+8],a!==ye&&He(r,e[1].data[s+8]===u)&&Be(o,s,e)?(i=t,s=Se(a),e=Te(a,e)):s=-1}}}return De(e,n,r,i)}const Me={};function Fe(){return new ze(Bt(),Ut())}function Ue(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ve(a,s,n,null==r?ct(a)&&Ee:r!=s&&0!=(3&a.type),i&T.Host&&o===a);return null!==u?qe(e,s,u,a):Me}function Ve(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&ht(t)&&t.type===n)return u}return null}function qe(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof ve){const s=i;s.resolving&&function(t,e){throw new dt("200",`Circular dependency in DI detected for ${t}`)}(gt(o[n]));const a=Ie(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?I(s.injectImpl):null;te(t,r,T.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=bt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&I(u),Ie(a),s.resolving=!1,oe()}}return i}function Be(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function He(t,e){return!(t&T.Self||t&T.Host&&e)}class ze{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Le(this._tNode,this._lView,t,void 0,e)}}function We(t){const e=t;if(g(t))return()=>{const t=We(p(e));return t?t():null};let n=ft(e);if(null===n){const t=_(e);n=t&&t.factory}return n||null}function Ke(t){return x(()=>{const e=t.prototype.constructor,n=e[z]||We(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[z]||We(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Ge(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(be(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Bt(),t)}const Qe="__parameters__";function $e(t,e,n){return x(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Qe)?t[Qe]:Object.defineProperty(t,Qe,{value:[]})[Qe];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Ye{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=y({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Je=new Ye("AnalyzeForEntryComponents"),Xe=Function;function Ze(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),Ze(r,e)):e!==t&&e.push(r)}return e}function tn(t,e){t.forEach(t=>Array.isArray(t)?tn(t,e):e(t))}function en(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function nn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function rn(t,e,n){let r=sn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function on(t,e){const n=sn(t,e);if(n>=0)return t[1|n]}function sn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const an={},un=/\n/gm,cn="__source",ln=u({provide:String,useValue:u});let hn;function fn(t){const e=hn;return hn=t,e}function dn(t,e=T.Default){if(void 0===hn)throw new Error("inject() must be called from an injection context");return null===hn?k(t,void 0,e):hn.get(t,e&T.Optional?null:void 0,e)}function pn(t,e=T.Default){return(E||dn)(p(t),e)}function gn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=T.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(pn(t,n))}else e.push(pn(r))}return e}function yn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const vn=yn($e("Inject",t=>({token:t})),-1),mn=yn($e("Optional"),8),bn=yn($e("SkipSelf"),4);let _n;function wn(t){var e;return(null===(e=function(){if(void 0===_n&&(_n=null,L.trustedTypes))try{_n=L.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return _n}())||void 0===e?void 0:e.createHTML(t))||t}class Cn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class On extends Cn{getTypeName(){return"HTML"}}class Sn extends Cn{getTypeName(){return"Style"}}class Tn extends Cn{getTypeName(){return"Script"}}class En extends Cn{getTypeName(){return"URL"}}class In extends Cn{getTypeName(){return"ResourceURL"}}function kn(t){return t instanceof Cn?t.changingThisBreaksApplicationSecurity:t}function xn(t,e){const n=jn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function jn(t){return t instanceof Cn&&t.getTypeName()||null}function An(t){return new On(t)}function Rn(t){return new Sn(t)}function Nn(t){return new Tn(t)}function Pn(t){return new En(t)}function Dn(t){return new In(t)}class Ln{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(wn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Mn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=wn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=wn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Fn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Un=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Vn(t){return(t=String(t)).match(Fn)||t.match(Un)?t:"unsafe:"+t}function qn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Bn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Hn=qn("area,br,col,hr,img,wbr"),zn=qn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Wn=qn("rp,rt"),Kn=Bn(Wn,zn),Gn=Bn(Hn,Bn(zn,qn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Bn(Wn,qn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Kn),Qn=qn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$n=qn("srcset"),Yn=Bn(Qn,$n,qn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),qn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Jn=qn("script,style,template");class Xn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Gn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Jn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Yn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Qn[o]&&(s=Vn(s)),$n[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Vn(t.trim())).join(", ")),this.buf.push(" ",e,'="',er(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Gn.hasOwnProperty(e)&&!Hn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(er(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Zn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tr=/([^\#-~ |!])/g;function er(t){return t.replace(/&/g,"&amp;").replace(Zn,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(tr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let nr;function rr(t,e){let n=null;try{nr=nr||function(t){const e=new Mn(t);return function(){try{return!!(new window.DOMParser).parseFromString(wn(""),"text/html")}catch(t){return!1}}()?new Ln(e):e}(t);let r=e?String(e):"";n=nr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=nr.getInertBodyElement(r)}while(r!==o);return wn((new Xn).sanitizeChildren(ir(n)||n))}finally{if(n){const t=ir(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function ir(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var or=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function sr(t){const e=function(){const t=Ut();return t&&t[12]}();return e?e.sanitize(or.URL,t)||"":xn(t,"URL")?kn(t):Vn(pt(t))}function ar(t){return t.ngDebugContext}function ur(t){return t.ngOriginalError}function cr(t,...e){t.error(...e)}class lr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||cr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?ar(t)?ar(t):this._findContext(ur(t)):null}_findOriginalError(t){let e=ur(t);for(;e&&ur(e);)e=ur(e);return e}}function hr(t,e){t.__ngContext__=e}const fr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(L))();function dr(t){return t instanceof Function?t():t}var pr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function gr(t,e){return(void 0)(t,e)}function yr(t){const e=t[3];return at(e)?e[3]:e}function vr(t){return br(t[13])}function mr(t){return br(t[4])}function br(t){for(;null!==t&&!at(t);)t=t[4];return t}function _r(t,e,n,r,i){if(null!=r){let o,s=!1;at(r)?o=r:st(r)&&(s=!0,r=r[0]);const a=It(r);0===t&&null!==n?null==i?Ir(e,n,a):Er(e,n,a,i||null,!0):1===t&&null!==n?Er(e,n,a,i||null,!0):2===t?function(t,e,n){const r=xr(t,e);r&&function(t,e,n,r){Tt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==It(n)&&_r(e,t,r,o,i);for(let s=ot;s<n.length;s++){const i=n[s];Pr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function wr(t,e,n){return Tt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Cr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Lt(i,-1)),n.splice(r,1)}function Or(t,e){if(t.length<=ot)return;const n=ot+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Cr(o,r),e>0&&(t[n-1][4]=r[4]);const s=nn(t,ot+e);Pr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Sr(t,e){if(!(256&e[2])){const n=e[11];Tt(n)&&n.destroyNode&&Pr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Tr(t[1],t);for(;e;){let n=null;if(st(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)st(e)&&Tr(e[1],e),e=e[3];null===e&&(e=t),st(e)&&Tr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Tr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof ve)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):It(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Tt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&at(e[3])){n!==e[3]&&Cr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Er(t,e,n,r,i){Tt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Ir(t,e,n){Tt(t)?t.appendChild(e,n):e.appendChild(n)}function kr(t,e,n,r,i){null!==r?Er(t,e,n,r,i):Ir(t,e,n)}function xr(t,e){return Tt(t)?t.parentNode(e):e.parentNode}function jr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===A.None||e===A.Emulated)return null}return kt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?kt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)kr(o,i,n[a],s,!1);else kr(o,i,n,s,!1)}function Ar(t,e){if(null!==e){const n=e.type;if(3&n)return kt(e,t);if(4&n)return Rr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Ar(t,n);{const n=t[e.index];return at(n)?Rr(-1,n):It(n)}}if(32&n)return gr(e,t)()||It(t[e.index]);{const n=t[16],r=n[6],i=yr(n),o=r.projection[e.projection];return null!=o?Ar(i,o):Ar(t,e.next)}}return null}function Rr(t,e){const n=ot+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Ar(t,r)}return e[7]}function Nr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&hr(It(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Nr(t,e,n.child,r,i,o,!1),_r(e,t,i,a,o);else if(32&u){const s=gr(n,r);let u;for(;u=s();)_r(e,t,i,u,o);_r(e,t,i,a,o)}else 16&u?Dr(t,e,r,n,i,o):_r(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Pr(t,e,n,r,i,o){Nr(n,r,t.firstChild,e,i,o,!1)}function Dr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)_r(e,t,i,a[u],o);else Nr(t,e,a,s[3],i,o,!0)}function Lr(t,e,n){Tt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Mr(t,e,n){Tt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Fr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Ur="ng-template";function Vr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Fr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function qr(t){return 4===t.type&&t.value!==Ur}function Br(t,e,n){return e===(4!==t.type||n?t.value:Ur)}function Hr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(be(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Br(t,u,n)||""===u&&1===e.length){if(zr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Vr(t.attrs,c,n)){if(zr(r))return!1;s=!0}continue}const l=Wr(8&r?"class":u,i,qr(t),n);if(-1===l){if(zr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Fr(e,c,0)||2&r&&c!==t){if(zr(r))return!1;s=!0}}}}else{if(!s&&!zr(r)&&!zr(u))return!1;if(s&&zr(u))continue;s=!1,r=u|1&r}}return zr(r)||s}function zr(t){return 0==(1&t)}function Wr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Kr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Hr(t,e[r],n))return!0;return!1}function Gr(t,e){return t?":not("+e.trim()+")":e}function Qr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||zr(s)||(e+=Gr(o,i),i=""),r=s,o=o||!zr(r);n++}return""!==i&&(e+=Gr(o,i)),e}const $r={};function Yr(t){Jr(Vt(),Ut(),ae()+t,Kt())}function Jr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&he(e,r,n)}else{const r=t.preOrderHooks;null!==r&&fe(e,r,0,n)}ue(n)}function Xr(t,e){return t<<17|e<<2}function Zr(t){return t>>17&32767}function ti(t){return 2|t}function ei(t){return(131068&t)>>2}function ni(t,e){return-131069&t|e<<2}function ri(t){return 1|t}function ii(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Xt(i),n.contentQueries(2,e[o],o)}}}function oi(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Dt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function si(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Ht(),s=Wt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Mt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Mt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return zt(o,!0),o}function ai(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ui(t,e,n){ee(e);try{const r=t.viewQuery;null!==r&&Mi(1,r,n);const i=t.template;null!==i&&hi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ii(t,e),t.staticViewQueries&&Mi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ri(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,se()}}function ci(t,e,n,r){const i=e[2];if(256==(256&i))return;ee(e);const o=Kt();try{Dt(e),Mt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&hi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&he(e,n,null)}else{const n=t.preOrderHooks;null!==n&&fe(e,n,0,null),de(e,0)}if(function(t){for(let e=vr(t);null!==e;e=mr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Lt(r,1),n[2]|=1024}}}(e),function(t){for(let e=vr(t);null!==e;e=mr(e))for(let t=ot;t<e.length;t++){const n=e[t],r=n[1];Nt(n)&&ci(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ii(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&he(e,n)}else{const n=t.contentHooks;null!==n&&fe(e,n,1),de(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ue(~r);else{const i=r,o=n[++t],s=n[++t];$t(o,i),s(2,e[i])}}}finally{ue(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)ji(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Mi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&he(e,n)}else{const n=t.viewHooks;null!==n&&fe(e,n,2),de(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Lt(e[3],-1))}finally{se()}}function li(t,e,n,r){const i=e[10],o=!Kt(),s=Rt(e);try{o&&!s&&i.begin&&i.begin(),s&&ui(t,e,r),ci(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function hi(t,e,n,r,i){const o=ae();try{ue(-1),2&r&&e.length>it&&Jr(t,e,it,Kt()),n(r,i)}finally{ue(o)}}function fi(t,e,n){Ft()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||xe(n,e),hr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=ht(r);o&&Ei(e,n,r);const u=qe(e,t,a,n);hr(u,e),null!==s&&Ii(0,a-i,u,r,0,s),o&&(jt(n.index,e)[8]=u)}}(t,e,n,kt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Mt.lFrame.currentDirectiveIndex;try{ue(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Yt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||wi(r,i)}}finally{ue(-1),Yt(s)}}(t,e,n))}function di(t,e,n=kt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function pi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=gi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function gi(t,e,n,r,i,o,s,a,u,c){const l=it+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:$r);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function yi(t,e,n,r){const i=Ui(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Vi(t).push(r,i.length-1))}function vi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function mi(t,e,n,r,i,o,s,a){const u=kt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Bi(t,n,c,r,i),ct(e)&&function(t,e){const n=jt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Tt(o)?o.setProperty(u,r,i):_e(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function bi(t,e,n,r){let i=!1;if(Ft()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Kr(n,s.selectors,!1)&&(i||(i=[]),Ne(xe(n,e),t,s.type),ht(s)?(Ci(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Si(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=ai(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=we(n.mergedAttrs,c.hostAttrs),Ti(t,n,e,u,c),Oi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||qr(e)?null:ki(n,i);o.push(c),s=vi(n,u,s),a=vi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new dt("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=we(n.mergedAttrs,n.attrs),i}function _i(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function wi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ci(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Oi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ht(e)&&(n[""]=t)}}function Si(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ti(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=ft(i.type)),s=new ve(o,ht(i),null);t.blueprint[r]=s,n[r]=s,_i(t,e,0,r,ai(t,n,i.hostVars,$r),i)}function Ei(t,e,n){const r=kt(e,t),i=pi(n),o=t[10],s=Ni(t,oi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Ii(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function ki(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function xi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function ji(t,e){const n=jt(e,t);if(Nt(n)){const t=n[1];80&n[2]?ci(t,n,t.template,n[8]):n[5]>0&&Ai(n)}}function Ai(t){for(let n=vr(t);null!==n;n=mr(n))for(let t=ot;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];ci(t,e,t.template,e[8])}else e[5]>0&&Ai(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=jt(e[n],t);Nt(r)&&r[5]>0&&Ai(r)}}function Ri(t,e){const n=jt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),ui(r,n,n[8])}function Ni(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Pi(t){for(;t;){t[2]|=64;const e=yr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Di(t,e,n){const r=e[10];r.begin&&r.begin();try{ci(t,e,t.template,n)}catch(i){throw qi(e,i),i}finally{r.end&&r.end()}}function Li(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=At(n),i=r[1];li(i,r,i.template,n)}}(t[8])}function Mi(t,e,n){Xt(0),e(t,n)}const Fi=(()=>Promise.resolve(null))();function Ui(t){return t[7]||(t[7]=[])}function Vi(t){return t.cleanup||(t.cleanup=[])}function qi(t,e){const n=t[9],r=n?n.get(lr,null):null;r&&r.handleError(e)}function Bi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Hi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const zi=new Ye("INJECTOR",-1);class Wi{get(t,e=an){if(e===an){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const Ki=new Ye("Set Injector scope."),Gi={},Qi={},$i=[];let Yi;function Ji(){return void 0===Yi&&(Yi=new Wi),Yi}function Xi(t,e=null,n=null,r){return new Zi(t,n,e||Ji(),r)}class Zi{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&tn(e,n=>this.processProvider(n,t,e)),tn([t],t=>this.processInjectorType(t,[],i)),this.records.set(zi,no(void 0,this));const o=this.records.get(Ki);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=an,n=T.Default){this.assertNotDestroyed();const r=fn(this);try{if(!(n&T.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Ye)&&m(t);e=n&&this.injectableDefInScope(n)?no(to(t),Gi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&T.Self?Ji():this.parent).get(t,e=n&T.Optional&&e===an?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[cn]&&i.unshift(e[cn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(un,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{fn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=_(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=_(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{tn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];tn(r,t=>this.processProvider(t,n,r||$i))}}this.injectorDefTypes.add(o),this.records.set(o,no(r.factory,Gi));const a=r.providers;if(null!=a&&!s){const e=t;tn(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=io(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return ro(t)?no(void 0,t.useValue):no(eo(t),Gi)}(t);if(io(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=no(void 0,Gi,!0),e.factory=()=>gn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Gi&&(e.value=Qi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function to(t){const e=m(t),n=null!==e?e.factory:ft(t);if(null!==n)return n;const r=_(t);if(null!==r)return r.factory;if(t instanceof Ye)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[w]||t[O]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function eo(t,e,n){let r;if(io(t)){const e=p(t);return ft(e)||to(e)}if(ro(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...gn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>pn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return ft(e)||to(e);r=()=>new e(...gn(t.deps))}var i;return r}function no(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ro(t){return null!==t&&"object"==typeof t&&ln in t}function io(t){return"function"==typeof t}const oo=function(t,e,n){return function(t,e=null,n=null,r){const i=Xi(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let so=(()=>{class t{static create(t,e){return Array.isArray(t)?oo(t,e,""):oo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=an,t.NULL=new Wi,t.\u0275prov=y({token:t,providedIn:"any",factory:()=>pn(zi)}),t.__NG_ELEMENT_ID__=-1,t})();function ao(t,e){le(At(t)[1],Bt())}function uo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(ht(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=co(t.inputs),e.declaredInputs=co(t.declaredInputs),e.outputs=co(t.outputs);const n=i.hostBindings;n&&fo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&lo(t,o),s&&ho(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),ht(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===uo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=we(i.hostAttrs,n=we(n,i.hostAttrs))}}(r)}function co(t){return t===M?{}:t===F?[]:t}function lo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function ho(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function fo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let po=null;function go(){if(!po){const t=L.Symbol;if(t&&t.iterator)po=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(po=n)}}}return po}function yo(t){return!!vo(t)&&(Array.isArray(t)||!(t instanceof Map)&&go()in t)}function vo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function mo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function bo(t,e,n,r){const i=Ut();return mo(i,Qt(),e)&&(Vt(),function(t,e,n,r,i,o){const s=kt(t,e);!function(t,e,n,r,i,o,s){if(null==o)Tt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?pt(o):s(o,r||"",i);Tt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(ce(),i,t,e,n,r)),bo}function _o(t,e,n,r,i,o,s,a){const u=Ut(),c=Vt(),l=t+it,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=si(e,t,4,s||null,Pt(c,a));bi(e,n,l,Pt(c,u)),le(e,l);const h=l.tViews=gi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];zt(h,!1);const f=u[11].createComment("");jr(c,u,f,h),hr(f,u),Ni(u,u[l]=xi(f,u,f,h)),lt(h)&&fi(c,u,h),null!=s&&di(u,h,a)}function wo(t){return function(t,e){return t[e]}(Mt.lFrame.contextLView,it+t)}function Co(t,e=T.Default){const n=Ut();return null===n?pn(t,e):Le(Bt(),n,p(t),e)}function Oo(t,e,n){const r=Ut();return mo(r,Qt(),e)&&mi(Vt(),ce(),r,t,e,r[11],n,!1),Oo}function So(t,e,n,r,i){const o=i?"class":"style";Bi(t,n,e.inputs[o],o,r)}function To(t,e,n,r){const i=Ut(),o=Vt(),s=it+t,a=i[11],u=i[s]=wr(a,e,Mt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=si(e,t,2,i,Pt(a,o));return bi(e,n,u,Pt(a,s)),null!==u.attrs&&Hi(u,u.attrs,!1),null!==u.mergedAttrs&&Hi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];zt(c,!0);const l=c.mergedAttrs;null!==l&&me(a,u,l);const h=c.classes;null!==h&&Mr(a,u,h);const f=c.styles;null!==f&&Lr(a,u,f),64!=(64&c.flags)&&jr(o,i,u,c),0===Mt.lFrame.elementDepthCount&&hr(u,i),Mt.lFrame.elementDepthCount++,lt(c)&&(fi(o,i,c),function(t,e,n){if(ut(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&di(i,c)}function Eo(){let t=Bt();Wt()?Mt.lFrame.isParent=!1:(t=t.parent,zt(t,!1));const e=t;Mt.lFrame.elementDepthCount--;const n=Vt();n.firstCreatePass&&(le(n,t),ut(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&So(n,e,Ut(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&So(n,e,Ut(),e.stylesWithoutHost,!1)}function Io(t,e,n,r){To(t,e,n,r),Eo()}function ko(){return Ut()}function xo(t){return!!t&&"function"==typeof t.then}function jo(t){return!!t&&"function"==typeof t.subscribe}const Ao=jo;function Ro(t,e,n=!1,r){const i=Ut(),o=Vt(),s=Bt();return function(t,e,n,r,i,o,s=!1,a){const u=lt(r),c=t.firstCreatePass&&Vi(t),l=Ui(e);let h=!0;if(3&r.type){const f=kt(r,e),d=a?a(f):M,p=d.target||f,g=l.length,y=a?t=>a(It(t[r.index])).target:r.index;if(Tt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Po(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=Po(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}else o=Po(r,e,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Ro}function No(t,e,n){try{return!1!==e(n)}catch(r){return qi(t,r),!1}}function Po(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?jt(t.index,e):e;0==(32&e[2])&&Pi(s);let a=No(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=No(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Do(t=1){return function(t){return(Mt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Mt.lFrame.contextLView))[8]}(t)}const Lo=[];function Mo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Zr(o):ei(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Fo(t[a],e)&&(u=!0,t[a+1]=r?ri(n):ti(n)),a=r?Zr(n):ei(n)}u&&(t[n+1]=r?ti(o):ri(o))}function Fo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&sn(t,e)>=0}function Uo(t,e){return function(t,e,n,r){const i=Ut(),o=Vt(),s=function(t){const e=Mt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ae()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Mt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=qo(n=Vo(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Vo(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==ei(r))return t[Zr(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Vo(null,t,e,n[1],r),n=qo(n,e.attrs,r),function(t,e,n,r){t[Zr(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=qo(r,t[o].hostAttrs,true);return qo(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=Zr(s),u=ei(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||sn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=Zr(t[a+1]);t[r+1]=Xr(e,a),0!==e&&(t[e+1]=ni(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Xr(a,0),0!==a&&(t[a+1]=ni(t[a+1],r)),a=r;else t[r+1]=Xr(u,0),0===a?a=r:t[u+1]=ni(t[u+1],r),u=r;l&&(t[r+1]=ti(t[r+1])),Mo(t,c,r,!0),Mo(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&sn(o,e)>=0&&(n[r+1]=ri(n[r+1]))}(e,c,t,r),s=Xr(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==$r&&mo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Ho(1==(1&c)?Bo(u,e,n,i,ei(c),s):void 0)||(Ho(o)||function(t){return 2==(2&t)}(c)&&(o=Bo(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Tt(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,function(t,e){return It(e[t])}(ae(),n),i,o))}(o,o.data[ae()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=l(kn(t))),t}(e),true,s)}(t,e),Uo}function Vo(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=qo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function qo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),rn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Bo(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===$r&&(l=c?Lo:void 0);let h=c?on(l,r):u===r?l:void 0;if(o&&!Ho(h)&&(h=on(e,r)),Ho(h)&&(a=h,s))return a;const f=t[i+1];i=s?Zr(f):ei(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=on(t,r))}return a}function Ho(t){return void 0!==t}function zo(t,e=""){const n=Ut(),r=Vt(),i=t+it,o=r.firstCreatePass?si(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Tt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);jr(r,n,s,o),zt(o,!1)}function Wo(t,e,n){const r=Ut();return mo(r,Qt(),e)&&mi(Vt(),ce(),r,t,e,r[11],n,!0),Wo}const Ko=void 0;var Go=["en",[["a","p"],["AM","PM"],Ko],[["AM","PM"],Ko,Ko],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ko,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ko,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ko,"{1} 'at' {0}",Ko],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Qo={};function $o(t,e,n){"string"!=typeof e&&(n=e,e=t[ts.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Qo[e]=t,n&&(Qo[e][ts.ExtraData]=n)}function Yo(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Zo(e);if(n)return n;const r=e.split("-")[0];if(n=Zo(r),n)return n;if("en"===r)return Go;throw new Error(`Missing locale data for the locale "${t}".`)}function Jo(t){return Yo(t)[ts.CurrencyCode]||null}function Xo(t){return Yo(t)[ts.PluralCase]}function Zo(t){return t in Qo||(Qo[t]=L.ng&&L.ng.common&&L.ng.common.locales&&L.ng.common.locales[t]),Qo[t]}var ts=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const es="en-US";let ns=es;function rs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(ns=t.toLowerCase().replace(/_/g,"-"))}function is(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)is(t[o],e,n,r,i);else{const o=Vt(),s=Ut();let a=io(t)?t:p(t.provide),u=eo(t);const c=Bt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(io(t)||!t.multi){const r=new ve(u,i,Co),d=as(a,e,i?l:l+f,h);-1===d?(Ne(xe(c,s),o,a),os(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=as(a,e,l+f,h),p=as(a,e,l,l+f),g=d>=0&&n[d],y=p>=0&&n[p];if(i&&!y||!i&&!g){Ne(xe(c,s),o,a);const l=function(t,e,n,r,i){const o=new ve(t,n,Co);return o.multi=[],o.index=e,o.componentProviders=0,ss(o,i,r&&!n),o}(i?cs:us,n.length,i,r,u);!i&&y&&(n[p].providerFactory=l),os(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else os(o,t,d>-1?d:p,ss(n[i?p:d],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function os(t,e,n,r){const i=io(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ss(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function as(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function us(t,e,n,r){return ls(this.multi,[])}function cs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=qe(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),ls(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],ls(i,o);return o}function ls(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function hs(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Vt();if(r.firstCreatePass){const i=ht(t);is(n,r.data,r.blueprint,i,!0),is(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class fs{}class ds{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let ps=(()=>{class t{}return t.NULL=new ds,t})();function gs(...t){}function ys(t,e){return new ms(kt(t,e))}const vs=function(){return ys(Bt(),Ut())};let ms=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=vs,t})();function bs(t){return t instanceof ms?t.nativeElement:t}class _s{}let ws=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Cs(),t})();const Cs=function(){const t=Ut(),e=jt(Bt().index,t);return function(t){return t[11]}(st(e)?e:t)};let Os=(()=>{class t{}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>null}),t})();class Ss{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ts=new Ss("11.1.2");class Es{constructor(){}supports(t){return yo(t)}create(t){return new ks(t)}}const Is=(t,e)=>e;class ks{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Is}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Rs(n,r,i)?e:n,s=Rs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!yo(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[go()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new xs(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new As),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new As),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class xs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class js{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class As{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new js,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Rs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ns{constructor(){}supports(t){return t instanceof Map||vo(t)}create(){return new Ps}}class Ps{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||vo(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ds(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ds{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ls(){return new Ms([new Es])}let Ms=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ls()),deps:[[t,new bn,new mn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=y({token:t,providedIn:"root",factory:Ls}),t})();function Fs(){return new Us([new Ns])}let Us=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Fs()),deps:[[t,new bn,new mn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=y({token:t,providedIn:"root",factory:Fs}),t})();function Vs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(It(o)),at(o))for(let t=ot;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Vs(e[1],e,n,r)}const s=n.type;if(8&s)Vs(t,e,n.child,r);else if(32&s){const t=gr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=e[16],i=t[6].projection[n.projection];if(Array.isArray(i))r.push(...i);else{const e=yr(t);Vs(e[1],e,i,r,!0)}}n=i?n.projectionNext:n.next}return r}class qs{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Vs(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(at(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Or(t,n),nn(e,n))}this._attachedToViewContainer=!1}Sr(this._lView[1],this._lView)}onDestroy(t){yi(this._lView[1],this._lView,null,t)}markForCheck(){Pi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Di(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Gt(!0);try{Di(t,e,n)}finally{Gt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Pr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Bs extends qs{constructor(t){super(t),this._view=t}detectChanges(){Li(this._view)}checkNoChanges(){!function(t){Gt(!0);try{Li(t)}finally{Gt(!1)}}(this._view)}get context(){return null}}const Hs=Ws;let zs=(()=>{class t{}return t.__NG_ELEMENT_ID__=Hs,t.__ChangeDetectorRef__=!0,t})();function Ws(t=!1){return function(t,e,n){if(!n&&ct(t)){const n=jt(t.index,e);return new qs(n,n)}return 47&t.type?new qs(e[16],e):null}(Bt(),Ut(),t)}const Ks=[new Ns],Gs=new Ms([new Es]),Qs=new Us(Ks),$s=function(){return Zs(Bt(),Ut())};let Ys=(()=>{class t{}return t.__NG_ELEMENT_ID__=$s,t})();const Js=Ys,Xs=class extends Js{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=oi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),ui(e,n,t),new qs(n)}};function Zs(t,e){return 4&t.type?new Xs(e,t,ys(t,e)):null}class ta{}class ea{}const na=function(){return ua(Bt(),Ut())};let ra=(()=>{class t{}return t.__NG_ELEMENT_ID__=na,t})();const ia=ra,oa=class extends ia{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return ys(this._hostTNode,this._hostLView)}get injector(){return new ze(this._hostTNode,this._hostLView)}get parentInjector(){const t=Re(this._hostTNode,this._hostLView);if(Oe(t)){const e=Te(t,this._hostLView),n=Se(t);return new ze(e[1].data[n+8],e)}return new ze(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=sa(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ot}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ta,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(at(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new oa(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ot+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ot?(e[4]=n[i],en(n,ot+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Rr(i,o),a=n[11],u=xr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Pr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),en(aa(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=sa(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Or(this._lContainer,e);n&&(nn(aa(this._lContainer),e),Sr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Or(this._lContainer,e);return n&&null!=nn(aa(this._lContainer),e)?new qs(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function sa(t){return t[8]}function aa(t){return t[8]||(t[8]=[])}function ua(t,e){let n;const r=e[t.index];if(at(r))n=r;else{let i;if(8&t.type)i=It(r);else{const n=e[11];i=n.createComment("");const r=kt(t,e);Er(n,xr(n,r),i,function(t,e){return Tt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=xi(r,e,i,t),Ni(e,n)}return new oa(n,t,e)}const ca={};class la extends ps{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=nt(t);return new da(e,this.ngModule)}}function ha(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const fa=new Ye("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>fr});class da extends fs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Qr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ha(this.componentDef.inputs)}get outputs(){return ha(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ca,i);return o!==ca||r===ca?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(_s,Et),s=i.get(Os,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Tt(t))return t.selectRootElement(e,n===A.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):wr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:fr,clean:Fi,playerHandler:null,flags:0},f=gi(0,null,null,1,0,null,null,null,null,null),d=oi(null,f,h,l,null,null,o,a,s,i);let p,g;ee(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=si(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Hi(a,u,!0),null!==t&&(me(i,t,u),null!==a.classes&&Mr(i,t,a.classes),null!==a.styles&&Lr(i,t,a.styles)));const c=r.createRenderer(t,e),l=oi(n,pi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Ne(xe(a,n),s,e.type),Ci(s,a),Si(a,n.length,1)),Ni(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)me(a,c,["ng-version",Ts.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!zr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&me(a,c,t),e&&e.length>0&&Mr(a,c,e.join(" "))}if(g=xt(f,it),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Bt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ti(t,r,e,ai(t,e,1,null),n));const i=qe(e,t,r.directiveStart,r);hr(i,e);const o=kt(r,e);return o&&hr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Bt();e.contentQueries(1,s,t.directiveStart)}const a=Bt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ue(a.index),_i(n[1],a,0,a.directiveStart,a.directiveEnd,e),wi(e,s)),s}(t,this.componentDef,d,h,[ao]),ui(f,d,null)}finally{se()}return new pa(this.componentType,p,ys(g,d),d,g)}}class pa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Bs(r),this.componentType=t}get injector(){return new ze(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const ga=new Map;class ya extends ta{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new la(this);const n=rt(t),r=t[H]||null;r&&rs(r),this._bootstrapComponents=dr(n.bootstrap),this._r3Injector=Xi(t,e,[{provide:ta,useValue:this},{provide:ps,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=so.THROW_IF_NOT_FOUND,n=T.Default){return t===so||t===ta||t===zi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class va extends ea{constructor(t){super(),this.moduleType=t,null!==rt(t)&&function(t){const e=new Set;!function t(n){const r=rt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,ga.get(i),n),ga.set(i,n));const o=dr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new ya(this.moduleType,t)}}const ma=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function ba(){return this._results[go()]()}class _a{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=go(),n=_a.prototype;n[e]||(n[e]=ba)}get changes(){return this._changes||(this._changes=new ma)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=Ze(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class wa{constructor(t){this.queryList=t,this.matches=null}clone(){return new wa(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ca{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ca(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Na(t,e).matches&&this.queries[e].setDirty()}}class Oa{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Sa{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Sa(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ta{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ta(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ea(e,i)),this.matchTNodeWithReadOption(t,e,Ve(e,t,i,!1,!1))}else n===Ys?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ve(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ms||r===ra||r===Ys&&4&e.type)this.addMatch(e.index,-2);else{const n=Ve(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ea(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ia(t,e,n,r){return-1===n?function(t,e){return 11&t.type?ys(t,e):4&t.type?Zs(t,e):null}(e,t):-2===n?function(t,e,n){return n===ms?ys(e,t):n===Ys?Zs(e,t):n===ra?ua(e,t):void 0}(t,e,r):qe(t,t[1],n,e)}function ka(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Ia(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function xa(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=ka(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ot;t<s.length;t++){const e=s[t];e[17]===e[3]&&xa(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];xa(n[1],n,i,r)}}}}}return r}function ja(t){const e=Ut(),n=Vt(),r=Jt();Xt(r+1);const i=Na(n,r);if(t.dirty&&Rt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?xa(n,e,r,[]):ka(n,e,i,r);t.reset(o,bs),t.notifyOnChanges()}return!0}return!1}function Aa(t,e,n,r){const i=Vt();if(i.firstCreatePass){const o=Bt();(function(t,e,n){null===t.queries&&(t.queries=new Sa),t.queries.track(new Ta(e,n))})(i,new Oa(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new _a(4==(4&n));yi(t,e,r,r.destroy),null===e[19]&&(e[19]=new Ca),e[19].queries.push(new wa(r))}(i,Ut(),n)}function Ra(){return t=Ut(),e=Jt(),t[19].queries[e].queryList;var t,e}function Na(t,e){return t.queries.getByIndex(e)}function Pa(t=T.Default){const e=Ws(!0);if(null!=e||t&T.Optional)return e;yt("ChangeDetectorRef")}const Da=new Ye("Application Initializer");let La=(()=>{class t{constructor(t){this.appInits=t,this.resolve=gs,this.reject=gs,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();xo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(pn(Da,8))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const Ma=new Ye("AppId"),Fa={provide:Ma,useFactory:function(){return`${Ua()}${Ua()}${Ua()}`},deps:[]};function Ua(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Va=new Ye("Platform Initializer"),qa=new Ye("Platform ID"),Ba=new Ye("appBootstrapListener");let Ha=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const za=new Ye("LocaleId"),Wa=new Ye("DefaultCurrencyCode");class Ka{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Ga=function(t){return new va(t)},Qa=Ga,$a=function(t){return Promise.resolve(Ga(t))},Ya=function(t){const e=Ga(t),n=dr(rt(t).declarations).reduce((t,e)=>{const n=nt(e);return n&&t.push(new da(n)),t},[]);return new Ka(e,n)},Ja=Ya,Xa=function(t){return Promise.resolve(Ya(t))};let Za=(()=>{class t{constructor(){this.compileModuleSync=Qa,this.compileModuleAsync=$a,this.compileModuleAndAllComponentsSync=Ja,this.compileModuleAndAllComponentsAsync=Xa}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const tu=(()=>Promise.resolve(0))();function eu(t){"undefined"==typeof Zone?tu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class nu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ma(!1),this.onMicrotaskEmpty=new ma(!1),this.onStable=new ma(!1),this.onError=new ma(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=L.requestAnimationFrame,e=L.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(L,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ou(t),iu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ou(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return su(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),au(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return su(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),au(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,ou(t),iu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!nu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(nu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,ru,gs,gs);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const ru={};function iu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ou(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function su(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function au(t){t._nesting--,iu(t)}class uu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ma,this.onMicrotaskEmpty=new ma,this.onStable=new ma,this.onError=new ma}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let cu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{nu.assertNotInAngularZone(),eu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())eu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(pn(nu))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})(),lu=(()=>{class t{constructor(){this._applications=new Map,pu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return pu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();class hu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function fu(t){pu=t}let du,pu=new hu,gu=!0,yu=!1;function vu(){return yu=!0,gu}function mu(){if(yu)throw new Error("Cannot enable prod mode after platform setup.");gu=!1}const bu=new Ye("AllowMultipleToken");class _u{constructor(t,e){this.name=t,this.token=e}}function wu(t,e,n=[]){const r=`Platform: ${e}`,i=new Ye(r);return(e=[])=>{let o=Cu();if(!o||o.injector.get(bu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Ki,useValue:"platform"});!function(t){if(du&&!du.destroyed&&!du.injector.get(bu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");du=t.get(Ou);const e=t.get(Va,null);e&&e.forEach(t=>t())}(so.create({providers:t,name:r}))}return function(t){const e=Cu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Cu(){return du&&!du.destroyed?du:null}let Ou=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new uu:("zone.js"===t?void 0:t)||new nu({enableLongStackTrace:vu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:nu,useValue:n}];return n.run(()=>{const e=so.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(lr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Eu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return xo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(La);return t.runInitializers(),t.donePromise.then(()=>(rs(i.injector.get(za,es)||es),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Su({},e);return function(t,e,n){const r=new va(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Tu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(pn(so))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Su(t,e){return Array.isArray(e)?e.reduce(Su,t):Object.assign(Object.assign({},t),e)}let Tu=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{nu.assertNotInAngularZone(),eu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{nu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof fs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ta),i=n.create(so.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(cu,null),a=s&&i.injector.get(lu);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Eu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),vu()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Eu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ba,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(pn(nu),pn(Ha),pn(so),pn(lr),pn(ps),pn(La))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Eu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Iu{}class ku{}const xu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let ju=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||xu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Au(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Au(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(pn(Za),pn(ku,8))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Au(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Ru=function(t){return null},Nu=wu(null,"core",[{provide:qa,useValue:"unknown"},{provide:Ou,deps:[so]},{provide:lu,deps:[]},{provide:Ha,deps:[]}]),Pu=[{provide:Tu,useClass:Tu,deps:[nu,Ha,so,lr,ps,La]},{provide:fa,deps:[nu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:La,useClass:La,deps:[[new mn,Da]]},{provide:Za,useClass:Za,deps:[]},Fa,{provide:Ms,useFactory:function(){return Gs},deps:[]},{provide:Us,useFactory:function(){return Qs},deps:[]},{provide:za,useFactory:function(t){return rs(t=t||"undefined"!=typeof $localize&&$localize.locale||es),t},deps:[[new vn(za),new mn,new bn]]},{provide:Wa,useValue:"USD"}];let Du=(()=>{class t{constructor(t){}}return t.\u0275mod=J({type:t}),t.\u0275inj=v({factory:function(e){return new(e||t)(pn(Tu))},providers:Pu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},kScs:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return t.hashStr=function(t,e){return void 0===e&&(e=!1),this.onePassHasher.start().appendStr(t).end(e)},t.hashAsciiStr=function(t,e){return void 0===e&&(e=!1),this.onePassHasher.start().appendAsciiStr(t).end(e)},t._hex=function(e){var n,r,i,o,s=t.hexChars,a=t.hexOut;for(o=0;o<4;o+=1)for(r=8*o,n=e[o],i=0;i<8;i+=2)a[r+1+i]=s.charAt(15&n),a[r+0+i]=s.charAt(15&(n>>>=4)),n>>>=4;return a.join("")},t._md5cycle=function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3];r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+e[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+e[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+e[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&n)+e[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+e[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+e[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+e[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&n)+e[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+e[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+e[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+e[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&n)+e[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+e[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+e[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+e[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&n)+e[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+e[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+e[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+e[11]+643717713|0)<<14|i>>>18)+o|0)&n|o&~n)+e[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+e[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+e[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+e[15]-660478335|0)<<14|i>>>18)+o|0)&n|o&~n)+e[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+e[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+e[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+e[3]-187363961|0)<<14|i>>>18)+o|0)&n|o&~n)+e[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+e[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+e[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+e[7]+1735328473|0)<<14|i>>>18)+o|0)&n|o&~n)+e[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+e[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+e[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+e[11]+1839030562|0)<<16|i>>>16)+o|0)^o^n)+e[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+e[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+e[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+e[7]-155497632|0)<<16|i>>>16)+o|0)^o^n)+e[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+e[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+e[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+e[3]-722521979|0)<<16|i>>>16)+o|0)^o^n)+e[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+e[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+e[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+e[15]+530742520|0)<<16|i>>>16)+o|0)^o^n)+e[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+e[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+e[7]+1126891415|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+e[14]-1416354905|0)<<15|i>>>17)+o|0)|~n))+e[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+e[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+e[3]-1894986606|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+e[10]-1051523|0)<<15|i>>>17)+o|0)|~n))+e[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+e[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+e[15]-30611744|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+e[6]-1560198380|0)<<15|i>>>17)+o|0)|~n))+e[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+e[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+e[11]-1120210379|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+e[2]+718787259|0)<<15|i>>>17)+o|0)|~n))+e[9]-343485551|0)<<21|r>>>11)+i|0,t[0]=n+t[0]|0,t[1]=r+t[1]|0,t[2]=i+t[2]|0,t[3]=o+t[3]|0},t.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(t.stateIdentity),this},t.prototype.appendStr=function(e){var n,r,i=this._buffer8,o=this._buffer32,s=this._bufferLength;for(r=0;r<e.length;r+=1){if((n=e.charCodeAt(r))<128)i[s++]=n;else if(n<2048)i[s++]=192+(n>>>6),i[s++]=63&n|128;else if(n<55296||n>56319)i[s++]=224+(n>>>12),i[s++]=n>>>6&63|128,i[s++]=63&n|128;else{if((n=1024*(n-55296)+(e.charCodeAt(++r)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");i[s++]=240+(n>>>18),i[s++]=n>>>12&63|128,i[s++]=n>>>6&63|128,i[s++]=63&n|128}s>=64&&(this._dataLength+=64,t._md5cycle(this._state,o),s-=64,o[0]=o[16])}return this._bufferLength=s,this},t.prototype.appendAsciiStr=function(e){for(var n,r=this._buffer8,i=this._buffer32,o=this._bufferLength,s=0;;){for(n=Math.min(e.length-s,64-o);n--;)r[o++]=e.charCodeAt(s++);if(o<64)break;this._dataLength+=64,t._md5cycle(this._state,i),o=0}return this._bufferLength=o,this},t.prototype.appendByteArray=function(e){for(var n,r=this._buffer8,i=this._buffer32,o=this._bufferLength,s=0;;){for(n=Math.min(e.length-s,64-o);n--;)r[o++]=e[s++];if(o<64)break;this._dataLength+=64,t._md5cycle(this._state,i),o=0}return this._bufferLength=o,this},t.prototype.getState=function(){var t=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[t[0],t[1],t[2],t[3]]}},t.prototype.setState=function(t){var e,n=t.buffer,r=t.state,i=this._state;for(this._dataLength=t.length,this._bufferLength=t.buflen,i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],e=0;e<n.length;e+=1)this._buffer8[e]=n.charCodeAt(e)},t.prototype.end=function(e){void 0===e&&(e=!1);var n=this._bufferLength,r=this._buffer8,i=this._buffer32,o=1+(n>>2);this._dataLength+=n;var s=8*this._dataLength;if(r[n]=128,r[n+1]=r[n+2]=r[n+3]=0,i.set(t.buffer32Identity.subarray(o),o),n>55&&(t._md5cycle(this._state,i),i.set(t.buffer32Identity)),s<=4294967295)i[14]=s;else{var a=s.toString(16).match(/(.*?)(.{0,8})$/);if(null===a)return;var u=parseInt(a[2],16),c=parseInt(a[1],16)||0;i[14]=u,i[15]=c}return t._md5cycle(this._state,i),e?this._state:t._hex(this._state)},t.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),t.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),t.hexChars="0123456789abcdef",t.hexOut=[],t.onePassHasher=new t,t}();if(e.Md5=r,"5d41402abc4b2a76b9719d911017c592"!==r.hashStr("hello"))throw new Error("Md5 self test failed.")},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return I}),n.d(e,"c",function(){return E}),n.d(e,"d",function(){return V}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"i",function(){return D}),n.d(e,"j",function(){return p}),n.d(e,"k",function(){return q}),n.d(e,"l",function(){return h}),n.d(e,"m",function(){return f}),n.d(e,"n",function(){return W}),n.d(e,"o",function(){return Y}),n.d(e,"p",function(){return g}),n.d(e,"q",function(){return P}),n.d(e,"r",function(){return m}),n.d(e,"s",function(){return b}),n.d(e,"t",function(){return w}),n.d(e,"u",function(){return M}),n.d(e,"v",function(){return C}),n.d(e,"w",function(){return y}),n.d(e,"x",function(){return v}),n.d(e,"y",function(){return S}),n.d(e,"z",function(){return _}),n.d(e,"A",function(){return T}),n.d(e,"B",function(){return O}),n.d(e,"C",function(){return N}),n.d(e,"D",function(){return j}),n.d(e,"E",function(){return F}),n.d(e,"F",function(){return U}),n.d(e,"G",function(){return L}),n.d(e,"H",function(){return $}),n.d(e,"I",function(){return Q}),n.d(e,"J",function(){return A}),n.d(e,"K",function(){return z}),n.d(e,"L",function(){return K}),n.d(e,"M",function(){return G});var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){return u(t).replace(/\./g,"")},l=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function h(t){return f(void 0,t)}function f(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=f(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function p(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Object(r.a)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[c(JSON.stringify({alg:"none",type:"JWT"})),c(JSON.stringify(s)),""].join(".")}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function y(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function v(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function m(){return"object"==typeof self&&self.self===self}function b(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function _(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function w(){return g().indexOf("Electron/")>=0}function C(){var t=g();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function O(){return g().indexOf("MSAppHost/")>=0}function S(){return!1}function T(){return!v()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var E=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,I.prototype.create),o}return Object(r.c)(e,t),e}(Error),I=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?k(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new E(i,a,r);return u},t}();function k(t,e){return t.replace(x,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var x=/\{\$([^}]+)}/g;function j(t){return JSON.parse(t)}function A(t){return JSON.stringify(t)}var R=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=j(l(o[0])||""),n=j(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},N=function(t){var e=R(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},P=function(t){var e=R(t).claims;return"object"==typeof e&&!0===e.admin};function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function M(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function F(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function U(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var V=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function q(t,e){var n=new B(t,e);return n.subscribe.bind(n)}var B=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function H(){}var z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function W(t,e){return t+" failed: "+e+" argument "}function K(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(W(t,e)+"must be a valid function.")}function G(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(W(t,e)+"must be a valid context object.")}var Q=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},$=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Y(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return E}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return m}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return v}),n.d(e,"f",function(){return S}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return y}),n.d(e,"j",function(){return C});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),v=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},m=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),_=new u.P("6.1.5");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&O("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const C=()=>{O("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},O=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function S(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&O("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const T={provide:class{},useFactory:w,deps:[m,u.A,[new u.B,b]]};let E=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:m,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Ib({type:t}),t.\u0275inj=u.Hb({factory:function(e){return new(e||t)(u.Rb(u.C))},providers:[T]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new v(t,e))}}class v{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new f(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class f extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function d(){return new r.a}function p(){return t=>{return a()((e=d,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.l)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.i)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.i)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.m)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.m)(e,t)},createSubscribe:s.k,ErrorFactory:s.b,deepExtend:s.m}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.r)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.x)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new v(t)},"PRIVATE")),t.registerVersion(h,"0.6.30",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Rb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=Object(r.Gb)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l(Object(r.Rb)(s))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:v,token:t,providedIn:"root"}),t})();function v(t){const e=Object(r.Rb)(s).location;return new b(Object(r.Rb)(a),e&&e.origin||"")}const m=new r.r("appBaseHref");let b=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a),r.Rb(m,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a),r.Rb(m,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(O(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,O(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(y),r.Rb(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Gb)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new w(Object(r.Rb)(y),Object(r.Rb)(a))}function O(t){return t.replace(/\/index.html$/,"")}var S=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const T=r.mb;class E{}let I=(()=>{class t extends E{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(T(e||this.locale)(t)){case S.Zero:return"zero";case S.One:return"one";case S.Two:return"two";case S.Few:return"few";case S.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.v))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),k=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new x,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){j("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){j("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class x{constructor(){this.$implicit=null,this.ngIf=null}}function j(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.vb)(e)}'.`)}let A=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[{provide:E,useClass:I}]}),t})();function R(t){return"server"===t}let N=(()=>{class t{}return t.\u0275prov=Object(r.Gb)({token:t,providedIn:"root",factory:()=>new P(Object(r.Rb)(s),window)}),t})();class P{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=D(this.window.history)||D(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function D(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class L extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new L,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=F||(F=document.querySelector("base"),F)?F.getAttribute("href"):null;return null==e?null:(n=e,M||(M=document.createElement("a")),M.setAttribute("href",n),"/"===M.pathname.charAt(0)?M.pathname:"/"+M.pathname);var n}resetBaseElement(){F=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let M,F=null;const U=new r.r("TRANSITION_ID"),V=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[U,s,r.s],multi:!0}];class q{static init(){Object(r.X)(new q)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const B=new r.r("EventManagerPlugins");let H=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(B),r.Rb(r.A))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class z{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let W=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),K=(()=>{class t extends W{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const G={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Q=/%COMP%/g;function $(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?$(t,i,n):(i=i.replace(Q,t),n.push(i))}return n}function Y(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let J=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new X(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Z(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new tt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=$(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(H),r.Rb(K),r.Rb(r.c))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class X{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(G[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=G[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=G[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Y(n)):this.eventManager.addEventListener(t,e,Y(n))}}class Z extends X{constructor(t,e,n,r){super(t),this.component=n;const i=$(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Q,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Q,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class tt extends X{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=$(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let et=(()=>{class t extends z{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const nt=["alt","control","meta","shift"],rt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},it={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ot={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let st=(()=>{class t extends z{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(nt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&it.hasOwnProperty(e)&&(e=it[e]))}return rt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),nt.forEach(r=>{r!=n&&(0,ot[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const at=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){L.makeCurrent(),q.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],ut=Object(r.S)(r.W,"browser",at),ct=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:B,useClass:et,multi:!0,deps:[s,r.A,r.C]},{provide:B,useClass:st,multi:!0,deps:[s]},[],{provide:J,useClass:J,deps:[H,K,r.c]},{provide:r.F,useExisting:J},{provide:W,useExisting:K},{provide:K,useClass:K,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:H,useClass:H,deps:[B,r.A]},[]];let lt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:U,useExisting:r.c},V]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Rb(t,12))},providers:ct,imports:[A,r.f]}),t})();"undefined"!=typeof window&&window;var ht=n("spgP"),ft=n("D0XW"),dt=n("HDdC"),pt=n("LRne"),gt=n("VRyK"),yt=n("lJxs"),vt=n("w1tV"),mt=n("Cfvw"),bt=n("zx2A");function _t(t,e){return"function"==typeof e?n=>n.pipe(_t((n,r)=>Object(mt.a)(t(n,r)).pipe(Object(yt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new wt(t))}class wt{constructor(t){this.project=t}call(t,e){return e.subscribe(new Ct(t,this.project))}}class Ct extends bt.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new bt.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(bt.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var Ot=n("7o/Q");function St(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Tt(t,e,n))}}class Tt{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Et(t,this.accumulator,this.seed,this.hasSeed))}}class Et extends Ot.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function It(t,e){return n=>n.lift(new kt(t,e))}class kt{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new xt(t,this.compare,this.keySelector))}}class xt extends Ot.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class jt extends Ot.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class At extends Ot.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Rt=n("SeVD");function Nt(t,e,n,r,i=new At(t,n,r)){if(!i.closed)return e instanceof dt.a?e.subscribe(i):Object(Rt.a)(e)(i)}class Pt{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Dt(t,this.observables,this.project))}}class Dt extends jt{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Nt(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Lt{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Mt(t,this.predicate))}}class Mt extends Ot.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}n("6Uf2");var Ft=n("XNiG"),Ut=n("pxpQ"),Vt=n("qgXg"),qt=n("quSY"),Bt=n("9ppp"),Ht=n("Ylt2");class zt extends Ft.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Wt(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Bt.a;if(this.isStopped||this.hasError?o=qt.a.EMPTY:(this.observers.push(t),o=new Ht.a(this,t)),r&&t.add(t=new Ut.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Vt.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Wt{constructor(t,e){this.time=t,this.value=e}}function Kt(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new zt(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const Gt=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function Qt(t,e){return function(n){return n.lift(new $t(t,e))}}class $t{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Yt(t,this.predicate,this.thisArg))}}class Yt extends Ot.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const Jt=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var Xt=n("EY2u");function Zt(t){return e=>0===t?Object(Xt.b)():e.lift(new te(t))}class te{constructor(t){if(this.total=t,this.total<0)throw new Jt}call(t,e){return e.subscribe(new ee(t,this.total))}}class ee extends Ot.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function ne(t=null){return e=>e.lift(new re(t))}class re{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new ie(t,this.defaultValue))}}class ie extends Ot.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function oe(t=ue){return e=>e.lift(new se(t))}class se{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new ae(t,this.errorFactory))}}class ae extends Ot.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Hv){t=Hv}this.destination.error(t)}}}function ue(){return new Gt}var ce=n("SpAZ");function le(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Qt((e,n)=>t(e,n,r)):ce.a,Zt(1),n?ne(e):oe(()=>new Gt))}function he(t,e){return e?_t(()=>t,e):_t(()=>t)}var fe=n("tf+s");const de=new r.r("angularfire2.auth.use-emulator"),pe=new r.r("angularfire2.auth.settings"),ge=new r.r("angularfire2.auth.tenant-id"),ye=new r.r("angularfire2.auth.langugage-code"),ve=new r.r("angularfire2.auth.use-device-language"),me=new r.r("angularfire.auth.persistence");let be=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new ht.d(i),f=Object(ht.h)(h),d=new Ft.a,p=Object(pt.a)(void 0).pipe(Object(Ut.b)(h.outsideAngular),_t(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(yt.a)(()=>Object(ht.g)(t,i,e)),Object(yt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(ht.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Kt({bufferSize:1,refCount:!1}));if(R(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(pt.a)(null);else{p.pipe(le()).subscribe();const t=p.pipe(_t(t=>t.getRedirectResult().then(t=>t,()=>null)),f,Kt({bufferSize:1,refCount:!1})),e=t=>new dt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(_t(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(_t(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(he(n),Object(fe.a)(h.outsideAngular),Object(Ut.b)(h.insideAngular)),this.user=t.pipe(he(r),Object(fe.a)(h.outsideAngular),Object(Ut.b)(h.insideAngular)),this.idToken=this.user.pipe(_t(t=>t?Object(mt.a)(t.getIdToken()):Object(pt.a)(null))),this.idTokenResult=this.user.pipe(_t(t=>t?Object(mt.a)(t.getIdTokenResult()):Object(pt.a)(null))),this.credential=Object(gt.a)(t,d,this.authState.pipe(Qt(t=>!t))).pipe(Object(yt.a)(t=>(null==t?void 0:t.user)?t:null),Object(fe.a)(h.outsideAngular),Object(Ut.b)(h.insideAngular))}return Object(ht.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ht.c),r.Rb(ht.b,8),r.Rb(r.C),r.Rb(r.A),r.Rb(de,8),r.Rb(pe,8),r.Rb(ge,8),r.Rb(ye,8),r.Rb(ve,8),r.Rb(me,8))},t.\u0275prov=r.Gb({factory:function(){return new t(r.Rb(ht.c),r.Rb(ht.b,8),r.Rb(r.C),r.Rb(r.A),r.Rb(de,8),r.Rb(pe,8),r.Rb(ge,8),r.Rb(ye,8),r.Rb(ve,8),r.Rb(me,8))},token:t,providedIn:"any"}),t})();Object(ht.e)(be,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var _e=n("Jgta");function we(t){return null==t}function Ce(t){return"function"==typeof t.set}function Oe(t,e){return Ce(e)?e:t.ref(e)}function Se(t,e){if("string"==typeof t)return e.stringCase();if(Ce(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function Te(t,e,n="on",r=ft.b){return new dt.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(yt.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(vt.a)())}function Ee(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Ie(t,e){const{payload:n,prevKey:r,key:i}=e,o=Ee(t,i),s=function(t,e){if(we(e))return 0;{const n=Ee(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function ke(t){return(we(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function xe(t,e,n){return function(t,e,n){return Te(t,"value","once",n).pipe(_t(r=>{const i=[Object(pt.a)(r)];return e.forEach(e=>i.push(Te(t,e,"on",n))),Object(gt.a)(...i).pipe(St(Ie,[]))}),It())}(t,e=ke(e),n)}function je(t,e,n){const r=(e=ke(e)).map(e=>Te(t,e,"on",n));return Object(gt.a)(...r)}function Ae(t,e){return function(n,r){return Se(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function Re(t,e){return function(){return Te(t,"value","on",e)}}const Ne=new r.r("angularfire2.realtimeDatabaseURL"),Pe=new r.r("angularfire2.database.use-emulator");let De=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new ht.d(i),this.keepUnstableUntilFirst=Object(ht.h)(this.schedulers);const a=o,u=Object(ht.g)(t,i,e);!_e.a.auth&&s&&Object(ht.j)(),this.database=Object(ht.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>Oe(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:Ae(r,"update"),set:Ae(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?Se(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>xe(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>je(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return Te(t,"value","on",e).pipe(Object(yt.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Pt(t,n))}}(e),Object(yt.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Lt(r))),Object(yt.a)(t=>t.actions));var r}(t,je(t,e).pipe(St((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>xe(t,r,n).pipe(Object(yt.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>Oe(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>Re(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Re(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(yt.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ht.c),r.Rb(ht.b,8),r.Rb(Ne,8),r.Rb(r.C),r.Rb(r.A),r.Rb(Pe,8),r.Rb(de,8))},t.\u0275prov=r.Gb({factory:function(){return new t(r.Rb(ht.c),r.Rb(ht.b,8),r.Rb(Ne,8),r.Rb(r.C),r.Rb(r.A),r.Rb(Pe,8),r.Rb(de,8))},token:t,providedIn:"any"}),t})(),Le=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[De]}),t})();class Me{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new Fe(t,this.dueTime,this.scheduler))}}class Fe extends Ot.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ue,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Ue(t){t.debouncedNext()}var Ve=n("zIRd"),qe=n("mrSG"),Be=n("qOnz"),He=n("/6Yf"),ze="firebasestorage.googleapis.com",We=function(t){function e(n,r){var i=t.call(this,Ke(n),"Firebase Storage: "+r+" ("+Ke(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return Object(qe.c)(e,t),e.prototype._codeEquals=function(t){return Ke(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(Be.c);function Ke(t){return"storage/"+t}function Ge(){return new We("unknown","An unknown error occurred, please check the error payload for server response.")}function Qe(){return new We("canceled","User canceled the upload/download.")}function $e(){return new We("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ye(t){return new We("invalid-argument",t)}function Je(){return new We("app-deleted","The Firebase app was deleted.")}function Xe(t){return new We("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ze(t,e){return new We("invalid-format","String does not match format '"+t+"': "+e)}function tn(t){throw new We("internal-error","Internal error: "+t)}var en={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},nn=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function rn(t,e){switch(t){case en.RAW:return new nn(on(e));case en.BASE64:case en.BASE64URL:return new nn(sn(t,e));case en.DATA_URL:return new nn((n=new an(e)).base64?sn(en.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(Hv){throw Ze(en.DATA_URL,"Malformed data URL.")}return on(e)}(n.rest),new an(e).contentType)}var n;throw Ge()}function on(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function sn(t,e){switch(t){case en.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Ze(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case en.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Ze(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(Hv){throw Ze(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var an=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Ze(en.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),un={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function cn(t){switch(t){case"running":case"pausing":case"canceling":return un.RUNNING;case"paused":return un.PAUSED;case"success":return un.SUCCESS;case"canceled":return un.CANCELED;case"error":default:return un.ERROR}}var ln=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),hn=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=ln.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=ln.ABORT,e()}),t.xhr_.addEventListener("error",function(){t.errorCode_=ln.NETWORK_ERROR,e()}),t.xhr_.addEventListener("load",function(){e()})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw tn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw tn("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw tn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Hv){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw tn("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),fn=function(){function t(){}return t.prototype.createConnection=function(){return new hn},t}(),dn=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(Hv){return new t(e,"")}if(""===r.path)return r;throw new We("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===ze?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.path];f||(f=""),r=new t(h[l.indices.bucket],f),l.postModify(r);break}}if(null==r)throw function(t){return new We("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),pn=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function gn(t){return"string"==typeof t||t instanceof String}function yn(t){return vn()&&t instanceof Blob}function vn(){return"undefined"!=typeof Blob}function mn(t,e,n,r){if(r<e)throw Ye("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Ye("Invalid value for '"+t+"'. Expected "+n+" or less.")}function bn(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function _n(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var wn=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.connection;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(Hv){o(Hv)}else null!==s?((r=Ge()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?Je():Qe():new We("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Cn(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new Cn(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===ln.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Cn(s,r))}else{var a=r.getErrorCode()===ln.ABORT;e(!1,new Cn(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())},e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(qe.f)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(qe.f)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Cn=function(){return function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}}();function On(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Sn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=On();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(vn())return new Blob(t);throw new We("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Tn=function(){function t(t,e){var n=0,r="";yn(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(yn(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(vn()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(Sn.apply(null,r))}var i=e.map(function(t){return gn(t)?rn(en.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function En(t){var e,n;try{e=JSON.parse(t)}catch(Hv){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function In(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function kn(t,e){return e}var xn=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||kn}}(),jn=null;function An(){if(jn)return jn;var t=[];t.push(new xn("bucket")),t.push(new xn("generation")),t.push(new xn("metageneration")),t.push(new xn("name","fullPath",!0));var e=new xn("name");e.xform=function(t,e){return function(t){return!gn(t)||t.length<2?t:In(t)}(e)},t.push(e);var n=new xn("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new xn("timeCreated")),t.push(new xn("updated")),t.push(new xn("md5Hash",null,!0)),t.push(new xn("cacheControl",null,!0)),t.push(new xn("contentDisposition",null,!0)),t.push(new xn("contentEncoding",null,!0)),t.push(new xn("contentLanguage",null,!0)),t.push(new xn("contentType",null,!0)),t.push(new xn("metadata","customMetadata",!0)),jn=t}function Rn(t,e,n){var r=En(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new dn(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function Nn(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Pn=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function Dn(t){if(!t)throw Ge()}function Ln(t,e){return function(n,r){var i=Rn(t,r,e);return Dn(null!==i),i}}function Mn(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new We("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new We("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new We("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new We("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function Fn(t){var e=Mn(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new We("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Un(t,e,n){var r=bn(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Pn(r,"GET",Ln(t,n),i);return o.errorHandler=Fn(e),o}function Vn(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var qn=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function Bn(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(Hv){Dn(!1)}return Dn(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Hn=262144,zn=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function Wn(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var Kn=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=An(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Vn(e,r,i),a={name:s.fullPath},u=bn(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=Nn(s,n),h=new Pn(u,"POST",function(t){var e;Bn(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(Hv){Dn(!1)}return Dn(gn(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=Mn(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i=function(t,e,n,r){var i=new Pn(n,"POST",function(t){var e=Bn(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Hv){Dn(!1)}n||Dn(!1);var i=Number(n);return Dn(!isNaN(i)),new qn(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=Mn(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=Hn*this._chunkMultiplier,n=new qn(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){var s;try{s=function(t,e,n,r,i,o,s,a){var u=new qn(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new We("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(h,h+l);if(null===d)throw $e();var p=new Pn(n,"POST",function(t,n){var i,s=Bn(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?Ln(e,o)(t,n):null,new qn(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=Mn(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(Hv){return t._error=Hv,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){Hn*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=Un(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Vn(e,r,i),c=Nn(u,n),l=Tn.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw $e();var h={name:u.fullPath},f=bn(o,t.host),d=t.maxUploadRetryTime,p=new Pn(f,"POST",Ln(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=Mn(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Qe(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=cn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new zn(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(cn(this._state)){case un.SUCCESS:Wn(this._resolve.bind(null,this.snapshot))();break;case un.CANCELED:case un.ERROR:Wn(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(cn(this._state)){case un.RUNNING:case un.PAUSED:t.next&&Wn(t.next.bind(t,this.snapshot))();break;case un.SUCCESS:t.complete&&Wn(t.complete.bind(t))();break;case un.CANCELED:case un.ERROR:t.error&&Wn(t.error.bind(t,this._error))();break;default:t.error&&Wn(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Gn=function(){function t(t,e){this._service=t,this._location=e instanceof dn?e:dn.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new dn(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return In(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new dn(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Xe(t)},t}();function Qn(t){var e={prefixes:[],items:[]};return $n(t,e).then(function(){return e})}function $n(t,e,n){return Object(qe.b)(this,void 0,void 0,function(){var r,i,o;return Object(qe.d)(this,function(s){switch(s.label){case 0:return[4,Yn(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,$n(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function Yn(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r;return Object(qe.d)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&mn("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=bn(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new Pn(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=En(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new dn(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new dn(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return Dn(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Mn(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function Jn(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new dn(t._location.bucket,n);return new Gn(t.storage,r)}function Xn(t){return/^[A-Za-z]+:\/\//.test(t)}function Zn(t,e){if(t instanceof nr){var n=t;if(null==n._bucket)throw new We("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Gn(n,n._bucket);return null!=e?Zn(r,e):r}return void 0!==e?Jn(t,e):t}function tr(t,e){if(e&&Xn(e)){if(t instanceof nr)return new Gn(t,e);throw Ye("To use ref(service, url), the first argument must be a Storage instance.")}return Zn(t,e)}function er(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:dn.makeFromBucketSpec(n,t)}var nr=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=ze,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?dn.makeFromBucketSpec(i,this._host):er(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?dn.makeFromBucketSpec(this._url,t):er(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){mn("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){mn("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(qe.b)(this,void 0,void 0,function(){var t,e;return Object(qe.d)(this,function(n){switch(n.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return Object(qe.b)(this,void 0,void 0,function(){var t;return Object(qe.d)(this,function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear()),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Gn(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new pn(Je());var i=function(t,e,n,r,i,o){var s=_n(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new wn(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},t.prototype.makeRequestWithTokens=function(t){return Object(qe.b)(this,void 0,void 0,function(){var e;return Object(qe.d)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},t}();function rr(t,e){return tr(t=Object(Be.o)(t),e)}var ir,or,sr=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),ar=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new sr(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new sr(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new sr(t,i,i._ref))}:{next:e.next?function(t){return e.next(new sr(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),ur=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new cr(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new cr(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),cr=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return Jn(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new ar(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Kn(t,new Tn(e),n)}(t=Object(Be.o)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=en.RAW),this._throwIfRoot("putString");var r=rn(e,t),i=Object(qe.a)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new ar(new Kn(this._delegate,new Tn(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,Qn(t=Object(Be.o)(t))).then(function(t){return new ur(t,e.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return Yn(t=Object(Be.o)(t),e)}(this._delegate,t||void 0).then(function(t){return new ur(t,e.storage)})},t.prototype.getMetadata=function(){return t=this._delegate,function(t){return Object(qe.b)(this,void 0,void 0,function(){var e;return Object(qe.d)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=Un(t.storage,t._location,An()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=Object(Be.o)(t));var t},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n;return Object(qe.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=bn(e.fullServerUrl(),t.host),o=Nn(n,r),s=t.maxOperationRetryTime,a=new Pn(i,"PATCH",Ln(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Fn(e),a}(t.storage,t._location,e,An()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=Object(Be.o)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return t=this._delegate,function(t){return Object(qe.b)(this,void 0,void 0,function(){var e;return Object(qe.d)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=bn(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Pn(r,"GET",function(t,e){return function(n,r){var i=Rn(t,r,e);return Dn(null!==i),function(t,e,n){var r=En(e);if(null===r)return null;if(!gn(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return bn("/b/"+o(t.bucket)+"/o/"+o(r),n)+_n({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=Fn(e),o}(t.storage,t._location,An()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new We("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=Object(Be.o)(t));var t},t.prototype.delete=function(){return this._throwIfRoot("delete"),t=this._delegate,function(t){return Object(qe.b)(this,void 0,void 0,function(){var e;return Object(qe.d)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=bn(e.fullServerUrl(),t.host),r=new Pn(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=Fn(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=Object(Be.o)(t));var t},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Xe(t)},t}(),lr=function(){function t(t,e){this.app=t,this._delegate=e}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Xn(t))throw Ye("ref() expected a child path but got a URL, use refFromURL instead.");return new cr(rr(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Xn(t))throw Ye("refFromURL() expected a full URL but got a child path, use ref() instead.");try{dn.makeFromUrl(t,this._delegate.host)}catch(Hv){throw Ye("refFromUrl() expected a valid full URL but got an invalid one.")}return new cr(rr(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),function(t,e,n,r){void 0===r&&(r={}),t.host="http://"+e+":"+n;var i=r.mockUserToken;i&&(t._overrideAuthToken="string"==typeof i?i:Object(Be.j)(i,t.app.options.projectId))}(t,e,n,r)}(this._delegate,t,e,n)},t}();function hr(t){const e=function(t){return new dt.a(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=ft.a){return n=>n.lift(new Me(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(yt.a)(t=>t.bytesTransferred/t.totalBytes*100))}}function fr(t,e,n){return{getDownloadURL:()=>Object(pt.a)(void 0).pipe(Object(Ut.b)(e.outsideAngular),_t(()=>t.getDownloadURL()),n),getMetadata:()=>Object(pt.a)(void 0).pipe(Object(Ut.b)(e.outsideAngular),_t(()=>t.getMetadata()),n),delete:()=>Object(mt.a)(t.delete()),child:r=>fr(t.child(r),e,n),updateMetadata:e=>Object(mt.a)(t.updateMetadata(e)),put:(e,n)=>hr(t.put(e,n)),putString:(e,n,r)=>hr(t.putString(e,n,r)),listAll:()=>Object(mt.a)(t.listAll())}}or={TaskState:un,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:en,Storage:nr,Reference:cr},(ir=Ve.a).INTERNAL.registerComponent(new He.a("storage",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new lr(r,new nr(r,i,o,new fn,n,Ve.a.SDK_VERSION))},"PUBLIC").setServiceProps(or).setMultipleInstances(!0)),ir.registerVersion("@firebase/storage","0.7.1");const dr=new r.r("angularfire2.storageBucket"),pr=new r.r("angularfire2.storage.maxUploadRetryTime"),gr=new r.r("angularfire2.storage.maxOperationRetryTime");let yr=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new ht.d(i),this.keepUnstableUntilFirst=Object(ht.h)(this.schedulers);const a=Object(ht.g)(t,i,e);this.storage=Object(ht.f)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return fr(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return fr(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return fr(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ht.c),r.Rb(ht.b,8),r.Rb(dr,8),r.Rb(r.C),r.Rb(r.A),r.Rb(pr,8),r.Rb(gr,8))},t.\u0275prov=r.Gb({factory:function(){return new t(r.Rb(ht.c),r.Rb(ht.b,8),r.Rb(dr,8),r.Rb(r.C),r.Rb(r.A),r.Rb(pr,8),r.Rb(gr,8))},token:t,providedIn:"any"}),t})(),vr=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)}}),t})(),mr=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[yr],imports:[vr]}),t})();var br=n("bHdf");function _r(...t){return Object(br.a)(1)(Object(pt.a)(...t))}var wr=n("z+Ro");function Cr(...t){const e=t[t.length-1];return Object(wr.a)(e)?(t.pop(),n=>_r(t,n,e)):e=>_r(t,e)}function Or(){return t=>t.lift(new Sr)}class Sr{call(t,e){return e.subscribe(new Tr(t))}}class Tr extends Ot.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Er=n("q/0M"),Ir=function(t,e){return(Ir=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function kr(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var xr,jr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ar=Ar||{},Rr=jr||self;function Nr(){}function Pr(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Dr(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Lr="closure_uid_"+(1e9*Math.random()>>>0),Mr=0;function Fr(t,e,n){return t.call.apply(t.bind,arguments)}function Ur(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Vr(t,e,n){return(Vr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fr:Ur).apply(null,arguments)}function qr(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Br(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Hr(){this.s=this.s,this.o=this.o}var zr={};Hr.prototype.s=!1,Hr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Lr)&&t[Lr]||(t[Lr]=++Mr)}(this);delete zr[t]}},Hr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Wr=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Kr=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Gr(t){return Array.prototype.concat.apply([],arguments)}function Qr(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function $r(t){return/^[\s\xa0]*$/.test(t)}var Yr,Jr=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Xr(t,e){return-1!=t.indexOf(e)}function Zr(t,e){return t<e?-1:t>e?1:0}t:{var ti=Rr.navigator;if(ti){var ei=ti.userAgent;if(ei){Yr=ei;break t}}Yr=""}function ni(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ri(t){var e={};for(var n in t)e[n]=t[n];return e}var ii="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oi(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ii.length;o++)n=ii[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function si(t){return si[" "](t),t}si[" "]=Nr;var ai,ui,ci=Xr(Yr,"Opera"),li=Xr(Yr,"Trident")||Xr(Yr,"MSIE"),hi=Xr(Yr,"Edge"),fi=hi||li,di=Xr(Yr,"Gecko")&&!(Xr(Yr.toLowerCase(),"webkit")&&!Xr(Yr,"Edge"))&&!(Xr(Yr,"Trident")||Xr(Yr,"MSIE"))&&!Xr(Yr,"Edge"),pi=Xr(Yr.toLowerCase(),"webkit")&&!Xr(Yr,"Edge");function gi(){var t=Rr.document;return t?t.documentMode:void 0}t:{var yi="",vi=(ui=Yr,di?/rv:([^\);]+)(\)|;)/.exec(ui):hi?/Edge\/([\d\.]+)/.exec(ui):li?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ui):pi?/WebKit\/(\S+)/.exec(ui):ci?/(?:Version)[ \/]?(\S+)/.exec(ui):void 0);if(vi&&(yi=vi?vi[1]:""),li){var mi=gi();if(null!=mi&&mi>parseFloat(yi)){ai=String(mi);break t}}ai=yi}var bi={};var _i=Rr.document&&li&&(gi()||parseInt(ai,10))||void 0,wi=function(){if(!Rr.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Rr.addEventListener("test",Nr,e),Rr.removeEventListener("test",Nr,e)}catch(n){}return t}();function Ci(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Oi(t,e){if(Ci.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(di){t:{try{si(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Si[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Oi.Z.h.call(this)}}Ci.prototype.h=function(){this.defaultPrevented=!0},Br(Oi,Ci);var Si={2:"touch",3:"pen",4:"mouse"};Oi.prototype.h=function(){Oi.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ti="closure_listenable_"+(1e6*Math.random()|0),Ei=0;function Ii(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Ei,this.ca=this.fa=!1}function ki(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function xi(t){this.src=t,this.g={},this.h=0}function ji(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Wr(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ki(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Ai(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}xi.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=Ai(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new Ii(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var Ri="closure_lm_"+(1e6*Math.random()|0),Ni={};function Pi(t,e,n,r,i){if(r&&r.once)return Li(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Pi(t,e[o],n,r,i);return null}return n=Hi(n),t&&t[Ti]?t.N(e,n,Dr(r)?!!r.capture:!!r,i):Di(t,e,n,!1,r,i)}function Di(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Dr(i)?!!i.capture:!!i,a=qi(t);if(a||(t[Ri]=a=new xi(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Vi;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)wi||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ui(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Li(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Li(t,e[o],n,r,i);return null}return n=Hi(n),t&&t[Ti]?t.O(e,n,Dr(r)?!!r.capture:!!r,i):Di(t,e,n,!0,r,i)}function Mi(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Mi(t,e[o],n,r,i);else r=Dr(r)?!!r.capture:!!r,n=Hi(n),t&&t[Ti]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Ai(o=t.g[e],n,r,i))&&(ki(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=qi(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ai(e,n,r,i)),(n=-1<t?e[t]:null)&&Fi(n))}function Fi(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Ti])ji(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ui(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=qi(e))?(ji(n,t),0==n.h&&(n.src=null,e[Ri]=null)):ki(t)}}}function Ui(t){return t in Ni?Ni[t]:Ni[t]="on"+t}function Vi(t,e){if(t.ca)t=!0;else{e=new Oi(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Fi(t),t=n.call(r,e)}return t}function qi(t){return(t=t[Ri])instanceof xi?t:null}var Bi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hi(t){return"function"==typeof t?t:(t[Bi]||(t[Bi]=function(e){return t.handleEvent(e)}),t[Bi])}function zi(){Hr.call(this),this.i=new xi(this),this.P=this,this.I=null}function Wi(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Ci(e,t);else if(e instanceof Ci)e.target=e.target||t;else{var i=e;oi(e=new Ci(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Ki(s,r,!0,e)&&i}if(i=Ki(s=e.g=t,r,!0,e)&&i,i=Ki(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ki(s=e.g=n[o],r,!1,e)&&i}function Ki(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&ji(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Br(zi,Hr),zi.prototype[Ti]=!0,zi.prototype.removeEventListener=function(t,e,n,r){Mi(this,t,e,n,r)},zi.prototype.M=function(){if(zi.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)ki(n[r]);delete e.g[t],e.h--}}this.I=null},zi.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},zi.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Gi=Rr.JSON.stringify;function Qi(){var t=no,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var $i,Yi=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Ji.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Ji=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())(function(){return new Xi},function(t){return t.reset()}),Xi=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Zi(t){Rr.setTimeout(function(){throw t},0)}function to(t,e){$i||function(){var t=Rr.Promise.resolve(void 0);$i=function(){t.then(ro)}}(),eo||($i(),eo=!0),no.add(t,e)}var eo=!1,no=new Yi;function ro(){for(var t;t=Qi();){try{t.h.call(t.g)}catch(n){Zi(n)}var e=Ji;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}eo=!1}function io(t,e){zi.call(this),this.h=t||1,this.g=e||Rr,this.j=Vr(this.kb,this),this.l=Date.now()}function oo(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function so(t,e,n){if("function"==typeof t)n&&(t=Vr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Vr(t.handleEvent,t)}return 2147483647<Number(e)?-1:Rr.setTimeout(t,e||0)}function ao(t){t.g=so(function(){t.g=null,t.i&&(t.i=!1,ao(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Br(io,zi),(xr=io.prototype).da=!1,xr.S=null,xr.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Wi(this,"tick"),this.da&&(oo(this),this.start()))}},xr.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},xr.M=function(){io.Z.M.call(this),oo(this),delete this.g};var uo=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Ir(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:ao(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Rr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Hr);function co(t){Hr.call(this),this.h=t,this.g={}}Br(co,Hr);var lo=[];function ho(t,e,n,r){Array.isArray(n)||(n&&(lo[0]=n.toString()),n=lo);for(var i=0;i<n.length;i++){var o=Pi(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function fo(t){ni(t.g,function(t,e){this.g.hasOwnProperty(e)&&Fi(t)},t),t.g={}}function po(){this.g=!0}function go(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Gi(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}co.prototype.M=function(){co.Z.M.call(this),fo(this)},co.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},po.prototype.Aa=function(){this.g=!1},po.prototype.info=function(){};var yo={},vo=null;function mo(){return vo=vo||new zi}function bo(t){Ci.call(this,yo.Ma,t)}function _o(t){var e=mo();Wi(e,new bo(e,t))}function wo(t,e){Ci.call(this,yo.STAT_EVENT,t),this.stat=e}function Co(t){var e=mo();Wi(e,new wo(e,t))}function Oo(t,e){Ci.call(this,yo.Na,t),this.size=e}function So(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Rr.setTimeout(function(){t()},e)}yo.Ma="serverreachability",Br(bo,Ci),yo.STAT_EVENT="statevent",Br(wo,Ci),yo.Na="timingevent",Br(Oo,Ci);var To={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Eo={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Io(){}function ko(){}Io.prototype.h=null;var xo,jo={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ao(){Ci.call(this,"d")}function Ro(){Ci.call(this,"c")}function No(){}function Po(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new co(this),this.P=Lo,this.W=new io(t=fi?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Do}function Do(){this.i=null,this.g="",this.h=!1}Br(Ao,Ci),Br(Ro,Ci),Br(No,Io),No.prototype.g=function(){return new XMLHttpRequest},No.prototype.i=function(){return{}},xo=new No;var Lo=45e3,Mo={},Fo={};function Uo(t,e,n){t.K=1,t.v=us(ns(e)),t.s=n,t.U=!0,Vo(t,null)}function Vo(t,e){t.F=Date.now(),zo(t),t.A=ns(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),ws(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Do,t.g=Ca(t.l,n?e:null,!t.s),0<t.O&&(t.L=new uo(Vr(t.Ia,t,t.g),t.O)),ho(t.V,t.g,"readystatechange",t.gb),e=t.H?ri(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),_o(1),function(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.u,t.A,t.m,t.X,t.s)}function qo(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Bo(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Ho(t,n))==Fo){4==e&&(t.o=4,Co(14),i=!1),go(t.j,t.m,null,"[Incomplete Response]");break}if(r==Mo){t.o=4,Co(15),go(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}go(t.j,t.m,r,null),$o(t,r)}qo(t)&&r!=Fo&&r!=Mo&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Co(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),pa(e),e.L=!0,Co(11))):(go(t.j,t.m,n,"[Invalid Chunked Response]"),Qo(t),Go(t))}function Ho(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Fo:(n=Number(e.substring(n,r)),isNaN(n)?Mo:(r+=1)+n>e.length?Fo:(e=e.substr(r,n),t.C=r+n,e))}function zo(t){t.Y=Date.now()+t.P,Wo(t,t.P)}function Wo(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=So(Vr(t.eb,t),e)}function Ko(t){t.B&&(Rr.clearTimeout(t.B),t.B=null)}function Go(t){0==t.l.G||t.I||va(t.l,t)}function Qo(t){Ko(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,oo(t.W),fo(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function $o(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||ks(n.i,t)))if(n.I=t.N,!t.J&&ks(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;ya(n),oa(n)}da(n),Co(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=So(Vr(n.ab,n),6e3));if(1>=Is(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else ba(n,11)}else if((t.J||n.g==t)&&ya(n),!$r(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Xr(l,"spdy")||Xr(l,"quic")||Xr(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(xs(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,as(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=wa(r,r.H?r.la:null,r.W),d.J){js(r.i,d);var p=d,g=r.K;g&&p.setTimeout(g),p.B&&(Ko(p),zo(p)),r.g=d}else fa(r);0<n.l.length&&ua(n)}else"stop"!=o[0]&&"close"!=o[0]||ba(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?ba(n,7):ia(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}_o(4)}catch(o){}}function Yo(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Pr(t)||"string"==typeof t)Kr(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Pr(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Pr(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Jo(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Jo)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Xo(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Zo(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Zo(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Zo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(xr=Po.prototype).setTimeout=function(t){this.P=t},xr.gb=function(t){t=t.target;var e=this.L;e&&3==Zs(t)?e.l():this.Ia(t)},xr.Ia=function(t){try{if(t==this.g)t:{var e=Zs(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||fi||this.g&&(this.h.h||this.g.ga()||ta(this.g)))){this.I||4!=e||7==n||_o(8==n||0>=r?3:2),Ko(this);var i=this.g.ba();this.N=i;e:if(qo(this)){var o=ta(this.g);t="";var s=o.length,a=4==Zs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Qo(this),Go(this);var u="";break e}this.h.i=new Rr.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$r(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,Co(12),Qo(this),Go(this);break t}go(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,$o(this,i)}this.U?(Bo(this,e,u),fi&&this.i&&3==e&&(ho(this.V,this.W,"tick",this.fb),this.W.start())):(go(this.j,this.m,u,null),$o(this,u)),4==e&&Qo(this),this.i&&!this.I&&(4==e?va(this.l,this):(this.i=!1,zo(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Co(12)):(this.o=0,Co(13)),Qo(this),Go(this)}}}catch(e){}},xr.fb=function(){if(this.g){var t=Zs(this.g),e=this.g.ga();this.C<e.length&&(Ko(this),Bo(this,t,e),this.i&&4!=t&&zo(this))}},xr.cancel=function(){this.I=!0,Qo(this)},xr.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(_o(3),Co(17)),Qo(this),this.o=2,Go(this)):Wo(this,this.Y-t)},(xr=Jo.prototype).R=function(){Xo(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},xr.T=function(){return Xo(this),this.g.concat()},xr.get=function(t,e){return Zo(this.h,t)?this.h[t]:e},xr.set=function(t,e){Zo(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},xr.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ts=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function es(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof es){this.g=void 0!==e?e:t.g,rs(this,t.j),this.s=t.s,is(this,t.i),os(this,t.m),this.l=t.l,e=t.h;var n=new vs;n.i=e.i,e.g&&(n.g=new Jo(e.g),n.h=e.h),ss(this,n),this.o=t.o}else t&&(n=String(t).match(ts))?(this.g=!!e,rs(this,n[1]||"",!0),this.s=cs(n[2]||""),is(this,n[3]||"",!0),os(this,n[4]),this.l=cs(n[5]||"",!0),ss(this,n[6]||"",!0),this.o=cs(n[7]||"")):(this.g=!!e,this.h=new vs(null,this.g))}function ns(t){return new es(t)}function rs(t,e,n){t.j=n?cs(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function is(t,e,n){t.i=n?cs(e,!0):e}function os(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ss(t,e,n){e instanceof vs?(t.h=e,function(t,e){e&&!t.j&&(ms(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(bs(this,e),ws(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=ls(e,gs)),t.h=new vs(e,t.g))}function as(t,e,n){t.h.set(e,n)}function us(t){return as(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function cs(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ls(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,hs),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function hs(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}es.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ls(e,fs,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(ls(e,fs,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(ls(n,"/"==n.charAt(0)?ps:ds,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ls(n,ys)),t.join("")};var fs=/[#\/\?@]/g,ds=/[#\?:]/g,ps=/[#\?]/g,gs=/[#\?@]/g,ys=/#/g;function vs(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ms(t){t.g||(t.g=new Jo,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function bs(t,e){ms(t),e=Cs(t,e),Zo(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Zo((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Xo(t)))}function _s(t,e){return ms(t),e=Cs(t,e),Zo(t.g.h,e)}function ws(t,e,n){bs(t,e),0<n.length&&(t.i=null,t.g.set(Cs(t,e),Qr(n)),t.h+=n.length)}function Cs(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(xr=vs.prototype).add=function(t,e){ms(this),this.i=null,t=Cs(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},xr.forEach=function(t,e){ms(this),this.g.forEach(function(n,r){Kr(n,function(n){t.call(e,n,r,this)},this)},this)},xr.T=function(){ms(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},xr.R=function(t){ms(this);var e=[];if("string"==typeof t)_s(this,t)&&(e=Gr(e,this.g.get(Cs(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Gr(e,t[n])}return e},xr.set=function(t,e){return ms(this),this.i=null,_s(this,t=Cs(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},xr.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},xr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var Os=function(){return function(t,e){this.h=t,this.g=e}}();function Ss(t){this.l=t||Ts,t=Rr.PerformanceNavigationTiming?0<(t=Rr.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Rr.g&&Rr.g.Ea&&Rr.g.Ea()&&Rr.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ts=10;function Es(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Is(t){return t.h?1:t.g?t.g.size:0}function ks(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function xs(t,e){t.g?t.g.add(e):t.h=e}function js(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function As(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=kr(t.g.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.D)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Qr(t.i)}function Rs(){}function Ns(){this.g=new Rs}function Ps(t,e,n){var r=n||"";try{Yo(t,function(t,n){var i=t;Dr(t)&&(i=Gi(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Hv){throw e.push(r+"type="+encodeURIComponent("_badmap")),Hv}}function Ds(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Ls(t){this.l=t.$b||null,this.j=t.ib||!1}function Ms(t,e){zi.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Fs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ss.prototype.cancel=function(){var t,e;if(this.i=As(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=kr(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Rs.prototype.stringify=function(t){return Rr.JSON.stringify(t,void 0)},Rs.prototype.parse=function(t){return Rr.JSON.parse(t,void 0)},Br(Ls,Io),Ls.prototype.g=function(){return new Ms(this.l,this.j)},Ls.prototype.i=function(t){return function(){return t}}({}),Br(Ms,zi);var Fs=0;function Us(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Vs(t){t.readyState=4,t.l=null,t.j=null,t.A=null,qs(t)}function qs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(xr=Ms.prototype).open=function(t,e){if(this.readyState!=Fs)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,qs(this)},xr.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Rr).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},xr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vs(this)),this.readyState=Fs},xr.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,qs(this)),this.g&&(this.readyState=3,qs(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Rr.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Us(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},xr.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Vs(this):qs(this),3==this.readyState&&Us(this)}},xr.Ua=function(t){this.g&&(this.response=this.responseText=t,Vs(this))},xr.Ta=function(t){this.g&&(this.response=t,Vs(this))},xr.ha=function(){this.g&&Vs(this)},xr.setRequestHeader=function(t,e){this.v.append(t,e)},xr.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},xr.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Ms.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Bs=Rr.JSON.parse;function Hs(t){zi.call(this),this.headers=new Jo,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zs,this.K=this.L=!1}Br(Hs,zi);var zs="",Ws=/^https?$/i,Ks=["POST","PUT"];function Gs(t){return"content-type"==t.toLowerCase()}function Qs(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,$s(t),Js(t)}function $s(t){t.D||(t.D=!0,Wi(t,"complete"),Wi(t,"error"))}function Ys(t){if(t.h&&void 0!==Ar&&(!t.C[1]||4!=Zs(t)||2!=t.ba()))if(t.v&&4==Zs(t))so(t.Fa,0,t);else if(Wi(t,"readystatechange"),4==Zs(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(ts)[1]||null;if(!o&&Rr.self&&Rr.self.location){var s=Rr.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ws.test(o?o.toLowerCase():"")}e=i}if(e)Wi(t,"complete"),Wi(t,"success");else{t.m=6;try{var a=2<Zs(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",$s(t)}}finally{Js(t)}}}function Js(t,e){if(t.g){Xs(t);var n=t.g,r=t.C[0]?Nr:null;t.g=null,t.C=null,e||Wi(t,"ready");try{n.onreadystatechange=r}catch(Hv){}}}function Xs(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Rr.clearTimeout(t.A),t.A=null)}function Zs(t){return t.g?t.g.readyState:0}function ta(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case zs:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ea(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ni(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):as(t,e,n))}function na(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ra(t){this.za=0,this.l=[],this.h=new po,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=na("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=na("baseRetryDelayMs",5e3,t),this.$a=na("retryDelaySeedMs",1e4,t),this.Ya=na("forwardChannelMaxRetries",2,t),this.ra=na("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Ss(t&&t.concurrentRequestLimit),this.Ca=new Ns,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function ia(t){if(sa(t),3==t.G){var e=t.V++,n=ns(t.F);as(n,"SID",t.J),as(n,"RID",e),as(n,"TYPE","terminate"),la(t,n),(e=new Po(t,t.h,e,void 0)).K=2,e.v=us(ns(n)),n=!1,Rr.navigator&&Rr.navigator.sendBeacon&&(n=Rr.navigator.sendBeacon(e.v.toString(),"")),!n&&Rr.Image&&((new Image).src=e.v,n=!0),n||(e.g=Ca(e.l,null),e.g.ea(e.v)),e.F=Date.now(),zo(e)}_a(t)}function oa(t){t.g&&(pa(t),t.g.cancel(),t.g=null)}function sa(t){oa(t),t.u&&(Rr.clearTimeout(t.u),t.u=null),ya(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Rr.clearTimeout(t.m),t.m=null)}function aa(t,e){t.l.push(new Os(t.Za++,e)),3==t.G&&ua(t)}function ua(t){Es(t.i)||t.m||(t.m=!0,to(t.Ha,t),t.C=0)}function ca(t,e){var n;n=e?e.m:t.V++;var r=ns(t.F);as(r,"SID",t.J),as(r,"RID",n),as(r,"AID",t.U),la(t,r),t.o&&t.s&&ea(r,t.o,t.s),n=new Po(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=ha(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),xs(t.i,n),Uo(n,r,e)}function la(t,e){t.j&&Yo({},function(t,n){as(e,n,t)})}function ha(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Vr(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].h)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{Ps(l,s,"req"+c+"_")}catch(tu){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function fa(t){t.g||t.u||(t.Y=1,to(t.Ga,t),t.A=0)}function da(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=So(Vr(t.Ga,t),ma(t,t.A)),t.A++,0))}function pa(t){null!=t.B&&(Rr.clearTimeout(t.B),t.B=null)}function ga(t){t.g=new Po(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=ns(t.oa);as(e,"RID","rpc"),as(e,"SID",t.J),as(e,"CI",t.N?"0":"1"),as(e,"AID",t.U),la(t,e),as(e,"TYPE","xmlhttp"),t.o&&t.s&&ea(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=us(ns(e)),n.s=null,n.U=!0,Vo(n,t)}function ya(t){null!=t.v&&(Rr.clearTimeout(t.v),t.v=null)}function va(t,e){var n=null;if(t.g==e){ya(t),pa(t),t.g=null;var r=2}else{if(!ks(t.i,e))return;n=e.D,js(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Wi(r=mo(),new Oo(r,n,e,i)),ua(t)}else fa(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Is(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=So(Vr(t.Ha,t,e),ma(t,t.C)),t.C++,0)))}(t,e)||2==r&&da(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ba(t,5);break;case 4:ba(t,10);break;case 3:ba(t,6);break;default:ba(t,2)}}function ma(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function ba(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Vr(t.jb,t);n||(n=new es("//www.google.com/images/cleardot.gif"),Rr.location&&"http"==Rr.location.protocol||rs(n,"https"),us(n)),function(t,e){var n=new po;if(Rr.Image){var r=new Image;r.onload=qr(Ds,n,r,"TestLoadImage: loaded",!0,e),r.onerror=qr(Ds,n,r,"TestLoadImage: error",!1,e),r.onabort=qr(Ds,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=qr(Ds,n,r,"TestLoadImage: timeout",!1,e),Rr.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Co(2);t.G=0,t.j&&t.j.va(e),_a(t),sa(t)}function _a(t){t.G=0,t.I=-1,t.j&&(0==As(t.i).length&&0==t.l.length||(t.i.i.length=0,Qr(t.l),t.l.length=0),t.j.ua())}function wa(t,e,n){var r=function(t){return t instanceof es?ns(t):new es(t,void 0)}(n);if(""!=r.i)e&&is(r,e+"."+r.i),os(r,r.m);else{var i=Rr.location;r=function(t,e,n,r){var i=new es(null,void 0);return t&&rs(i,t),e&&is(i,e),n&&os(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&ni(t.aa,function(t,e){as(r,e,t)}),n=t.sa,(e=t.D)&&n&&as(r,e,n),as(r,"VER",t.ma),la(t,r),r}function Ca(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Hs(n&&t.Ba&&!t.qa?new Ls({ib:!0}):t.qa)).L=t.H,e}function Oa(){}function Sa(){if(li&&!(10<=Number(_i)))throw Error("Environmental error: no available transport.")}function Ta(t,e){zi.call(this),this.g=new ra(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!$r(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$r(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new ka(this)}function Ea(t){Ao.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Ia(){Ro.call(this),this.status=1}function ka(t){this.g=t}(xr=Hs.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():xo.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:xo),this.g.onreadystatechange=Vr(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Qs(this,o)}t=n||"";var i=new Jo(this.headers);r&&Yo(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Gs,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Rr.FormData&&t instanceof Rr.FormData,!(0<=Wr(Ks,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Xs(this),0<this.B&&((this.K=function(t){return li&&function(){return t=bi,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=Jr(String(ai)).split("."),n=Jr("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=Zr(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Zr(0==o[2].length,0==s[2].length)||Zr(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vr(this.pa,this)):this.A=so(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Qs(this,o)}},xr.pa=function(){void 0!==Ar&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wi(this,"timeout"),this.abort(8))},xr.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Wi(this,"complete"),Wi(this,"abort"),Js(this))},xr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Js(this,!0)),Hs.Z.M.call(this)},xr.Fa=function(){this.s||(this.F||this.v||this.l?Ys(this):this.cb())},xr.cb=function(){Ys(this)},xr.ba=function(){try{return 2<Zs(this)?this.g.status:-1}catch(ui){return-1}},xr.ga=function(){try{return this.g?this.g.responseText:""}catch(ui){return""}},xr.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Bs(e)}},xr.Da=function(){return this.m},xr.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(xr=ra.prototype).ma=8,xr.G=1,xr.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},xr.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Po(this,this.h,t,void 0),n=this.s;if(this.P&&(n?oi(n=ri(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=ha(this,e,r),as(i=ns(this.F),"RID",t),as(i,"CVER",22),this.D&&as(i,"X-HTTP-Session-Id",this.D),la(this,i),this.o&&n&&ea(i,this.o,n),xs(this.i,e),this.Ra&&as(i,"TYPE","init"),this.ja?(as(i,"$req",r),as(i,"SID","null"),e.$=!0,Uo(e,i,null)):Uo(e,i,r),this.G=2}}else 3==this.G&&(t?ca(this,t):0==this.l.length||Es(this.i)||ca(this))},xr.Ga=function(){if(this.u=null,ga(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=So(Vr(this.bb,this),t)}},xr.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Co(10),oa(this),ga(this))},xr.ab=function(){null!=this.v&&(this.v=null,oa(this),da(this),Co(19))},xr.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Co(2)):(this.h.info("Failed to ping google.com"),Co(1))},(xr=Oa.prototype).xa=function(){},xr.wa=function(){},xr.va=function(){},xr.ua=function(){},xr.Oa=function(){},Sa.prototype.g=function(t,e){return new Ta(t,e)},Br(Ta,zi),Ta.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),to(Vr(t.hb,t,e))),Co(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=wa(t,null,t.W),ua(t)},Ta.prototype.close=function(){ia(this.g)},Ta.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,aa(this.g,e)}else this.v?((e={}).__data__=Gi(t),aa(this.g,e)):aa(this.g,t)},Ta.prototype.M=function(){this.g.j=null,delete this.j,ia(this.g),delete this.g,Ta.Z.M.call(this)},Br(Ea,Ao),Br(Ia,Ro),Br(ka,Oa),ka.prototype.xa=function(){Wi(this.g,"a")},ka.prototype.wa=function(t){Wi(this.g,new Ea(t))},ka.prototype.va=function(t){Wi(this.g,new Ia(t))},ka.prototype.ua=function(){Wi(this.g,"b")},Sa.prototype.createWebChannel=Sa.prototype.g,Ta.prototype.send=Ta.prototype.u,Ta.prototype.open=Ta.prototype.m,Ta.prototype.close=Ta.prototype.close,To.NO_ERROR=0,To.TIMEOUT=8,To.HTTP_ERROR=6,Eo.COMPLETE="complete",ko.EventType=jo,jo.OPEN="a",jo.CLOSE="b",jo.ERROR="c",jo.MESSAGE="d",zi.prototype.listen=zi.prototype.N,Hs.prototype.listenOnce=Hs.prototype.O,Hs.prototype.getLastError=Hs.prototype.La,Hs.prototype.getLastErrorCode=Hs.prototype.Da,Hs.prototype.getStatus=Hs.prototype.ba,Hs.prototype.getResponseJson=Hs.prototype.Qa,Hs.prototype.getResponseText=Hs.prototype.ga,Hs.prototype.send=Hs.prototype.ea;var xa=To,ja=Eo,Aa=yo,Ra=Ls,Na=ko,Pa=Hs,Da=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Da.o=-1;var La={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ma=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(qe.c)(e,t),e}(Error),Fa=new Er.b("@firebase/firestore");function Ua(){return Fa.logLevel}function Va(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fa.logLevel<=Er.a.DEBUG){var r=e.map(Ha);Fa.debug.apply(Fa,Object(qe.f)(["Firestore (8.10.1): "+t],r))}}function qa(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fa.logLevel<=Er.a.ERROR){var r=e.map(Ha);Fa.error.apply(Fa,Object(qe.f)(["Firestore (8.10.1): "+t],r))}}function Ba(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fa.logLevel<=Er.a.WARN){var r=e.map(Ha);Fa.warn.apply(Fa,Object(qe.f)(["Firestore (8.10.1): "+t],r))}}function Ha(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Hv){return t}}function za(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+t;throw qa(e),new Error(e)}function Wa(t,e){t||za()}function Ka(t,e){return t}function Ga(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Qa=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Ga(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function $a(t,e){return t<e?-1:t>e?1:0}function Ya(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Ja(t){return t+"\0"}var Xa=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ma(La.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ma(La.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ma(La.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ma(La.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?$a(this.nanoseconds,t.nanoseconds):$a(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Za=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Xa(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function tu(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function eu(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nu(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ru=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&za(),void 0===n?n=t.length-e:n>t.length-e&&za(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),iu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qe.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Ma(La.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(ru),ou=/^[_a-zA-Z][_a-zA-Z0-9]*$/,su=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qe.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ou.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ma(La.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Ma(La.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ma(La.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ma(La.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(ru),au=function(){function t(t){this.fields=t,t.sort(su.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Ya(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),uu=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return $a(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();uu.EMPTY_BYTE_STRING=new uu("");var cu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lu(t){if(Wa(!!t),"string"==typeof t){var e=0,n=cu.exec(t);if(Wa(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:hu(t.seconds),nanos:hu(t.nanos)}}function hu(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function fu(t){return"string"==typeof t?uu.fromBase64String(t):uu.fromUint8Array(t)}function du(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function pu(t){var e=t.mapValue.fields.__previous_value__;return du(e)?pu(e):e}function gu(t){var e=lu(t.mapValue.fields.__local_write_time__.timestampValue);return new Xa(e.seconds,e.nanos)}function yu(t){return null==t}function vu(t){return 0===t&&1/t==-1/0}function mu(t){return"number"==typeof t&&Number.isInteger(t)&&!vu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var bu=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(iu.fromString(e))},t.fromName=function(e){return new t(iu.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===iu.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return iu.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new iu(e.slice()))},t}();function _u(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?du(t)?4:10:za()}function wu(t,e){var n=_u(t);if(n!==_u(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gu(t).isEqual(gu(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=lu(t.timestampValue),r=lu(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return fu(t.bytesValue).isEqual(fu(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return hu(t.geoPointValue.latitude)===hu(e.geoPointValue.latitude)&&hu(t.geoPointValue.longitude)===hu(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return hu(t.integerValue)===hu(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=hu(t.doubleValue),r=hu(e.doubleValue);return n===r?vu(n)===vu(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ya(t.arrayValue.values||[],e.arrayValue.values||[],wu);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(tu(n)!==tu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!wu(n[i],r[i])))return!1;return!0}(t,e);default:return za()}}function Cu(t,e){return void 0!==(t.values||[]).find(function(t){return wu(t,e)})}function Ou(t,e){var n=_u(t),r=_u(e);if(n!==r)return $a(n,r);switch(n){case 0:return 0;case 1:return $a(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=hu(t.integerValue||t.doubleValue),r=hu(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Su(t.timestampValue,e.timestampValue);case 4:return Su(gu(t),gu(e));case 5:return $a(t.stringValue,e.stringValue);case 6:return function(t,e){var n=fu(t),r=fu(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=$a(n[i],r[i]);if(0!==o)return o}return $a(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=$a(hu(t.latitude),hu(e.latitude));return 0!==n?n:$a(hu(t.longitude),hu(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ou(n[i],r[i]);if(o)return o}return $a(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=$a(r[s],o[s]);if(0!==a)return a;var u=Ou(n[r[s]],i[o[s]]);if(0!==u)return u}return $a(r.length,o.length)}(t.mapValue,e.mapValue);default:throw za()}}function Su(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return $a(t,e);var n=lu(t),r=lu(e),i=$a(n.seconds,r.seconds);return 0!==i?i:$a(n.nanos,r.nanos)}function Tu(t){return Eu(t)}function Eu(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=lu(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?fu(t.bytesValue).toBase64():"referenceValue"in t?bu.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Eu(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Eu(t.fields[o])}return e+"}"}(t.mapValue):za();var e}function Iu(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function ku(t){return!!t&&"integerValue"in t}function xu(t){return!!t&&"arrayValue"in t}function ju(t){return!!t&&"nullValue"in t}function Au(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ru(t){return!!t&&"mapValue"in t}function Nu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return eu(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=Nu(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Nu(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Pu=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Ru(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Nu(e)},t.prototype.setAll=function(t){var e=this,n=su.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Nu(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Ru(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return wu(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Ru(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){eu(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(Nu(this.value))},t}();function Du(t){var e=[];return eu(t.fields,function(t,n){var r=new su([t]);if(Ru(n)){var i=Du(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new au(e)}var Lu=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Za.min(),Pu.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Pu.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Pu.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Pu.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Pu.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Mu=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Fu(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Mu(t,e,n,r,i,o,s)}function Uu(t){var e=Ka(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Tu(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),yu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Xu(e.startAt)),e.endAt&&(n+="|ub:",n+=Xu(e.endAt)),e.h=n}return e.h}function Vu(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!tc(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!wu(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nc(t.startAt,e.startAt)&&nc(t.endAt,e.endAt)}function qu(t){return bu.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Bu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(qe.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Hu(t,n,r):"array-contains"===n?new Gu(t,r):"in"===n?new Qu(t,r):"not-in"===n?new $u(t,r):"array-contains-any"===n?new Yu(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new zu(t,n):new Wu(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Ou(e,this.value)):null!==e&&_u(this.value)===_u(e)&&this.m(Ou(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return za()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Hu=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=bu.fromName(r.referenceValue),i}return Object(qe.c)(e,t),e.prototype.matches=function(t){var e=bu.comparator(t.key,this.key);return this.m(e)},e}(Bu),zu=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ku(0,n),r}return Object(qe.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Bu),Wu=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ku(0,n),r}return Object(qe.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Bu);function Ku(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return bu.fromName(t.referenceValue)})}var Gu=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(qe.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return xu(e)&&Cu(e.arrayValue,this.value)},e}(Bu),Qu=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(qe.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Cu(this.value.arrayValue,e)},e}(Bu),$u=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(qe.c)(e,t),e.prototype.matches=function(t){if(Cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Cu(this.value.arrayValue,e)},e}(Bu),Yu=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(qe.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!xu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Cu(e.value.arrayValue,t)})},e}(Bu),Ju=function(t,e){this.position=t,this.before=e};function Xu(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Tu(t)}).join(",")}var Zu=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function tc(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ec(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?bu.comparator(bu.fromName(s.referenceValue),n.key):Ou(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function nc(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!wu(t.position[n],e.position[n]))return!1;return!0}var rc=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function ic(t,e,n,r,i,o,s,a){return new rc(t,e,n,r,i,o,s,a)}function oc(t){return new rc(t)}function sc(t){return!yu(t.limit)&&"F"===t.limitType}function ac(t){return!yu(t.limit)&&"L"===t.limitType}function uc(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function cc(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function lc(t){return null!==t.collectionGroup}function hc(t){var e=Ka(t);if(null===e.p){e.p=[];var n=cc(e),r=uc(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Zu(n)),e.p.push(new Zu(su.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Zu(su.keyField(),u))}}}return e.p}function fc(t){var e=Ka(t);if(!e.T)if("F"===e.limitType)e.T=Fu(e.path,e.collectionGroup,hc(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=hc(e);r<i.length;r++){var o=i[r];n.push(new Zu(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Ju(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Ju(e.startAt.position,!e.startAt.before):null;e.T=Fu(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function dc(t,e,n){return new rc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pc(t,e){return Vu(fc(t),fc(e))&&t.limitType===e.limitType}function gc(t){return Uu(fc(t))+"|lt:"+t.limitType}function yc(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Tu(e.value);var e}).join(", ")+"]"),yu(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Xu(t.startAt)),t.endAt&&(e+=", endAt: "+Xu(t.endAt)),"Target("+e+")"}(fc(t))+"; limitType="+t.limitType+")"}function vc(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):bu.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ec(t.startAt,hc(t),e)||t.endAt&&ec(t.endAt,hc(t),e))}(t,e)}function mc(t){return function(e,n){for(var r=!1,i=0,o=hc(t);i<o.length;i++){var s=o[i],a=bc(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function bc(t,e,n){var r=t.field.isKeyField()?bu.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Ou(r,i):za()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return za()}}function _c(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vu(e)?"-0":e}}function wc(t){return{integerValue:""+t}}function Cc(t,e){return mu(e)?wc(e):_c(t,e)}var Oc=function(){this._=void 0};function Sc(t,e,n){return t instanceof Ic?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof kc?xc(t,e):t instanceof jc?Ac(t,e):function(t,e){var n=Ec(t,e),r=Nc(n)+Nc(t.A);return ku(n)&&ku(t.A)?wc(r):_c(t.R,r)}(t,e)}function Tc(t,e,n){return t instanceof kc?xc(t,e):t instanceof jc?Ac(t,e):n}function Ec(t,e){return t instanceof Rc?ku(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ic=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qe.c)(e,t),e}(Oc),kc=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(qe.c)(e,t),e}(Oc);function xc(t,e){for(var n=Pc(e),r=function(t){n.some(function(e){return wu(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var jc=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(qe.c)(e,t),e}(Oc);function Ac(t,e){for(var n=Pc(e),r=function(t){n=n.filter(function(e){return!wu(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Rc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(qe.c)(e,t),e}(Oc);function Nc(t){return hu(t.integerValue||t.doubleValue)}function Pc(t){return xu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Dc=function(t,e){this.field=t,this.transform=e},Lc=function(t,e){this.version=t,this.transformResults=e},Mc=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Fc(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Uc=function(){};function Vc(t,e,n){t instanceof Wc?function(t,e,n){var r=t.value.clone(),i=Qc(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Kc?function(t,e,n){if(Fc(t.precondition,e)){var r=Qc(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Gc(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function qc(t,e,n){t instanceof Wc?function(t,e,n){if(Fc(t.precondition,e)){var r=t.value.clone(),i=$c(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(zc(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Kc?function(t,e,n){if(Fc(t.precondition,e)){var r=$c(t.fieldTransforms,n,e),i=e.data;i.setAll(Gc(t)),i.setAll(r),e.convertToFoundDocument(zc(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Fc(t.precondition,e)&&e.convertToNoDocument(Za.min())}(t,e)}function Bc(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Ec(o.transform,s||null);null!=a&&(null==n&&(n=Pu.empty()),n.set(o.field,a))}return n||null}function Hc(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Ya(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof kc&&e instanceof kc||t instanceof jc&&e instanceof jc?Ya(t.elements,e.elements,wu):t instanceof Rc&&e instanceof Rc?wu(t.A,e.A):t instanceof Ic&&e instanceof Ic}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function zc(t){return t.isFoundDocument()?t.version:Za.min()}var Wc=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(qe.c)(e,t),e}(Uc),Kc=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(qe.c)(e,t),e}(Uc);function Gc(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Qc(t,e,n){var r=new Map;Wa(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Tc(s,a,n[i]))}return r}function $c(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Sc(a,u,e))}return r}var Yc,Jc,Xc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(qe.c)(e,t),e}(Uc),Zc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(qe.c)(e,t),e}(Uc),tl=function(t){this.count=t};function el(t){switch(t){case La.OK:return za();case La.CANCELLED:case La.UNKNOWN:case La.DEADLINE_EXCEEDED:case La.RESOURCE_EXHAUSTED:case La.INTERNAL:case La.UNAVAILABLE:case La.UNAUTHENTICATED:return!1;case La.INVALID_ARGUMENT:case La.NOT_FOUND:case La.ALREADY_EXISTS:case La.PERMISSION_DENIED:case La.FAILED_PRECONDITION:case La.ABORTED:case La.OUT_OF_RANGE:case La.UNIMPLEMENTED:case La.DATA_LOSS:return!0;default:return za()}}function nl(t){if(void 0===t)return qa("GRPC error has no .code"),La.UNKNOWN;switch(t){case Yc.OK:return La.OK;case Yc.CANCELLED:return La.CANCELLED;case Yc.UNKNOWN:return La.UNKNOWN;case Yc.DEADLINE_EXCEEDED:return La.DEADLINE_EXCEEDED;case Yc.RESOURCE_EXHAUSTED:return La.RESOURCE_EXHAUSTED;case Yc.INTERNAL:return La.INTERNAL;case Yc.UNAVAILABLE:return La.UNAVAILABLE;case Yc.UNAUTHENTICATED:return La.UNAUTHENTICATED;case Yc.INVALID_ARGUMENT:return La.INVALID_ARGUMENT;case Yc.NOT_FOUND:return La.NOT_FOUND;case Yc.ALREADY_EXISTS:return La.ALREADY_EXISTS;case Yc.PERMISSION_DENIED:return La.PERMISSION_DENIED;case Yc.FAILED_PRECONDITION:return La.FAILED_PRECONDITION;case Yc.ABORTED:return La.ABORTED;case Yc.OUT_OF_RANGE:return La.OUT_OF_RANGE;case Yc.UNIMPLEMENTED:return La.UNIMPLEMENTED;case Yc.DATA_LOSS:return La.DATA_LOSS;default:return za()}}(Jc=Yc||(Yc={}))[Jc.OK=0]="OK",Jc[Jc.CANCELLED=1]="CANCELLED",Jc[Jc.UNKNOWN=2]="UNKNOWN",Jc[Jc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jc[Jc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jc[Jc.NOT_FOUND=5]="NOT_FOUND",Jc[Jc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jc[Jc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jc[Jc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jc[Jc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jc[Jc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jc[Jc.ABORTED=10]="ABORTED",Jc[Jc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jc[Jc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jc[Jc.INTERNAL=13]="INTERNAL",Jc[Jc.UNAVAILABLE=14]="UNAVAILABLE",Jc[Jc.DATA_LOSS=15]="DATA_LOSS";var rl=function(){function t(t,e){this.comparator=t,this.root=e||ol.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ol.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ol.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new il(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new il(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new il(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new il(this.root,t,this.comparator,!0)},t}(),il=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),ol=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw za();if(this.right.isRed())throw za();var t=this.left.check();if(t!==this.right.check())throw za();return t+(this.isRed()?0:1)},t}();ol.EMPTY=null,ol.RED=!0,ol.BLACK=!1,ol.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw za()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw za()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw za()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw za()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw za()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new ol(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var sl=function(){function t(t){this.comparator=t,this.data=new rl(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new al(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new al(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),al=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ul=new rl(bu.comparator);function cl(){return ul}var ll=new rl(bu.comparator);function hl(){return ll}var fl=new rl(bu.comparator);function dl(){return fl}var pl=new sl(bu.comparator);function gl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=pl,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var yl=new sl($a);function vl(){return yl}var ml=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,bl.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Za.min(),r,vl(),cl(),gl())},t}(),bl=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(uu.EMPTY_BYTE_STRING,n,gl(),gl(),gl())},t}(),_l=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},wl=function(t,e){this.targetId=t,this.V=e},Cl=function(t,e,n,r){void 0===n&&(n=uu.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ol=function(){function t(){this.S=0,this.D=El(),this.C=uu.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=gl(),e=gl(),n=gl();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:za()}}),new bl(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=El()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),Sl=function(){function t(t){this.W=t,this.G=new Map,this.H=cl(),this.J=Tl(),this.Y=new sl($a)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:za()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(qu(i))if(0===n){var o=new bu(i.path);this.tt(e,o,Lu.newNoDocument(o,Za.min()))}else Wa(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&qu(o.target)){var s=new bu(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Lu.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=gl();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new ml(t,n,this.Y,this.H,r);return this.H=cl(),this.J=Tl(),this.Y=new sl($a),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Ol,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new sl($a),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Va("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Ol),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Tl(){return new rl(bu.comparator)}function El(){return new rl(bu.comparator)}var Il={asc:"ASCENDING",desc:"DESCENDING"},kl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xl=function(t,e){this.databaseId=t,this.I=e};function jl(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Al(t,e){return t.I?e.toBase64():e.toUint8Array()}function Rl(t,e){return jl(t,e.toTimestamp())}function Nl(t){return Wa(!!t),Za.fromTimestamp(function(t){var e=lu(t);return new Xa(e.seconds,e.nanos)}(t))}function Pl(t,e){return function(t){return new iu(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Dl(t){var e=iu.fromString(t);return Wa(oh(e)),e}function Ll(t,e){return Pl(t.databaseId,e.path)}function Ml(t,e){var n=Dl(e);if(n.get(1)!==t.databaseId.projectId)throw new Ma(La.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ma(La.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new bu(ql(n))}function Fl(t,e){return Pl(t.databaseId,e)}function Ul(t){var e=Dl(t);return 4===e.length?iu.emptyPath():ql(e)}function Vl(t){return new iu(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ql(t){return Wa(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Bl(t,e,n){return{name:Ll(t,e),fields:n.value.mapValue.fields}}function Hl(t,e,n){var r=Ml(t,e.name),i=Nl(e.updateTime),o=new Pu({mapValue:{fields:e.fields}}),s=Lu.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function zl(t,e){var n;if(e instanceof Wc)n={update:Bl(t,e.key,e.value)};else if(e instanceof Xc)n={delete:Ll(t,e.key)};else if(e instanceof Kc)n={update:Bl(t,e.key,e.data),updateMask:ih(e.fieldMask)};else{if(!(e instanceof Zc))return za();n={verify:Ll(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Ic)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof kc)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof jc)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Rc)return{fieldPath:e.field.canonicalString(),increment:n.A};throw za()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Rl(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:za()}(t,e.precondition)),n}function Wl(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Mc.updateTime(Nl(t.updateTime)):void 0!==t.exists?Mc.exists(t.exists):Mc.none()}(e.currentDocument):Mc.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Wa("REQUEST_TIME"===e.setToServerValue),n=new Ic):"appendMissingElements"in e?n=new kc(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new jc(e.removeAllFromArray.values||[]):"increment"in e?n=new Rc(t,e.increment):za();var r=su.fromServerFormat(e.fieldPath);return new Dc(r,n)}(t,e)}):[];if(e.update){var i=Ml(t,e.update.name),o=new Pu({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new au((t.fieldPaths||[]).map(function(t){return su.fromServerFormat(t)}))}(e.updateMask);return new Kc(i,o,s,n,r)}return new Wc(i,o,n,r)}if(e.delete){var a=Ml(t,e.delete);return new Xc(a,n)}if(e.verify){var u=Ml(t,e.verify);return new Zc(u,n)}return za()}function Kl(t,e){return{documents:[Fl(t,e.path)]}}function Gl(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Fl(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Fl(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Au(t.value))return{unaryFilter:{field:th(t.field),op:"IS_NAN"}};if(ju(t.value))return{unaryFilter:{field:th(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Au(t.value))return{unaryFilter:{field:th(t.field),op:"IS_NOT_NAN"}};if(ju(t.value))return{unaryFilter:{field:th(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:th(t.field),op:Zl(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:th(t.field),direction:Xl(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||yu(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Yl(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Yl(e.endAt)),n}function Ql(t){var e=Ul(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Wa(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=$l(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Zu(eh(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return yu(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Jl(n.startAt));var l=null;return n.endAt&&(l=Jl(n.endAt)),ic(e,i,a,s,u,"F",c,l)}function $l(t){return t?void 0!==t.unaryFilter?[rh(t)]:void 0!==t.fieldFilter?[nh(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return $l(t)}).reduce(function(t,e){return t.concat(e)}):za():[]}function Yl(t){return{before:t.before,values:t.position}}function Jl(t){return new Ju(t.values||[],!!t.before)}function Xl(t){return Il[t]}function Zl(t){return kl[t]}function th(t){return{fieldPath:t.canonicalString()}}function eh(t){return su.fromServerFormat(t.fieldPath)}function nh(t){return Bu.create(eh(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return za()}}(t.fieldFilter.op),t.fieldFilter.value)}function rh(t){switch(t.unaryFilter.op){case"IS_NAN":var e=eh(t.unaryFilter.field);return Bu.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=eh(t.unaryFilter.field);return Bu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=eh(t.unaryFilter.field);return Bu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=eh(t.unaryFilter.field);return Bu.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return za()}}function ih(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function oh(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function sh(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=uh(e)),e=ah(t.get(n),e);return uh(e)}function ah(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function uh(t){return t+"\x01\x01"}function ch(t){var e=t.length;if(Wa(e>=2),2===e)return Wa("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),iu.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&za(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:za()}o=s+2}return new iu(r)}var lh=function(t,e){this.seconds=t,this.nanoseconds=e},hh=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};hh.store="owner",hh.key="owner";var fh=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};fh.store="mutationQueues",fh.keyPath="userId";var dh=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};dh.store="mutations",dh.keyPath="batchId",dh.userMutationsIndex="userMutationsIndex",dh.userMutationsKeyPath=["userId","batchId"];var ph=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,sh(e)]},t.key=function(t,e,n){return[t,sh(e),n]},t}();ph.store="documentMutations",ph.PLACEHOLDER=new ph;var gh=function(t,e){this.path=t,this.readTime=e},yh=function(t,e){this.path=t,this.version=e},vh=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};vh.store="remoteDocuments",vh.readTimeIndex="readTimeIndex",vh.readTimeIndexPath="readTime",vh.collectionReadTimeIndex="collectionReadTimeIndex",vh.collectionReadTimeIndexPath=["parentPath","readTime"];var mh=function(t){this.byteSize=t};mh.store="remoteDocumentGlobal",mh.key="remoteDocumentGlobalKey";var bh=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};bh.store="targets",bh.keyPath="targetId",bh.queryTargetsIndexName="queryTargetsIndex",bh.queryTargetsKeyPath=["canonicalId","targetId"];var _h=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};_h.store="targetDocuments",_h.keyPath=["targetId","path"],_h.documentTargetsIndex="documentTargetsIndex",_h.documentTargetsKeyPath=["path","targetId"];var wh=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};wh.key="targetGlobalKey",wh.store="targetGlobal";var Ch=function(t,e){this.collectionId=t,this.parent=e};Ch.store="collectionParents",Ch.keyPath=["collectionId","parent"];var Oh=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Oh.store="clientMetadata",Oh.keyPath="clientId";var Sh=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Sh.store="bundles",Sh.keyPath="bundleId";var Th=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Th.store="namedQueries",Th.keyPath="name";var Eh=Object(qe.f)(Object(qe.f)([],Object(qe.f)(Object(qe.f)([],Object(qe.f)(Object(qe.f)([],Object(qe.f)(Object(qe.f)([],[fh.store,dh.store,ph.store,vh.store,bh.store,hh.store,wh.store,_h.store]),[Oh.store])),[mh.store])),[Ch.store])),[Sh.store,Th.store]),Ih="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",kh=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),xh=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},jh=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&za(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Ah=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new xh,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Ph(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Uh(e.target.error);n.ft.reject(new Ph(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Ph(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Va("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Lh(e)},t}(),Rh=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(Be.p)())&&qa("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Va("SimpleDb","Removing database:",t),Mh(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(Be.p)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(qe.b)(this,void 0,void 0,function(){var e,n=this;return Object(qe.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Va("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Ph(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Ma(La.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Ph(t,n))},i.onupgradeneeded=function(t){Va("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Va("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(qe.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(qe.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(qe.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Ah.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),jh.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Va("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Nh=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Mh(this.Pt.delete())},t}(),Ph=function(t){function e(e,n){var r=this;return(r=t.call(this,La.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(qe.c)(e,t),e}(Ma);function Dh(t){return"IndexedDbTransactionError"===t.name}var Lh=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Va("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Va("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Mh(n)},t.prototype.add=function(t){return Va("SimpleDb","ADD",this.store.name,t,t),Mh(this.store.add(t))},t.prototype.get=function(t){var e=this;return Mh(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Va("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Va("SimpleDb","DELETE",this.store.name,t),Mh(this.store.delete(t))},t.prototype.count=function(){return Va("SimpleDb","COUNT",this.store.name),Mh(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.kt=function(t,e){Va("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new jh(function(n,r){e.onerror=function(t){var e=Uh(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new jh(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Nh(i),s=e(i.primaryKey,i.value,o);if(s instanceof jh){var a=s.catch(function(t){return o.done(),jh.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return jh.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Mh(t){return new jh(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Uh(t.target.error);n(e)}})}var Fh=!1;function Uh(t){var e=Rh._t(Object(Be.p)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ma("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Fh||(Fh=!0,setTimeout(function(){throw r},0)),r}}return t}var Vh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(qe.c)(e,t),e}(kh);function qh(t,e){var n=Ka(t);return Rh.It(n.Mt,e)}var Bh=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Vc(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&qc(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&qc(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Za.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},gl())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ya(this.mutations,t.mutations,function(t,e){return Hc(t,e)})&&Ya(this.baseMutations,t.baseMutations,function(t,e){return Hc(t,e)})},t}(),Hh=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Wa(e.mutations.length===r.length);for(var i=dl(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),zh=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Za.min()),void 0===o&&(o=Za.min()),void 0===s&&(s=uu.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Wh=function(t){this.Lt=t};function Kh(t,e){if(e.document)return Hl(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=bu.fromSegments(e.noDocument.path),r=Jh(e.noDocument.readTime),i=Lu.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=bu.fromSegments(e.unknownDocument.path);return r=Jh(e.unknownDocument.version),Lu.newUnknownDocument(o,r)}return za()}function Gh(t,e,n){var r=Qh(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Ll(t,e.key),fields:e.data.value.mapValue.fields,updateTime:jl(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new vh(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Yh(e.version);return s=e.hasCommittedMutations,new vh(null,new gh(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Yh(e.version);return new vh(new yh(c,l),null,null,!0,r,i)}return za()}function Qh(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function $h(t){var e=new Xa(t[0],t[1]);return Za.fromTimestamp(e)}function Yh(t){var e=t.toTimestamp();return new lh(e.seconds,e.nanoseconds)}function Jh(t){var e=new Xa(t.seconds,t.nanoseconds);return Za.fromTimestamp(e)}function Xh(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Wl(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Wl(t.Lt,e)}),o=Xa.fromMillis(e.localWriteTimeMs);return new Bh(e.batchId,o,n,i)}function Zh(t){var e,n,r=Jh(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Jh(t.lastLimboFreeSnapshotVersion):Za.min();return void 0!==t.query.documents?(Wa(1===(n=t.query).documents.length),e=fc(oc(Ul(n.documents[0])))):e=function(t){return fc(Ql(t))}(t.query),new zh(e,t.targetId,0,t.lastListenSequenceNumber,r,i,uu.fromBase64String(t.resumeToken))}function tf(t,e){var n,r=Yh(e.snapshotVersion),i=Yh(e.lastLimboFreeSnapshotVersion);n=qu(e.target)?Kl(t.Lt,e.target):Gl(t.Lt,e.target);var o=e.resumeToken.toBase64();return new bh(e.targetId,Uu(e.target),r,o,e.sequenceNumber,i,n)}function ef(t){var e=Ql({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?dc(e,e.limit,"L"):e}var nf=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return rf(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Jh(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return rf(t).put({bundleId:(n=e).id,createTime:Yh(Nl(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return of(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:ef(e.bundledQuery),readTime:Jh(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return of(t).put(function(t){return{name:t.name,readTime:Yh(Nl(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function rf(t){return qh(t,Sh.store)}function of(t){return qh(t,Th.store)}var sf=function(){function t(){this.Bt=new af}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),jh.resolve()},t.prototype.getCollectionParents=function(t,e){return jh.resolve(this.Bt.getEntries(e))},t}(),af=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new sl(iu.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new sl(iu.comparator)).toArray()},t}(),uf=function(){function t(){this.qt=new af}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:sh(i)};return cf(t).put(o)}return jh.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ja(e),""],!1,!0);return cf(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(ch(o.parent))}return n})},t}();function cf(t){return qh(t,Ch.store)}var lf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hf=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function ff(t,e,n){var r=t.store(dh.store),i=t.store(ph.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Wa(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=ph.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return jh.waitFor(o).next(function(){return c})}function df(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw za();e=t.noDocument}return JSON.stringify(e).length}hf.DEFAULT_COLLECTION_PERCENTILE=10,hf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hf.DEFAULT=new hf(41943040,hf.DEFAULT_COLLECTION_PERCENTILE,hf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hf.DISABLED=new hf(-1,0,0);var pf=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Wa(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yf(t).$t({index:dh.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=vf(t),s=yf(t);return s.add({}).next(function(a){Wa("number"==typeof a);for(var u=new Bh(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return zl(t.Lt,e)}),i=n.mutations.map(function(e){return zl(t.Lt,e)});return new dh(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new sl(function(t,e){return $a(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=ph.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,ph.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=u.keys()}),jh.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return yf(t).get(e).next(function(t){return t?(Wa(t.userId===n.userId),Xh(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?jh.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return yf(t).$t({index:dh.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Wa(e.batchId>=r),o=Xh(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return yf(t).$t({index:dh.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yf(t).Nt(dh.userMutationsIndex,n).next(function(t){return t.map(function(t){return Xh(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=ph.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return vf(t).$t({range:i},function(r,i,s){var a=r[0],u=r[2],c=ch(r[1]);if(a===n.userId&&e.path.isEqual(c))return yf(t).get(u).next(function(t){if(!t)throw za();Wa(t.userId===n.userId),o.push(Xh(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new sl($a),i=[];return e.forEach(function(e){var o=ph.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=vf(t).$t({range:s},function(t,i,o){var s=t[0],a=t[2],u=ch(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),jh.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=ph.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new sl($a);return vf(t).$t({range:s},function(t,e,o){var s=t[0],u=t[2],c=ch(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(yf(t).get(e).next(function(t){if(null===t)throw za();Wa(t.userId===n.userId),r.push(Xh(n.R,t))}))}),jh.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return ff(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),jh.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return jh.resolve();var r=IDBKeyRange.lowerBound(ph.prefixForUser(e.userId)),i=[];return vf(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=ch(t[1]);i.push(o)}else r.done()}).next(function(){Wa(0===i.length)})})},t.prototype.containsKey=function(t,e){return gf(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return mf(t).get(this.userId).next(function(t){return t||new fh(e.userId,-1,"")})},t}();function gf(t,e,n){var r=ph.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return vf(t).$t({range:o,Ft:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function yf(t){return qh(t,dh.store)}function vf(t){return qh(t,ph.store)}function mf(t){return qh(t,fh.store)}var bf=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),_f=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new bf(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Za.fromTimestamp(new Xa(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return wf(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Wa(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return wf(t).$t(function(s,a){var u=Zh(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return jh.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return wf(t).$t(function(t,n){var r=Zh(n);e(r)})},t.prototype.Xt=function(t){return Cf(t).get(wh.key).next(function(t){return Wa(null!==t),t})},t.prototype.Zt=function(t,e){return Cf(t).put(wh.key,e)},t.prototype.te=function(t,e){return wf(t).put(tf(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Uu(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return wf(t).$t({range:r,index:bh.queryTargetsIndexName},function(t,n,r){var o=Zh(n);Vu(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Of(t);return e.forEach(function(e){var s=sh(e.path);i.push(o.put(new _h(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),jh.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Of(t);return jh.forEach(e,function(e){var o=sh(e.path);return jh.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Of(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Of(t),i=gl();return r.$t({range:n,Ft:!0},function(t,e,n){var r=ch(t[1]),o=new bu(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=sh(e.path),r=IDBKeyRange.bound([n],[Ja(n)],!1,!0),i=0;return Of(t).$t({index:_h.documentTargetsIndex,Ft:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return wf(t).get(e).next(function(t){return t?Zh(t):null})},t}();function wf(t){return qh(t,bh.store)}function Cf(t){return qh(t,wh.store)}function Of(t){return qh(t,_h.store)}function Sf(t){return Object(qe.b)(this,void 0,void 0,function(){return Object(qe.d)(this,function(e){if(t.code!==La.FAILED_PRECONDITION||t.message!==Ih)throw t;return Va("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Tf(t,e){var n=t[1],r=e[1],i=$a(t[0],e[0]);return 0===i?$a(n,r):i}var Ef=function(){function t(t){this.ne=t,this.buffer=new sl(Tf),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Tf(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),If=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Va("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(qe.b)(e,void 0,void 0,function(){var e;return Object(qe.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Dh(e=n.sent())?(Va("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Sf(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),kf=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return jh.resolve(Da.o);var r=new Ef(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Va("LruGarbageCollector","Garbage collection skipped; disabled"),jh.resolve(lf)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Va("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),lf):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Va("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Ua()<=Er.a.DEBUG&&Va("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),jh.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),xf=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new kf(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return jf(t,n)},t.prototype.removeReference=function(t,e,n){return jf(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return jf(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return mf(t).Ot(function(r){return gf(t,r,e).next(function(t){return t&&(n=!0),jh.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Of(t).delete([0,sh(s.path)])})});i.push(u)}}).next(function(){return jh.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return jf(t,e)},t.prototype.we=function(t,e){var n,r=Of(t),i=Da.o;return r.$t({index:_h.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Da.o&&e(new bu(ch(n)),i),i=s,n=o):i=Da.o}).next(function(){i!==Da.o&&e(new bu(ch(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function jf(t,e){return Of(t).put(function(t,e){return new _h(0,sh(t.path),e)}(e,t.currentSequenceNumber))}var Af=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){eu(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return nu(this.inner)},t}(),Rf=function(){function t(){this.changes=new Af(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Za.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Lu.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?jh.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Nf=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Lf(t).put(Mf(e),n)},t.prototype.removeEntry=function(t,e){var n=Lf(t),r=Mf(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Lf(t).get(Mf(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Lf(t).get(Mf(e)).next(function(t){return{document:n.ye(e,t),size:df(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=cl();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=cl(),i=new rl(bu.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,df(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return jh.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Lf(t).$t({range:r},function(t,e,r){for(var s=bu.fromSegments(t);o&&bu.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=cl(),o=e.path.length+1,s={};if(n.isEqual(Za.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Qh(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=vh.collectionReadTimeIndex}return Lf(t).$t(s,function(t,n,s){if(t.length===o){var a=Kh(r.R,n);e.path.isPrefixOf(a.key.path)?vc(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Pf(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Df(t).get(mh.key).next(function(t){return Wa(!!t),t})},t.prototype.me=function(t,e){return Df(t).put(mh.key,e)},t.prototype.ye=function(t,e){if(e){var n=Kh(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Za.min()))return n}return Lu.newInvalidDocument(t)},t}(),Pf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Af(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(qe.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new sl(function(t,e){return $a(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Gh(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=df(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Gh(e.Ie.R,Lu.newNoDocument(o,Za.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),jh.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Rf);function Df(t){return qh(t,mh.store)}function Lf(t){return qh(t,vh.store)}function Mf(t){return t.path.toArray()}var Ff=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Wa(n<r&&n>=0&&r<=11);var o=new Ah("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(hh.store)}(t),function(t){t.createObjectStore(fh.store,{keyPath:fh.keyPath}),t.createObjectStore(dh.store,{keyPath:dh.keyPath,autoIncrement:!0}).createIndex(dh.userMutationsIndex,dh.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ph.store)}(t),Uf(t),function(t){t.createObjectStore(vh.store)}(t));var s=jh.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(_h.store),t.deleteObjectStore(bh.store),t.deleteObjectStore(wh.store)}(t),Uf(t)),s=s.next(function(){return function(t){var e=t.store(wh.store),n=new wh(0,0,Za.min().toTimestamp(),0);return e.put(wh.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(dh.store).Nt().next(function(n){t.deleteObjectStore(dh.store),t.createObjectStore(dh.store,{keyPath:dh.keyPath,autoIncrement:!0}).createIndex(dh.userMutationsIndex,dh.userMutationsKeyPath,{unique:!0});var r=e.store(dh.store),i=n.map(function(t){return r.put(t)});return jh.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Oh.store,{keyPath:Oh.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(mh.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(vh.store);e.createIndex(vh.readTimeIndex,vh.readTimeIndexPath,{unique:!1}),e.createIndex(vh.collectionReadTimeIndex,vh.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Sh.store,{keyPath:Sh.keyPath})}(t),function(t){t.createObjectStore(Th.store,{keyPath:Th.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(vh.store).$t(function(t,n){e+=df(n)}).next(function(){var n=new mh(e);return t.store(mh.store).put(mh.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(fh.store),r=t.store(dh.store);return n.Nt().next(function(n){return jh.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(dh.userMutationsIndex,i).next(function(r){return jh.forEach(r,function(r){Wa(r.userId===n.userId);var i=Xh(e.R,r);return ff(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(_h.store),n=t.store(vh.store);return t.store(wh.store).get(wh.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new iu(n),s=function(t){return[0,sh(t)]}(o);r.push(e.get(s).next(function(n){return n?jh.resolve():function(n){return e.put(new _h(0,sh(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return jh.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Ch.store,{keyPath:Ch.keyPath});var n=e.store(Ch.store),r=new af,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:sh(i)})}};return e.store(vh.store).$t({Ft:!0},function(t,e){var n=new iu(t);return i(n.popLast())}).next(function(){return e.store(ph.store).$t({Ft:!0},function(t,e){var n=ch(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(bh.store);return n.$t(function(t,r){var i=Zh(r),o=tf(e.R,i);return n.put(o)})},t}();function Uf(t){t.createObjectStore(_h.store,{keyPath:_h.keyPath}).createIndex(_h.documentTargetsIndex,_h.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(bh.store,{keyPath:bh.keyPath}).createIndex(bh.queryTargetsIndexName,bh.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(wh.store)}var Vf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",qf=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Ma(La.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xf(this,i),this.Le=n+"main",this.R=new Wh(u),this.Be=new Rh(this.Le,11,new Ff(this.R)),this.qe=new _f(this.referenceDelegate,this.R),this.Ut=new uf,this.Ue=function(t,e){return new Nf(t,e)}(this.R,this.Ut),this.Ke=new nf,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&qa("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ma(La.FAILED_PRECONDITION,Vf);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Da(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(qe.b)(e,void 0,void 0,function(){return Object(qe.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(qe.b)(e,void 0,void 0,function(){return Object(qe.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(qe.b)(e,void 0,void 0,function(){return Object(qe.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Hf(e).put(new Oh(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Dh(e))return Va("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Va("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Bf(t).get(hh.key).next(function(t){return jh.resolve(e.tn(t))})},t.prototype.en=function(t){return Hf(t).delete(this.clientId)},t.prototype.nn=function(){return Object(qe.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(qe.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=qh(t,Oh.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return jh.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?jh.resolve(!0):Bf(t).get(hh.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Ma(La.FAILED_PRECONDITION,Vf);return!1}}return!(!e.networkEnabled||!e.inForeground)||Hf(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Va("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(qe.b)(this,void 0,void 0,function(){var t=this;return Object(qe.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[hh.store,Oh.store],function(e){var n=new Vh(e,Da.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Hf(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return pf.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Va("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Eh,function(o){return r=new Vh(o,i.Ne?i.Ne.next():Da.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw qa("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Ma(La.FAILED_PRECONDITION,Ih);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Bf(t).get(hh.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ma(La.FAILED_PRECONDITION,Vf)})},t.prototype.Ze=function(t){var e=new hh(this.clientId,this.allowTabSynchronization,Date.now());return Bf(t).put(hh.key,e)},t.yt=function(){return Rh.yt()},t.prototype.Xe=function(t){var e=this,n=Bf(t);return n.get(hh.key).next(function(t){return e.tn(t)?(Va("IndexedDbPersistence","Releasing primary lease."),n.delete(hh.key)):jh.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(qa("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),Object(Be.A)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Va("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return qa("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){qa("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Bf(t){return qh(t,hh.store)}function Hf(t){return qh(t,Oh.store)}function zf(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Wf=function(t,e){this.progress=t,this.wn=e},Kf=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return bu.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):lc(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new bu(e)).next(function(t){var e=hl();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=hl();return this.Ut.getCollectionParents(t,i).next(function(s){return jh.forEach(s,function(s){var a=function(t,e){return new rc(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Lu.newInvalidDocument(c),r=r.insert(c,l)),qc(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){vc(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=gl(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Kc&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Gf=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=gl(),i=gl(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Qf=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Za.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(sc(e)||ac(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Ua()<=Er.a.DEBUG&&Va("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),yc(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new sl(mc(t));return e.forEach(function(e,r){vc(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Ua()<=Er.a.DEBUG&&Va("QueryEngine","Using full collection scan to execute query:",yc(e)),this.Sn.getDocumentsMatchingQuery(t,e,Za.min())},t}(),$f=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new rl($a),this.Fn=new Af(function(t){return Uu(t)},Vu),this.$n=Za.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Kf(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.kn)})},t}();function Yf(t,e,n,r){return new $f(t,e,n,r)}function Jf(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(qe.d)(this,function(s){switch(s.label){case 0:return n=Ka(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Kf(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=gl(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Xf(t,e){var n=Ka(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=jh.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Wa(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Zf(t){var e=Ka(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function td(t,e){var n=Ka(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Wa(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=cl();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(ed(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Za.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return jh.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.kn=i,t})}function ed(t,e,n,r,i){var o=gl();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=cl();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Za.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Va("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function nd(t,e){var n=Ka(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function rd(t,e){var n=Ka(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?jh.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new zh(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t})}function id(t,e,n){return Object(qe.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(qe.d)(this,function(a){switch(a.label){case 0:r=Ka(t),i=r.kn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Dh(s=a.sent()))throw s;return Va("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}})})}function od(t,e,n){var r=Ka(t),i=Za.min(),o=gl();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Ka(t),i=r.Fn.get(n);return void 0!==i?jh.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,fc(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Za.min(),n?o:gl())}).next(function(t){return{documents:t,Bn:o}})})}function sd(t,e){var n=Ka(t),r=Ka(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function ad(t){var e=Ka(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Ka(t),i=cl(),o=Qh(n),s=Lf(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:vh.readTimeIndex,range:a},function(t,e){var n=Kh(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:$h(o)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function ud(t){return Object(qe.b)(this,void 0,void 0,function(){var e;return Object(qe.d)(this,function(n){return[2,(e=Ka(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Lf(t),n=Za.min();return e.$t({index:vh.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=$h(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function cd(t,e,n,r){return Object(qe.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(qe.d)(this,function(p){switch(p.label){case 0:for(i=Ka(t),o=gl(),s=cl(),a=dl(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,rd(i,function(t){return fc(oc(iu.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return ed(t,f,s,Za.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function ld(t,e,n){return void 0===n&&(n=gl()),Object(qe.b)(this,void 0,void 0,function(){var r,i;return Object(qe.d)(this,function(o){switch(o.label){case 0:return[4,rd(t,fc(ef(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Ka(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Nl(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(uu.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(t,e)})})]}})})}var hd=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return jh.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Nl(n.createTime)}),jh.resolve()},t.prototype.getNamedQuery=function(t,e){return jh.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:ef(t.bundledQuery),readTime:Nl(t.readTime)}}(e)),jh.resolve()},t}(),fd=function(){function t(){this.Wn=new sl(dd.Gn),this.zn=new sl(dd.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new dd(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new dd(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new bu(new iu([])),r=new dd(n,t),i=new dd(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new bu(new iu([])),n=new dd(e,t),r=new dd(e,t+1),i=gl();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new dd(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),dd=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return bu.comparator(t.key,e.key)||$a(t.ns,e.ns)},t.Hn=function(t,e){return $a(t.ns,e.ns)||bu.comparator(t.key,e.key)},t}(),pd=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new sl(dd.Gn)}return t.prototype.checkEmpty=function(t){return jh.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Bh(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new dd(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return jh.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return jh.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return jh.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return jh.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return jh.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new dd(e,0),i=new dd(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),jh.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new sl($a);return e.forEach(function(t){var e=new dd(t,0),i=new dd(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),jh.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;bu.isDocumentKey(i)||(i=i.child(""));var o=new dd(new bu(i),0),s=new sl($a);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),jh.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Wa(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return jh.forEach(e.mutations,function(i){var o=new dd(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new dd(e,0),r=this.rs.firstAfterOrEqual(n);return jh.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return jh.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),gd=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new rl(bu.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return jh.resolve(n?n.document.clone():Lu.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=cl();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Lu.newInvalidDocument(t))}),jh.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=cl(),i=new bu(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||vc(e,u)&&(r=r.insert(u.key,u.clone()))}return jh.resolve(r)},t.prototype.fs=function(t,e){return jh.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new yd(this)},t.prototype.getSize=function(t){return jh.resolve(this.size)},t}(),yd=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(qe.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),jh.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Rf),vd=function(){function t(t){this.persistence=t,this.ds=new Af(function(t){return Uu(t)},Vu),this.lastRemoteSnapshotVersion=Za.min(),this.highestTargetId=0,this.ws=0,this._s=new fd,this.targetCount=0,this.ys=bf.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),jh.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return jh.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return jh.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),jh.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),jh.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new bf(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,jh.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),jh.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,jh.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),jh.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return jh.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return jh.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),jh.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),jh.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),jh.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return jh.resolve(n)},t.prototype.containsKey=function(t,e){return jh.resolve(this._s.containsKey(e))},t}(),md=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Da(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new vd(this),this.Ut=new sf,this.Ue=function(t,e){return new gd(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Wh(e),this.Ke=new hd(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new pd(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Va("MemoryPersistence","Starting transaction:",t);var i=new bd(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return jh.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),bd=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(qe.c)(e,t),e}(kh),_d=function(){function t(t){this.persistence=t,this.As=new fd,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw za()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),jh.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),jh.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),jh.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return jh.forEach(this.vs,function(r){var i=bu.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return jh.or([function(){return jh.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),wd=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Cd(t,e){return"firestore_clients_"+t+"_"+e}function Od(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Sd(t,e){return"firestore_targets_"+t+"_"+e}wd.UNAUTHENTICATED=new wd(null),wd.GOOGLE_CREDENTIALS=new wd("google-credentials-uid"),wd.FIRST_PARTY=new wd("first-party-uid"),wd.MOCK_USER=new wd("mock-user");var Td=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Ma(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(qa("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ed=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ma(i.error.code,i.error.message)),o?new t(e,i.state,r):(qa("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Id=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=vl(),s=0;i&&s<r.activeTargetIds.length;++s)i=mu(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(qa("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),kd=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(qa("SharedClientState","Failed to parse online state: "+e),null)},t}(),xd=function(){function t(){this.activeTargetIds=vl()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),jd=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new rl($a),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Cd(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new xd),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(qe.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(qe.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Cd(this.persistenceKey,r)))&&(o=Id.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.ks(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Sd(this.persistenceKey,t));if(n){var r=Ed.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Sd(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Va("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Va("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Va("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Va("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void qa("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(qe.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(qe.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Da.o;if(null!=t)try{var n=JSON.parse(t);Wa("number"==typeof n),e=n}catch(t){qa("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Da.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Td(this.currentUser,t,e,n),i=Od(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Od(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Sd(this.persistenceKey,t),i=new Ed(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Id.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Td.Vs(new wd(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Ed.Vs(r,e)},t.prototype.js=function(t){return kd.Vs(t)},t.prototype.ii=function(t){return Object(qe.b)(this,void 0,void 0,function(){return Object(qe.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Va("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.Fs=r})},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=vl();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Ad=function(){function t(){this.li=new xd,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new xd,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Rd=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Nd=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Va("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Va("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Pd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Dd=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Ld=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Object(qe.c)(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise(function(i,o){var s=new Pa;s.listenOnce(ja.COMPLETE,function(){try{switch(s.getLastErrorCode()){case xa.NO_ERROR:var e=s.getResponseJson();Va("Connection","XHR received:",JSON.stringify(e)),i(e);break;case xa.TIMEOUT:Va("Connection",'RPC "'+t+'" timed out'),o(new Ma(La.DEADLINE_EXCEEDED,"Request time out"));break;case xa.HTTP_ERROR:var n=s.getStatus();if(Va("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(La).indexOf(e)>=0?e:La.UNKNOWN}(r.status);o(new Ma(a,r.message))}else o(new Ma(La.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Ma(La.UNAVAILABLE,"Connection failed."));break;default:za()}}finally{Va("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Sa,i=mo(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ra({})),this.ki(o.initMessageHeaders,e),Object(Be.w)()||Object(Be.z)()||Object(Be.t)()||Object(Be.v)()||Object(Be.B)()||Object(Be.s)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Va("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Dd({Ei:function(t){c?Va("Connection","Not sending because WebChannel is closed:",t):(u||(Va("Connection","Opening WebChannel transport."),a.open(),u=!0),Va("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Na.EventType.OPEN,function(){c||Va("Connection","WebChannel transport opened.")}),h(a,Na.EventType.CLOSE,function(){c||(c=!0,Va("Connection","WebChannel transport closed"),l.Vi())}),h(a,Na.EventType.ERROR,function(t){c||(c=!0,Ba("Connection","WebChannel transport errored:",t),l.Vi(new Ma(La.UNAVAILABLE,"The operation could not be completed")))}),h(a,Na.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Wa(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Va("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Yc[t];if(void 0!==e)return nl(e)}(i),s=r.message;void 0===o&&(o=La.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Ma(o,s)),a.close()}else Va("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Aa.STAT_EVENT,function(t){10===t.stat?Va("Connection","Detected buffering proxy"):11===t.stat&&Va("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Va("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then(function(t){return Va("RestConnection","Received: ",t),t},function(e){throw Ba("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Pd[t]},t}());function Md(){return"undefined"!=typeof window?window:null}function Fd(){return"undefined"!=typeof document?document:null}function Ud(t){return new xl(t,!0)}var Vd=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Va("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),qd=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Vd(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(qe.b)(this,void 0,void 0,function(){return Object(qe.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(qe.b)(this,void 0,void 0,function(){return Object(qe.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(qe.b)(this,void 0,void 0,function(){return Object(qe.d)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===La.RESOURCE_EXHAUSTED?(qa(e.toString()),qa("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===La.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Ma(La.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(qe.b)(t,void 0,void 0,function(){return Object(qe.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Va("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Va("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Bd=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(qe.c)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:za()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Wa(void 0===e||"string"==typeof e),uu.fromBase64String(e||"")):(Wa(void 0===e||e instanceof Uint8Array),uu.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?La.UNKNOWN:nl(t.code);return new Ma(e,t.message||"")}(a);n=new Cl(r,i,o,s||null)}else if("documentChange"in e){i=Ml(t,(r=e.documentChange).document.name),o=Nl(r.document.updateTime);var a=new Pu({mapValue:{fields:r.document.fields}}),u=(s=Lu.newFoundDocument(i,o,a),r.targetIds||[]);n=new _l(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Ml(t,(r=e.documentDelete).document),o=r.readTime?Nl(r.readTime):Za.min(),a=Lu.newNoDocument(i,o),n=new _l([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Ml(t,(r=e.documentRemove).document),n=new _l([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return za();var c=e.filter;i=new tl(r=c.count||0),n=new wl(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Za.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Za.min():e.readTime?Nl(e.readTime):Za.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Vl(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=qu(r)?{documents:Kl(t,r)}:{query:Gl(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Al(t,e.resumeToken):e.snapshotVersion.compareTo(Za.min())>0&&(n.readTime=jl(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return za()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Vl(this.R),e.removeTarget=t,this.cr(e)},e}(qd),Hd=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(qe.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Wa(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Wa(void 0!==e),t.map(function(t){return function(t,e){var n=Nl(t.updateTime?t.updateTime:e);return n.isEqual(Za.min())&&(n=Nl(e)),new Lc(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Nl(t.commitTime);return this.listener.Tr(n,e)}return Wa(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Vl(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return zl(e.R,t)})};this.cr(n)},e}(qd),zd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(qe.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new Ma(La.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===La.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Ma(La.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===La.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Ma(La.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Wd=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(qa(e),this.Vr=!1):Va("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Kd=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(qe.b)(o,void 0,void 0,function(){return Object(qe.d)(this,function(t){switch(t.label){case 0:return ep(this)?(Va("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(qe.b)(this,void 0,void 0,function(){var e;return Object(qe.d)(this,function(n){switch(n.label){case 0:return(e=Ka(t)).Or.add(4),[4,Qd(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Gd(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Wd(n,r)};function Gd(t){return Object(qe.b)(this,void 0,void 0,function(){var e,n;return Object(qe.d)(this,function(r){switch(r.label){case 0:if(!ep(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Qd(t){return Object(qe.b)(this,void 0,void 0,function(){var e,n;return Object(qe.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function $d(t,e){var n=Ka(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),tp(n)?Zd(n):yp(n).er()&&Jd(n,e))}function Yd(t,e){var n=Ka(t),r=yp(n);n.$r.delete(e),r.er()&&Xd(n,e),0===n.$r.size&&(r.er()?r.ir():ep(n)&&n.Br.set("Unknown"))}function Jd(t,e){t.qr.U(e.targetId),yp(t).mr(e)}function Xd(t,e){t.qr.U(e),yp(t).yr(e)}function Zd(t){t.qr=new Sl({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),yp(t).start(),t.Br.Sr()}function tp(t){return ep(t)&&!yp(t).tr()&&t.$r.size>0}function ep(t){return 0===Ka(t).Or.size}function np(t){t.qr=void 0}function rp(t){return Object(qe.b)(this,void 0,void 0,function(){return Object(qe.d)(this,function(e){return t.$r.forEach(function(e,n){Jd(t,e)}),[2]})})}function ip(t,e){return Object(qe.b)(this,void 0,void 0,function(){return Object(qe.d)(this,function(n){return np(t),tp(t)?(t.Br.Nr(e),Zd(t)):t.Br.set("Unknown"),[2]})})}function op(t,e,n){return Object(qe.b)(this,void 0,void 0,function(){var r,i,o;return Object(qe.d)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Cl&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(qe.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Va("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,sp(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof _l?t.qr.X(e):e instanceof wl?t.qr.rt(e):t.qr.et(e),n.isEqual(Za.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Zf(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(uu.EMPTY_BYTE_STRING,n.snapshotVersion)),Xd(t,e);var r=new zh(n.target,e,1,n.sequenceNumber);Jd(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Va("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,sp(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function sp(t,e,n){return Object(qe.b)(this,void 0,void 0,function(){var r=this;return Object(qe.d)(this,function(i){switch(i.label){case 0:if(!Dh(e))throw e;return t.Or.add(1),[4,Qd(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Zf(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(qe.b)(r,void 0,void 0,function(){return Object(qe.d)(this,function(e){switch(e.label){case 0:return Va("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Gd(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function ap(t,e){return e().catch(function(n){return sp(t,n,e)})}function up(t){return Object(qe.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(qe.d)(this,function(s){switch(s.label){case 0:e=Ka(t),n=vp(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return ep(t)&&t.Fr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,nd(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.Fr.push(e);var n=vp(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,sp(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return cp(e)&&lp(e),[2]}})})}function cp(t){return ep(t)&&!vp(t).tr()&&t.Fr.length>0}function lp(t){vp(t).start()}function hp(t){return Object(qe.b)(this,void 0,void 0,function(){return Object(qe.d)(this,function(e){return vp(t).Ar(),[2]})})}function fp(t){return Object(qe.b)(this,void 0,void 0,function(){var e,n,r;return Object(qe.d)(this,function(i){for(e=vp(t),n=0,r=t.Fr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function dp(t,e,n){return Object(qe.b)(this,void 0,void 0,function(){var r,i;return Object(qe.d)(this,function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=Hh.from(r,e,n),[4,ap(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,up(t)];case 2:return o.sent(),[2]}})})}function pp(t,e){return Object(qe.b)(this,void 0,void 0,function(){return Object(qe.d)(this,function(n){switch(n.label){case 0:return e&&vp(t).pr?[4,function(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r;return Object(qe.d)(this,function(i){switch(i.label){case 0:return el(r=e.code)&&r!==La.ABORTED?(n=t.Fr.shift(),vp(t).sr(),[4,ap(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,up(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return cp(t)&&lp(t),[2]}})})}function gp(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n;return Object(qe.d)(this,function(r){switch(r.label){case 0:return n=Ka(t),e?(n.Or.delete(2),[4,Gd(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Qd(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function yp(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Ka(t);return r.br(),new Bd(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:rp.bind(null,t),Ri:ip.bind(null,t),_r:op.bind(null,t)}),t.Mr.push(function(n){return Object(qe.b)(e,void 0,void 0,function(){return Object(qe.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),tp(t)?Zd(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),np(t),e.label=3;case 3:return[2]}})})})),t.Ur}function vp(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Ka(t);return r.br(),new Hd(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:hp.bind(null,t),Ri:pp.bind(null,t),Ir:fp.bind(null,t),Tr:dp.bind(null,t)}),t.Mr.push(function(n){return Object(qe.b)(e,void 0,void 0,function(){return Object(qe.d)(this,function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,up(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(Va("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}})})})),t.Kr}var mp=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new xh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ma(La.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function bp(t,e){if(qa("AsyncQueue",e+": "+t),Dh(t))return new Ma(La.UNAVAILABLE,e+": "+t);throw t}var _p=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||bu.comparator(e.key,n.key)}:function(t,e){return bu.comparator(t.key,e.key)},this.keyedMap=hl(),this.sortedSet=new rl(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),wp=function(){function t(){this.Qr=new rl(bu.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):za():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Cp=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,_p.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&pc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Op=function(){this.Wr=void 0,this.listeners=[]},Sp=function(){this.queries=new Af(function(t){return gc(t)},pc),this.onlineState="Unknown",this.Gr=new Set};function Tp(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(qe.d)(this,function(c){switch(c.label){case 0:if(n=Ka(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Op),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=bp(a,"Initialization of query '"+yc(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&xp(n),[2]}})})}function Ep(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(qe.d)(this,function(a){return n=Ka(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Ip(t,e){for(var n=Ka(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&xp(n)}function kp(t,e,n){var r=Ka(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function xp(t){t.Gr.forEach(function(t){t.next()})}var jp=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Cp(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Cp.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Ap=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Rp=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Ml(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Hl(this.R,t.document,!1):Lu.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Nl(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Rp(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||gl()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(qe.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(qe.d)(this,function(o){switch(o.label){case 0:return[4,cd(this.localStore,new Rp(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,ld(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Wf(Object.assign({},this.progress),t))]}})})}}();var Np=function(t){this.key=t},Pp=function(t){this.key=t},Dp=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=gl(),this.mutatedKeys=gl(),this.lo=mc(t),this.fo=new _p(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new wp,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=sc(this.query)&&i.size===this.query.limit?i.last():null,c=ac(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=vc(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),sc(this.query)||ac(this.query))for(;s.size>this.query.limit;){var l=sc(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return za()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Cp(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new wp,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=gl(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Pp(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Np(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=gl();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Cp.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Lp=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Mp=function(t){this.key=t,this.bo=!1},Fp=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Af(function(t){return gc(t)},pc),this.Vo=new Map,this.So=new Set,this.Do=new rl(bu.comparator),this.Co=new Map,this.No=new fd,this.xo={},this.ko=new Map,this.Fo=bf.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Up(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(qe.d)(this,function(a){switch(a.label){case 0:return n=pg(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,rd(n.localStore,fc(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Vp(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&$d(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Vp(t,e,n,r){return Object(qe.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(qe.d)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return Object(qe.b)(this,void 0,void 0,function(){var i,o,s;return Object(qe.d)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,od(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Zp(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,od(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Dp(e,i.Bn),s=o._o(i.documents),a=bl.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Zp(t,n,u.To),c=new Lp(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function qp(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r,i;return Object(qe.d)(this,function(o){switch(o.label){case 0:return n=Ka(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!pc(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,id(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Yd(n.remoteStore,r.targetId),Jp(n,r.targetId)}).catch(Sf)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Jp(n,r.targetId),[4,id(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Bp(t,e,n){return Object(qe.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(qe.d)(this,function(a){switch(a.label){case 0:r=gg(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Ka(t),i=Xa.now(),o=e.reduce(function(t,e){return t.add(e.key)},gl());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Bc(c,n.get(c.key));null!=l&&s.push(new Kc(c.key,l,Du(l.value.mapValue),Mc.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new rl($a)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,ng(r,i.changes)];case 3:return a.sent(),[4,up(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=bp(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Hp(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r;return Object(qe.d)(this,function(i){switch(i.label){case 0:n=Ka(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,td(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Wa(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Wa(r.bo):t.removedDocuments.size>0&&(Wa(r.bo),r.bo=!1))}),[4,ng(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Sf(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function zp(t,e,n){var r=Ka(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Ka(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&xp(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Wp(t,e,n){return Object(qe.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(qe.d)(this,function(c){switch(c.label){case 0:return(r=Ka(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new rl(bu.comparator)).insert(o,Lu.newNoDocument(o,Za.min())),a=gl().add(o),u=new ml(Za.min(),new Map,new sl($a),s,a),[4,Hp(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),eg(r),[3,4];case 2:return[4,id(r.localStore,e,!1).then(function(){return Jp(r,e,n)}).catch(Sf)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Kp(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r,i;return Object(qe.d)(this,function(o){switch(o.label){case 0:n=Ka(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Xf(n.localStore,e)];case 2:return i=o.sent(),Yp(n,r,null),$p(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,ng(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Sf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Gp(t,e,n){return Object(qe.b)(this,void 0,void 0,function(){var r,i;return Object(qe.d)(this,function(o){switch(o.label){case 0:r=Ka(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Ka(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Wa(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Yp(r,e,n),$p(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,ng(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Sf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Qp(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(qe.d)(this,function(a){switch(a.label){case 0:ep((n=Ka(t)).remoteStore)||Va("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Ka(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return o=a.sent(),s=bp(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function $p(t,e){(t.ko.get(e)||[]).forEach(function(t){t.resolve()}),t.ko.delete(e)}function Yp(t,e,n){var r=Ka(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Jp(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||Xp(t,e)})}function Xp(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Yd(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),eg(t))}function Zp(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Np?(t.No.addReference(o.key,e),tg(t,o)):o instanceof Pp?(Va("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Xp(t,o.key)):za()}}function tg(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Va("SyncEngine","New document in limbo: "+n),t.So.add(r),eg(t))}function eg(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new bu(iu.fromString(e)),r=t.Fo.next();t.Co.set(r,new Mp(n)),t.Do=t.Do.insert(n,r),$d(t.remoteStore,new zh(fc(oc(n.path)),r,2,Da.o))}}function ng(t,e,n){return Object(qe.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(qe.d)(this,function(a){switch(a.label){case 0:return r=Ka(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Gf.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(qe.d)(this,function(l){switch(l.label){case 0:n=Ka(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return jh.forEach(e,function(e){return jh.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return jh.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Dh(r=l.sent()))throw r;return Va("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.kn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.kn=n.kn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function rg(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r;return Object(qe.d)(this,function(i){switch(i.label){case 0:return(n=Ka(t)).currentUser.isEqual(e)?[3,3]:(Va("SyncEngine","User change. New user:",e.toKey()),[4,Jf(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach(function(t){t.forEach(function(t){t.reject(new Ma(La.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,ng(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function ig(t,e){var n=Ka(t),r=n.Co.get(e);if(r&&r.bo)return gl().add(r.key);var i=gl(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function og(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r,i;return Object(qe.d)(this,function(o){switch(o.label){case 0:return[4,od((n=Ka(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Zp(n,e.targetId,i.To),i)]}})})}function sg(t){return Object(qe.b)(this,void 0,void 0,function(){var e;return Object(qe.d)(this,function(n){return[2,ad((e=Ka(t)).localStore).then(function(t){return ng(e,t)})]})})}function ag(t,e,n,r){return Object(qe.b)(this,void 0,void 0,function(){var i,o;return Object(qe.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Ka(t),r=Ka(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):jh.resolve(null)})})}((i=Ka(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,up(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Yp(i,e,r||null),$p(i,e),function(t,e){Ka(Ka(t)._n).Gt(e)}(i.localStore,e)):za(),s.label=4;case 4:return[4,ng(i,o)];case 5:return s.sent(),[3,7];case 6:Va("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function ug(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(qe.d)(this,function(c){switch(c.label){case 0:return pg(n=Ka(t)),gg(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,cg(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,gp(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)$d(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Jp(n,e),id(n.localStore,e,!0)}),Yd(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,cg(n,a)];case 5:return c.sent(),function(t){var e=Ka(t);e.Co.forEach(function(t,n){Yd(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new rl(bu.comparator)}(n),n.$o=!1,[4,gp(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function cg(t,e,n){return Object(qe.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(qe.d)(this,function(g){switch(g.label){case 0:n=Ka(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,rd(n.localStore,fc(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,og(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,sd(n.localStore,a)];case 8:return p=g.sent(),[4,rd(n.localStore,p)];case 9:return u=g.sent(),[4,Vp(n,lg(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function lg(t){return ic(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function hg(t){var e=Ka(t);return Ka(Ka(e.localStore).persistence).fn()}function fg(t,e,n,r){return Object(qe.b)(this,void 0,void 0,function(){var i,o,s;return Object(qe.d)(this,function(a){switch(a.label){case 0:return(i=Ka(t)).$o?(Va("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ad(i.localStore)];case 3:return o=a.sent(),s=ml.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,ng(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,id(i.localStore,e,!0)];case 6:return a.sent(),Jp(i,e,r),[3,8];case 7:za(),a.label=8;case 8:return[2]}})})}function dg(t,e,n){return Object(qe.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(qe.d)(this,function(f){switch(f.label){case 0:if(!(r=pg(t)).$o)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Va("SyncEngine","Adding an already active target "+s),[3,5]):[4,sd(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,rd(r.localStore,a)];case 3:return u=f.sent(),[4,Vp(r,lg(a),u.targetId,!1)];case 4:f.sent(),$d(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(qe.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,id(r.localStore,t,!1).then(function(){Yd(r.remoteStore,t),Jp(r,t)}).catch(Sf)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function pg(t){var e=Ka(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ig.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Wp.bind(null,e),e.vo._r=Ip.bind(null,e.eventManager),e.vo.Mo=kp.bind(null,e.eventManager),e}function gg(t){var e=Ka(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Kp.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Gp.bind(null,e),e}var yg=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(qe.b)(this,void 0,void 0,function(){return Object(qe.d)(this,function(e){switch(e.label){case 0:return this.R=Ud(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Yf(this.persistence,new Qf,t.initialUser,this.R)},t.prototype.qo=function(t){return new md(_d.bs,this.R)},t.prototype.Bo=function(t){return new Ad},t.prototype.terminate=function(){return Object(qe.b)(this,void 0,void 0,function(){return Object(qe.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),vg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(qe.c)(e,t),e.prototype.initialize=function(e){return Object(qe.b)(this,void 0,void 0,function(){var n=this;return Object(qe.d)(this,function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,ud(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,gg(this.Qo.syncEngine)];case 4:return r.sent(),[4,up(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He(function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()})];case 6:return r.sent(),[2]}})})},e.prototype.Ko=function(t){return Yf(this.persistence,new Qf,t.initialUser,this.R)},e.prototype.Uo=function(t){return new If(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=zf(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?hf.withCacheSize(this.cacheSizeBytes):hf.DEFAULT;return new qf(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Md(),Fd(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Ad},e}(yg),mg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(qe.c)(e,t),e.prototype.initialize=function(e){return Object(qe.b)(this,void 0,void 0,function(){var n,r=this;return Object(qe.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof jd?(this.sharedClientState.syncEngine={ui:ag.bind(null,n),ai:fg.bind(null,n),hi:dg.bind(null,n),fn:hg.bind(null,n),ci:sg.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(qe.b)(r,void 0,void 0,function(){return Object(qe.d)(this,function(e){switch(e.label){case 0:return[4,ug(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Md();if(!jd.yt(e))throw new Ma(La.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=zf(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new jd(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(vg),bg=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n=this;return Object(qe.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return zp(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=rg.bind(null,this.syncEngine),[4,gp(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Sp},t.prototype.createDatastore=function(t){var e=Ud(t.databaseInfo.databaseId),n=new Ld(t.databaseInfo);return function(t,e,n){return new zd(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return zp(s.syncEngine,t,0)},o=Nd.yt()?new Nd:new Rd,new Kd(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Fp(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(qe.b)(this,void 0,void 0,function(){var e;return Object(qe.d)(this,function(n){switch(n.label){case 0:return e=Ka(t),Va("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Qd(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),_g=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),wg=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new xh,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(qe.b)(this,void 0,void 0,function(){return Object(qe.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(qe.b)(this,void 0,void 0,function(){return Object(qe.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(qe.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(qe.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Ap(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(qe.b)(this,void 0,void 0,function(){var t,e;return Object(qe.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(qe.b)(this,void 0,void 0,function(){var e;return Object(qe.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(qe.b)(this,void 0,void 0,function(){var t,e;return Object(qe.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(qe.b)(this,void 0,void 0,function(){var e,n=this;return Object(qe.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ma(La.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(qe.d)(this,function(u){switch(u.label){case 0:return n=Ka(t),r=Vl(n.R)+"/documents",i={documents:e.map(function(t){return Ll(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Wa(!!e.found);var n=Ml(t,e.found.name),r=Nl(e.found.updateTime),i=new Pu({mapValue:{fields:e.found.fields}});return Lu.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Wa(!!e.missing),Wa(!!e.readTime);var n=Ml(t,e.missing),r=Nl(e.readTime);return Lu.newNoDocument(n,r)}(t,e):za()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Wa(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Xc(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(qe.b)(this,void 0,void 0,function(){var t,e=this;return Object(qe.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=bu.fromPath(n);e.mutations.push(new Zc(r,e.precondition(r)))}),[4,function(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r,i;return Object(qe.d)(this,function(o){switch(o.label){case 0:return n=Ka(t),r=Vl(n.R)+"/documents",i={writes:e.map(function(t){return zl(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw za();e=Za.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ma(La.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Mc.updateTime(e):Mc.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Za.min()))throw new Ma(La.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mc.updateTime(e)}return Mc.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Cg=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Vd(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(qe.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(qe.d)(this,function(r){return t=new wg(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!yu(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!el(e)}return!1},t}(),Og=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=wd.UNAUTHENTICATED,this.clientId=Qa.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return Object(qe.b)(r,void 0,void 0,function(){return Object(qe.d)(this,function(e){switch(e.label){case 0:return Va("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return Object(qe.b)(this,void 0,void 0,function(){return Object(qe.d)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Ma(La.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new xh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(qe.b)(t,void 0,void 0,function(){var t,n;return Object(qe.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=bp(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Sg(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(qe.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Va("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return Object(qe.b)(i,void 0,void 0,function(){return Object(qe.d)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Jf(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Tg(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r;return Object(qe.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Eg(t)];case 1:return n=i.sent(),Va("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return Object(qe.b)(this,void 0,void 0,function(){var n,r;return Object(qe.d)(this,function(i){switch(i.label){case 0:return(n=Ka(t)).asyncQueue.verifyOperationInProgress(),Va("RemoteStore","RemoteStore received new credentials"),r=ep(n),n.Or.add(3),[4,Qd(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Gd(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function Eg(t){return Object(qe.b)(this,void 0,void 0,function(){return Object(qe.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Va("FirestoreClient","Using default OfflineComponentProvider"),[4,Sg(t,new yg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Ig(t){return Object(qe.b)(this,void 0,void 0,function(){return Object(qe.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Va("FirestoreClient","Using default OnlineComponentProvider"),[4,Tg(t,new bg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function kg(t){return Eg(t).then(function(t){return t.persistence})}function xg(t){return Eg(t).then(function(t){return t.localStore})}function jg(t){return Ig(t).then(function(t){return t.remoteStore})}function Ag(t){return Ig(t).then(function(t){return t.syncEngine})}function Rg(t){return Object(qe.b)(this,void 0,void 0,function(){var e,n;return Object(qe.d)(this,function(r){switch(r.label){case 0:return[4,Ig(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Up.bind(null,e.syncEngine),n.onUnlisten=qp.bind(null,e.syncEngine),n)]}})})}function Ng(t,e,n){var r=this;void 0===n&&(n={});var i=new xh;return t.asyncQueue.enqueueAndForget(function(){return Object(qe.b)(r,void 0,void 0,function(){var r;return Object(qe.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new _g({next:function(o){e.enqueueAndForget(function(){return Ep(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ma(La.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ma(La.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new jp(oc(n.path),o,{includeMetadataChanges:!0,so:!0});return Tp(t,s)},[4,Rg(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Pg(t,e,n){var r=this;void 0===n&&(n={});var i=new xh;return t.asyncQueue.enqueueAndForget(function(){return Object(qe.b)(r,void 0,void 0,function(){var r;return Object(qe.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new _g({next:function(n){e.enqueueAndForget(function(){return Ep(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Ma(La.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new jp(n,o,{includeMetadataChanges:!0,so:!0});return Tp(t,s)},[4,Rg(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Dg=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},Lg=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Mg=new Map,Fg=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Ug=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(wd.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Vg=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),qg=function(){function t(t){var e=this;this.currentUser=wd.UNAUTHENTICATED,this.oc=new xh,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){Va("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Va("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Va("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Wa("string"==typeof n.accessToken),new Fg(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return Object(qe.b)(n,void 0,void 0,function(){return Object(qe.d)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Wa(null===t||"string"==typeof t),new wd(t)},t}(),Bg=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=wd.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Hg=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Bg(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(wd.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function zg(t,e,n){if(!n)throw new Ma(La.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Wg(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ma(La.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Kg(t,e,n,r){if(!0===e&&!0===r)throw new Ma(La.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Gg(t){if(!bu.isDocumentKey(t))throw new Ma(La.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Qg(t){if(bu.isDocumentKey(t))throw new Ma(La.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function $g(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":za()}function Yg(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ma(La.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=$g(t);throw new Ma(La.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Jg(t,e){if(e<=0)throw new Ma(La.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Xg=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ma(La.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ma(La.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Kg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Zg=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xg({}),this._settingsFrozen=!1,t instanceof Lg?(this._databaseId=t,this._credentials=new Ug):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ma(La.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lg(t.options.projectId)}(t),this._credentials=new qg(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Ma(La.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Ma(La.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xg(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Ug;switch(t.type){case"gapi":var e=t.client;return Wa(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Hg(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ma(La.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Mg.get(this))&&(Va("ComponentProvider","Removing Datastore"),Mg.delete(this),t.terminate()),Promise.resolve();var t},t}(),ty=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new ny(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),ey=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),ny=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,oc(r))||this)._path=r,i.type="collection",i}return Object(qe.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new ty(this.firestore,null,new bu(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(ey);function ry(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Be.o)(t),zg("collection","path",e),t instanceof Zg)return Qg(n=iu.fromString.apply(iu,Object(qe.f)([e],r))),new ny(t,null,n);if(!(t instanceof ty||t instanceof ny))throw new Ma(La.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Qg(n=iu.fromString.apply(iu,Object(qe.f)([t.path],r)).child(iu.fromString(e))),new ny(t.firestore,null,n)}function iy(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Be.o)(t),1===arguments.length&&(e=Qa.u()),zg("doc","path",e),t instanceof Zg)return Gg(n=iu.fromString.apply(iu,Object(qe.f)([e],r))),new ty(t,null,new bu(n));if(!(t instanceof ty||t instanceof ny))throw new Ma(La.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Gg(n=t._path.child(iu.fromString.apply(iu,Object(qe.f)([e],r)))),new ty(t.firestore,t instanceof ny?t.converter:null,new bu(n))}function oy(t,e){return t=Object(Be.o)(t),e=Object(Be.o)(e),(t instanceof ty||t instanceof ny)&&(e instanceof ty||e instanceof ny)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function sy(t,e){return t=Object(Be.o)(t),e=Object(Be.o)(e),t instanceof ey&&e instanceof ey&&t.firestore===e.firestore&&pc(t._query,e._query)&&t.converter===e.converter}var ay=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Vd(this,"async_queue_retry"),this.Ic=function(){var e=Fd();e&&Va("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Fd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Fd();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var n=new xh;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.bc()})},t.prototype.bc=function(){return Object(qe.b)(this,void 0,void 0,function(){var t,e=this;return Object(qe.d)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Dh(t=n.sent()))throw t;return Va("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.bc()}),n.label=5;case 5:return[2]}})})},t.prototype.Rc=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,qa("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=mp.createAndSchedule(this,t,e,n,function(t){return r.vc(t)});return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&za()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return Object(qe.b)(this,void 0,void 0,function(){var t;return Object(qe.d)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()})},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function uy(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new xh,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var cy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new ay,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(qe.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||hy(this),this._firestoreClient.terminate()},e}(Zg);function ly(t){return t._firestoreClient||hy(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function hy(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Dg(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Og(t._credentials,t._queue,r)}function fy(t,e,n){var r=this,i=new xh;return t.asyncQueue.enqueue(function(){return Object(qe.b)(r,void 0,void 0,function(){var r;return Object(qe.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Sg(t,n)];case 1:return o.sent(),[4,Tg(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===La.FAILED_PRECONDITION||t.code===La.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function dy(t){if(t._initialized||t._terminated)throw new Ma(La.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var py=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ma(La.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new su(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),gy=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(uu.fromBase64String(e))}catch(e){throw new Ma(La.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(uu.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),yy=function(t){this._methodName=t},vy=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ma(La.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ma(La.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return $a(this._lat,t._lat)||$a(this._long,t._long)},t}(),my=/^__.*__$/,by=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Kc(t,this.data,this.fieldMask,e,this.fieldTransforms):new Wc(t,this.data,e,this.fieldTransforms)},t}(),_y=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Kc(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function wy(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw za()}}var Cy=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return By(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(wy(this.Nc)&&my.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),Oy=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Ud(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new Cy({Nc:t,methodName:e,qc:n,path:su.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Sy(t){var e=t._freezeSettings(),n=Ud(t._databaseId);return new Oy(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ty(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Fy("Data must be an object, but it was:",s,r);var a,u,c=Ly(r,s);if(o.merge)a=new au(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Uy(e,f[h],n);if(!s.contains(d))throw new Ma(La.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Hy(l,d)||l.push(d)}a=new au(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new by(new Pu(c),a,u)}var Ey=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qe.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw t.Lc(1===t.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(yy);function Iy(t,e,n){return new Cy({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var ky=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qe.c)(e,t),e.prototype._toFieldTransform=function(t){return new Dc(t.path,new Ic)},e.prototype.isEqual=function(t){return t instanceof e},e}(yy),xy=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(qe.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Iy(this,t,!0),n=this.Kc.map(function(t){return Dy(t,e)}),r=new kc(n);return new Dc(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(yy),jy=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(qe.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Iy(this,t,!0),n=this.Kc.map(function(t){return Dy(t,e)}),r=new jc(n);return new Dc(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(yy),Ay=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return Object(qe.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Rc(t.R,Cc(t.R,this.Qc));return new Dc(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(yy);function Ry(t,e,n,r){var i=t.Uc(1,e,n);Fy("Data must be an object, but it was:",i,r);var o=[],s=Pu.empty();eu(r,function(t,r){var a=qy(e,t,n);r=Object(Be.o)(r);var u=i.Oc(a);if(r instanceof Ey)o.push(a);else{var c=Dy(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new au(o);return new _y(s,a,i.fieldTransforms)}function Ny(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[Uy(e,r,n)],u=[i];if(o.length%2!=0)throw new Ma(La.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Uy(e,o[c])),u.push(o[c+1]);for(var l=[],h=Pu.empty(),f=a.length-1;f>=0;--f)if(!Hy(l,a[f])){var d=a[f],p=u[f];p=Object(Be.o)(p);var g=s.Oc(d);if(p instanceof Ey)l.push(d);else{var y=Dy(p,g);null!=y&&(l.push(d),h.set(d,y))}}var v=new au(l);return new _y(h,v,s.fieldTransforms)}function Py(t,e,n,r){return void 0===r&&(r=!1),Dy(n,t.Uc(r?4:3,e))}function Dy(t,e){if(My(t=Object(Be.o)(t)))return Fy("Unsupported field value:",e,t),Ly(t,e);if(t instanceof yy)return function(t,e){if(!wy(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Dy(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(Be.o)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Cc(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Xa.fromDate(t);return{timestampValue:jl(e.R,n)}}if(t instanceof Xa)return n=new Xa(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:jl(e.R,n)};if(t instanceof vy)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof gy)return{bytesValue:Al(e.R,t._byteString)};if(t instanceof ty){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Pl(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+$g(t))}(t,e)}function Ly(t,e){var n={};return nu(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eu(t,function(t,r){var i=Dy(r,e.kc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function My(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Xa||t instanceof vy||t instanceof gy||t instanceof ty||t instanceof yy)}function Fy(t,e,n){if(!My(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=$g(n);throw e.Lc("an object"===r?t+" a custom object":t+" "+r)}}function Uy(t,e,n){if((e=Object(Be.o)(e))instanceof py)return e._internalPath;if("string"==typeof e)return qy(t,e);throw By("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Vy=new RegExp("[~\\*/\\[\\]]");function qy(t,e,n){if(e.search(Vy)>=0)throw By("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(py.bind.apply(py,Object(qe.f)([void 0],e.split(".")))))._internalPath}catch(Hv){throw By("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function By(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Ma(La.INVALID_ARGUMENT,(a+=". ")+t+u)}function Hy(t,e){return t.some(function(t){return t.isEqual(e)})}var zy=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ty(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Wy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Ky("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Wy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qe.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(zy);function Ky(t,e){return"string"==typeof e?qy(t,e):e instanceof py?e._internalPath:e._delegate._internalPath}var Gy=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Qy=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(qe.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new $y(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Ky("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(zy),$y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qe.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Qy),Yy=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Gy(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new $y(n._firestore,n._userDataWriter,r.key,r,new Gy(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ma(La.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new $y(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Gy(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new $y(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Gy(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Jy(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Jy(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return za()}}function Xy(t,e){return t instanceof Qy&&e instanceof Qy?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Yy&&e instanceof Yy&&t._firestore===e._firestore&&sy(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Zy(t){if(ac(t)&&0===t.explicitOrderBy.length)throw new Ma(La.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var tv=function(){};function ev(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var nv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return Object(qe.c)(e,t),e.prototype._apply=function(t){var e=Sy(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ma(La.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){cv(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(uv(r,t,l[c]));a={arrayValue:{values:u}}}else a=uv(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||cv(s,o),a=Py(n,"where",s,"in"===o||"not-in"===o);var h=Bu.create(i,o,a);return function(t,e){if(e.g()){var n=cc(t);if(null!==n&&!n.isEqual(e.field))throw new Ma(La.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=uc(t);null!==r&&lv(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Ma(La.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new ey(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new rc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(tv),rv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return Object(qe.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ma(La.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ma(La.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Zu(e,n);return function(t,e){if(null===uc(t)){var n=cc(t);null!==n&&lv(0,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new ey(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new rc(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(tv),iv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(qe.c)(e,t),e.prototype._apply=function(t){return new ey(t.firestore,t.converter,dc(t._query,this.Hc,this.Jc))},e}(tv),ov=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Object(qe.c)(e,t),e.prototype._apply=function(t){var e=av(t,this.type,this.Yc,this.Xc);return new ey(t.firestore,t.converter,function(t,e){return new rc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(tv),sv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Object(qe.c)(e,t),e.prototype._apply=function(t){var e=av(t,this.type,this.Yc,this.Xc);return new ey(t.firestore,t.converter,function(t,e){return new rc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(tv);function av(t,e,n,r){if(n[0]=Object(Be.o)(n[0]),n[0]instanceof zy)return function(t,e,n,r,i){if(!r)throw new Ma(La.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=hc(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Iu(e,r.key));else{var c=r.data.field(u.field);if(du(c))throw new Ma(La.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Ma(La.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Ju(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Sy(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Ma(La.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Ma(La.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!lc(t)&&-1!==c.indexOf("/"))throw new Ma(La.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(iu.fromString(c));if(!bu.isDocumentKey(l))throw new Ma(La.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new bu(l);a.push(Iu(e,h))}else{var f=Py(n,r,c);a.push(f)}}return new Ju(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function uv(t,e,n){if("string"==typeof(n=Object(Be.o)(n))){if(""===n)throw new Ma(La.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!lc(e)&&-1!==n.indexOf("/"))throw new Ma(La.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(iu.fromString(n));if(!bu.isDocumentKey(r))throw new Ma(La.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Iu(t,new bu(r))}if(n instanceof ty)return Iu(t,n._key);throw new Ma(La.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+$g(n)+".")}function cv(t,e){if(!Array.isArray(t)||0===t.length)throw new Ma(La.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ma(La.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function lv(t,e,n){if(!n.isEqual(e))throw new Ma(La.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var hv=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),_u(t)){case 0:return null;case 1:return t.booleanValue;case 2:return hu(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(fu(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw za()}},t.prototype.convertObject=function(t,e){var n=this,r={};return eu(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new vy(hu(t.latitude),hu(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=pu(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(gu(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=lu(t);return new Xa(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=iu.fromString(t);Wa(oh(n));var r=new Lg(n.get(1),n.get(3)),i=new bu(n.popFirst(5));return r.isEqual(e)||qa("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function fv(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var dv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(qe.c)(e,t),e.prototype.convertBytes=function(t){return new gy(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new ty(this.firestore,null,e)},e}(hv),pv=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Sy(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=gv(t,this._firestore),i=fv(r.converter,e,n),o=Ty(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Mc.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=gv(t,this._firestore);return o="string"==typeof(e=Object(Be.o)(e))||e instanceof py?Ny(this._dataReader,"WriteBatch.update",s._key,e,n,r):Ry(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Mc.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=gv(t,this._firestore);return this._mutations=this._mutations.concat(new Xc(e._key,Mc.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Ma(La.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function gv(t,e){if((t=Object(Be.o)(t)).firestore!==e)throw new Ma(La.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var yv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(qe.c)(e,t),e.prototype.convertBytes=function(t){return new gy(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new ty(this.firestore,null,e)},e}(hv);function vv(t,e,n){t=Yg(t,ty);var r=Yg(t.firestore,cy),i=fv(t.converter,e,n);return _v(r,[Ty(Sy(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Mc.none())])}function mv(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Yg(t,ty);var o=Yg(t.firestore,cy),s=Sy(o);return _v(o,[("string"==typeof(e=Object(Be.o)(e))||e instanceof py?Ny(s,"updateDoc",t._key,e,n,r):Ry(s,"updateDoc",t._key,e)).toMutation(t._key,Mc.exists(!0))])}function bv(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(Be.o)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||uy(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(uy(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof ty)c=Yg(t.firestore,cy),l=oc(t._key.path),u={next:function(e){i[a]&&i[a](wv(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=Yg(t,ey);c=Yg(d.firestore,cy),l=d._query;var p=new yv(c);u={next:function(t){i[a]&&i[a](new Yy(c,p,d,t))},error:i[a+1],complete:i[a+2]},Zy(t._query)}return function(t,e,n,r){var i=this,o=new _g(r),s=new jp(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(qe.b)(i,void 0,void 0,function(){var e;return Object(qe.d)(this,function(n){switch(n.label){case 0:return e=Tp,[4,Rg(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(qe.b)(i,void 0,void 0,function(){var e;return Object(qe.d)(this,function(n){switch(n.label){case 0:return e=Ep,[4,Rg(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(ly(c),l,h,u)}function _v(t,e){return function(t,e){var n=this,r=new xh;return t.asyncQueue.enqueueAndForget(function(){return Object(qe.b)(n,void 0,void 0,function(){var n;return Object(qe.d)(this,function(i){switch(i.label){case 0:return n=Bp,[4,Ag(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(ly(t),e)}function wv(t,e,n){var r=n.docs.get(e._key),i=new yv(t);return new Qy(t,i,e._key,r,new Gy(n.hasPendingWrites,n.fromCache),e.converter)}var Cv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(qe.c)(e,t),e.prototype.get=function(e){var n=this,r=gv(e,this._firestore),i=new yv(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Qy(n._firestore,i,r._key,t._document,new Gy(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Sy(t)}return t.prototype.get=function(t){var e=this,n=gv(t,this._firestore),r=new dv(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return za();var i=t[0];if(i.isFoundDocument())return new zy(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new zy(e._firestore,r,n._key,null,n.converter);throw za()})},t.prototype.set=function(t,e,n){var r=gv(t,this._firestore),i=fv(r.converter,e,n),o=Ty(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=gv(t,this._firestore);return o="string"==typeof(e=Object(Be.o)(e))||e instanceof py?Ny(this._dataReader,"Transaction.update",s._key,e,n,r):Ry(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=gv(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Ov(){if("undefined"==typeof Uint8Array)throw new Ma(La.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Sv(){if("undefined"==typeof atob)throw new Ma(La.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Tv=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Sv(),new t(gy.fromBase64String(e))},t.fromUint8Array=function(e){return Ov(),new t(gy.fromUint8Array(e))},t.prototype.toBase64=function(){return Sv(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Ov(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Ev=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){dy(t=Yg(t,cy));var n=ly(t),r=t._freezeSettings(),i=new bg;return fy(n,i,new vg(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){dy(t=Yg(t,cy));var e=ly(t),n=t._freezeSettings(),r=new bg;return fy(e,r,new mg(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Ma(La.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new xh;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(qe.b)(e,void 0,void 0,function(){var e;return Object(qe.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(qe.b)(this,void 0,void 0,function(){return Object(qe.d)(this,function(e){switch(e.label){case 0:return Rh.yt()?[4,Rh.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(zf(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Iv=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Lg||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Ba("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var o=(t=Yg(t,Zg))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Ba("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s,a;if("string"==typeof r.mockUserToken)s=r.mockUserToken,a=wd.MOCK_USER;else{s=Object(Be.j)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Ma(La.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new wd(u)}t._credentials=new Vg(new Fg(s,a))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(qe.b)(e,void 0,void 0,function(){var e,n;return Object(qe.d)(this,function(r){switch(r.label){case 0:return[4,kg(t)];case 1:return e=r.sent(),[4,jg(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Ka(t);return e.Or.delete(0),Gd(e)}(n))]}})})})}(ly(Yg(this._delegate,cy)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(qe.b)(e,void 0,void 0,function(){var e,n;return Object(qe.d)(this,function(r){switch(r.label){case 0:return[4,kg(t)];case 1:return e=r.sent(),[4,jg(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(qe.b)(this,void 0,void 0,function(){var e;return Object(qe.d)(this,function(n){switch(n.label){case 0:return(e=Ka(t)).Or.add(0),[4,Qd(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(ly(Yg(this._delegate,cy)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Kg("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new xh;return t.asyncQueue.enqueueAndForget(function(){return Object(qe.b)(e,void 0,void 0,function(){var e;return Object(qe.d)(this,function(r){switch(r.label){case 0:return e=Qp,[4,Ag(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(ly(Yg(this._delegate,cy)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new _g(e);return t.asyncQueue.enqueueAndForget(function(){return Object(qe.b)(n,void 0,void 0,function(){var e;return Object(qe.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Ka(t).Gr.add(e),e.next()},[4,Rg(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(qe.b)(n,void 0,void 0,function(){var e;return Object(qe.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Ka(t).Gr.delete(e)},[4,Rg(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(ly(t=Yg(t,cy)),uy(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Ma(La.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new qv(this,ry(this._delegate,t))}catch(t){throw Nv(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Rv(this,iy(this._delegate,t))}catch(t){throw Nv(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Fv(this,function(t,e){if(t=Yg(t,Zg),zg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ma(La.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ey(t,null,function(t){return new rc(iu.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Nv(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new xh;return t.asyncQueue.enqueueAndForget(function(){return Object(qe.b)(n,void 0,void 0,function(){var n;return Object(qe.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Ig(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Cg(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(ly(t),function(n){return e(new Cv(t,n))})}(this._delegate,function(n){return t(new xv(e,n))})},t.prototype.batch=function(){var t=this;return ly(this._delegate),new jv(new pv(this._delegate,function(e){return _v(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Ma(La.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Ma(La.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),kv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(qe.c)(e,t),e.prototype.convertBytes=function(t){return new Tv(new gy(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Rv.eu(e,this.firestore,null)},e}(hv),xv=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new kv(t)}return t.prototype.get=function(t){var e=this,n=Bv(t);return this._delegate.get(n).then(function(t){return new Lv(e._firestore,new Qy(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=Bv(t);return n?(Wg("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Bv(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(qe.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Bv(t);return this._delegate.delete(e),this},t}(),jv=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Bv(t);return n?(Wg("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Bv(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(qe.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Bv(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Av=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new $y(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Mv(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new kv(e),n),i.set(n,o)),o},t}();Av.su=new WeakMap;var Rv=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new kv(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Ma(La.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new ty(n._delegate,r,new bu(e)))},t.eu=function(e,n,r){return new t(n,new ty(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new qv(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new qv(this.firestore,ry(this._delegate,t))}catch(t){throw Nv(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(Be.o)(t))instanceof ty&&oy(this._delegate,t)},t.prototype.set=function(t,e){e=Wg("DocumentReference.set",e);try{return e?vv(this._delegate,t,e):vv(this._delegate,t)}catch(t){throw Nv(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?mv(this._delegate,t):mv.apply(void 0,Object(qe.f)([this._delegate,t,e],n))}catch(t){throw Nv(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return _v(Yg((t=this._delegate).firestore,cy),[new Xc(t._key,Mc.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Pv(e),i=Dv(e,function(e){return new Lv(t.firestore,new Qy(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return bv(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Yg(t,ty);var e=Yg(t.firestore,cy),n=ly(e),r=new yv(e);return function(t,e){var n=this,r=new xh;return t.asyncQueue.enqueueAndForget(function(){return Object(qe.b)(n,void 0,void 0,function(){var n;return Object(qe.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(qe.b)(this,void 0,void 0,function(){var r,i;return Object(qe.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Ka(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Ma(La.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=bp(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,xg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Qy(e,r,t._key,n,new Gy(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Yg(t,ty);var e=Yg(t.firestore,cy);return Ng(ly(e),t._key,{source:"server"}).then(function(n){return wv(e,t,n)})}(this._delegate):function(t){t=Yg(t,ty);var e=Yg(t.firestore,cy);return Ng(ly(e),t._key).then(function(n){return wv(e,t,n)})}(this._delegate)).then(function(t){return new Lv(e.firestore,new Qy(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Av.nu(this.firestore,e):null))},t}();function Nv(t,e,n){return t.message=t.message.replace(e,n),t}function Pv(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!uy(r))return r}return{}}function Dv(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=uy(t[0])?t[0]:uy(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Lv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Rv(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Xy(this._delegate,t._delegate)},t}(),Mv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qe.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Lv),Fv=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new kv(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,ev(this._delegate,function(t,e,n){var r=e,i=Ky("where",t);return new nv(i,r,n)}(e,n,r)))}catch(e){throw Nv(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,ev(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Ky("orderBy",t);return new rv(r,n)}(e,n)))}catch(e){throw Nv(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,ev(this._delegate,function(t){return Jg("limit",t),new iv("limit",t,"F")}(e)))}catch(e){throw Nv(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,ev(this._delegate,function(t){return Jg("limitToLast",t),new iv("limitToLast",t,"L")}(e)))}catch(e){throw Nv(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ev(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ov("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Nv(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ev(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ov("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Nv(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ev(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sv("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Nv(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ev(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sv("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Nv(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return sy(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Yg(t,ey);var e=Yg(t.firestore,cy),n=ly(e),r=new yv(e);return function(t,e){var n=this,r=new xh;return t.asyncQueue.enqueueAndForget(function(){return Object(qe.b)(n,void 0,void 0,function(){var n;return Object(qe.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(qe.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(qe.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,od(t,e,!0)];case 1:return a=u.sent(),r=new Dp(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=bp(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,xg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Yy(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Yg(t,ey);var e=Yg(t.firestore,cy),n=ly(e),r=new yv(e);return Pg(n,t._query,{source:"server"}).then(function(n){return new Yy(e,r,t,n)})}(this._delegate):function(t){t=Yg(t,ey);var e=Yg(t.firestore,cy),n=ly(e),r=new yv(e);return Zy(t._query),Pg(n,t._query).then(function(n){return new Yy(e,r,t,n)})}(this._delegate)).then(function(t){return new Vv(e.firestore,new Yy(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Pv(e),i=Dv(e,function(e){return new Vv(t.firestore,new Yy(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return bv(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Av.nu(this.firestore,e):null))},t}(),Uv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Mv(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Vv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Fv(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Mv(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Uv(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Mv(n._firestore,r))})},t.prototype.isEqual=function(t){return Xy(this._delegate,t._delegate)},t}(),qv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(qe.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Rv(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Rv(this.firestore,void 0===t?iy(this._delegate):iy(this._delegate,t))}catch(t){throw Nv(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Yg(t.firestore,cy),r=iy(t),i=fv(t.converter,e);return _v(n,[Ty(Sy(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Mc.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Rv(e.firestore,t)})},e.prototype.isEqual=function(t){return oy(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Av.nu(this.firestore,t):null))},e}(Fv);function Bv(t){return Yg(t,ty)}var Hv,zv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(py.bind.apply(py,Object(qe.f)([void 0],t)))}return t.documentId=function(){return new t(su.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(Be.o)(t))instanceof py&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Wv=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new ky("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Ey("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xy("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new jy("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Ay("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Kv={Firestore:Iv,GeoPoint:vy,Timestamp:Xa,Blob:Tv,Transaction:xv,WriteBatch:jv,DocumentReference:Rv,DocumentSnapshot:Lv,Query:Fv,QueryDocumentSnapshot:Mv,QuerySnapshot:Vv,CollectionReference:qv,FieldPath:zv,FieldValue:Wv,setLogLevel:function(t){Fa.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function Gv(t,e){return function(t,e=ft.b){return new dt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Qv(t,e){return Gv(t,e).pipe(Object(yt.a)(t=>({payload:t,type:"query"})))}function $v(t,e){return Qv(t,e).pipe(Cr(void 0),Or(),Object(yt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Yv(t,e,n){return $v(t,n).pipe(St((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Jv(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Jv(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Jv(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),It(),Object(yt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Jv(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Xv(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new He.a("firestore",function(t){return function(t,e){return new Iv(t,new cy(t,e),new Ev)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Kv)))})(Hv=Ve.a),Hv.registerVersion("@firebase/firestore","2.4.1");class Zv{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=$v(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(yt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Cr(void 0),Or(),Qt(([t,e])=>e.length>0||!t),Object(yt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(St((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Xv(t);return Yv(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Qv(this.query,this.afs.schedulers.outsideAngular).pipe(Object(yt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(mt.a)(this.query.get(t)).pipe(Object(Ut.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new tm(this.ref.doc(t),this.afs)}}class tm{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=sm(n,e);return new Zv(r,i,this.afs)}snapshotChanges(){return Gv(this.ref,this.afs.schedulers.outsideAngular).pipe(Cr(void 0),Or(),Object(yt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(yt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(mt.a)(this.ref.get(t)).pipe(Object(Ut.b)(this.afs.schedulers.insideAngular))}}class em{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?$v(this.query,this.afs.schedulers.outsideAngular).pipe(Object(yt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Qt(t=>t.length>0),this.afs.keepUnstableUntilFirst):$v(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(St((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Xv(t);return Yv(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Qv(this.query,this.afs.schedulers.outsideAngular).pipe(Object(yt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(mt.a)(this.query.get(t)).pipe(Object(Ut.b)(this.afs.schedulers.insideAngular))}}const nm=new r.r("angularfire2.enableFirestorePersistence"),rm=new r.r("angularfire2.firestore.persistenceSettings"),im=new r.r("angularfire2.firestore.settings"),om=new r.r("angularfire2.firestore.use-emulator");function sm(t,e=(t=>t)){return{query:e(t),ref:t}}let am=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new ht.d(o),this.keepUnstableUntilFirst=Object(ht.h)(this.schedulers);const c=Object(ht.g)(t,o,e);!_e.a.auth&&u&&Object(ht.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(ht.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!R(i)){const e=()=>{try{return Object(mt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Hv){return"undefined"!=typeof console&&console.warn(Hv),Object(pt.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(pt.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=sm(n,e),o=this.schedulers.ngZone.run(()=>r);return new Zv(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new em(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new tm(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ht.c),r.Rb(ht.b,8),r.Rb(nm,8),r.Rb(im,8),r.Rb(r.C),r.Rb(r.A),r.Rb(rm,8),r.Rb(om,8),r.Rb(de,8))},t.\u0275prov=r.Gb({factory:function(){return new t(r.Rb(ht.c),r.Rb(ht.b,8),r.Rb(nm,8),r.Rb(im,8),r.Rb(r.C),r.Rb(r.A),r.Rb(rm,8),r.Rb(om,8),r.Rb(de,8))},token:t,providedIn:"any"}),t})(),um=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:nm,useValue:!0},{provide:rm,useValue:e}]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[am]}),t})();const cm={apiKey:"AIzaSyDranJ0K4-dt9G8rchTh12bFVWZRB5ogcU",authDomain:"security-a9f69.firebaseapp.com",projectId:"security-a9f69",storageBucket:"security-a9f69.appspot.com",messagingSenderId:"326306539072",appId:"1:326306539072:web:1bf5f1f0ce1106ee7ea1a5"};class lm extends Ft.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Bt.a;return this._value}next(t){super.next(this._value=t)}}var hm=n("DH7j"),fm=n("yCtX");const dm={};class pm{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new gm(t,this.resultSelector))}}class gm extends jt{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(dm),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Nt(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===dm?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function ym(t){return new dt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(mt.a)(n):Object(Xt.b)()).subscribe(e)})}function vm(t){return function(e){const n=new mm(t),r=e.lift(n);return n.caught=r}}class mm{constructor(t){this.selector=t}call(t,e){return e.subscribe(new bm(t,this.selector,this.caught))}}class bm extends bt.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new bt.a(this);this.add(r);const i=Object(bt.c)(n,r);i!==r&&this.add(i)}}}var _m=n("5+tZ");function wm(t,e){return Object(_m.a)(t,e,1)}function Cm(t){return function(e){return 0===t?Object(Xt.b)():e.lift(new Om(t))}}class Om{constructor(t){if(this.total=t,this.total<0)throw new Jt}call(t,e){return e.subscribe(new Sm(t,this.total))}}class Sm extends Ot.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var Tm=n("vkgz");class Em{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Im(t,this.callback))}}class Im extends Ot.a{constructor(t,e){super(t),this.add(new qt.a(e))}}class km{constructor(t,e){this.id=t,this.url=e}}class xm extends km{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class jm extends km{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Am extends km{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Rm extends km{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Nm extends km{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pm extends km{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dm extends km{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Lm extends km{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mm extends km{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fm{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Um{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Vm{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qm{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bm{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hm{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zm{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Wm="primary";class Km{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Gm(t){return new Km(t)}function Qm(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function $m(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ym(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Jm(t[i],e[i]))return!1;return!0}function Jm(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Xm(t){return Array.prototype.concat.apply([],t)}function Zm(t){return t.length>0?t[t.length-1]:null}function tb(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function eb(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(mt.a)(Promise.resolve(t)):Object(pt.a)(t)}function nb(t,e,n){return n?function(t,e){return Ym(t,e)}(t.queryParams,e.queryParams)&&rb(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Jm(t[n],e[n]))}(t.queryParams,e.queryParams)&&ib(t.root,e.root)}function rb(t,e){if(!cb(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!rb(t.children[n],e.children[n]))return!1}return!0}function ib(t,e){return ob(t,e,e.segments)}function ob(t,e,n){if(t.segments.length>n.length)return!!cb(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!cb(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!ib(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!cb(t.segments,r)&&!!t.children.primary&&ob(t.children.primary,e,i)}}class sb{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gm(this.queryParams)),this._queryParamMap}toString(){return fb.serialize(this)}}class ab{constructor(t,e){this.segments=t,this.children=e,this.parent=null,tb(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return db(this)}}class ub{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Gm(this.parameters)),this._parameterMap}toString(){return _b(this)}}function cb(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class lb{}class hb{parse(t){const e=new Tb(t);return new sb(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${pb(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${yb(e)}=${yb(t)}`).join("&"):`${yb(e)}=${yb(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const fb=new hb;function db(t){return t.segments.map(t=>_b(t)).join("/")}function pb(t,e){if(!t.hasChildren())return db(t);if(e){const e=t.children.primary?pb(t.children.primary,!1):"",n=[];return tb(t.children,(t,e)=>{e!==Wm&&n.push(`${e}:${pb(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return tb(t.children,(t,r)=>{r===Wm&&(n=n.concat(e(t,r)))}),tb(t.children,(t,r)=>{r!==Wm&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Wm?[pb(t.children.primary,!1)]:[`${n}:${pb(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${db(t)}/${e[0]}`:`${db(t)}/(${e.join("//")})`}}function gb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yb(t){return gb(t).replace(/%3B/gi,";")}function vb(t){return gb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mb(t){return decodeURIComponent(t)}function bb(t){return mb(t.replace(/\+/g,"%20"))}function _b(t){return`${vb(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${vb(t)}=${vb(e[t])}`).join("")}`;var e}const wb=/^[^\/()?;=#]+/;function Cb(t){const e=t.match(wb);return e?e[0]:""}const Ob=/^[^=?&#]+/,Sb=/^[^?&#]+/;class Tb{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ab([],{}):new ab([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new ab(t,e)),n}parseSegment(){const t=Cb(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new ub(mb(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Cb(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Cb(this.remaining);t&&(n=t,this.capture(n))}t[mb(e)]=mb(n)}parseQueryParam(t){const e=function(t){const e=t.match(Ob);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Sb);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=bb(e),i=bb(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Cb(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Wm);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new ab([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Eb{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Ib(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Ib(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=kb(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return kb(t,this._root).map(t=>t.value)}}function Ib(t,e){if(t===e.value)return e;for(const n of e.children){const e=Ib(t,n);if(e)return e}return null}function kb(t,e){if(t===e.value)return[e];for(const n of e.children){const r=kb(t,n);if(r.length)return r.unshift(e),r}return[]}class xb{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function jb(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Ab extends Eb{constructor(t,e){super(t),this.snapshot=e,Mb(this,t)}toString(){return this.snapshot.toString()}}function Rb(t,e){const n=function(t,e){const n=new Db([],{},{},"",{},Wm,e,null,t.root,-1,{});return new Lb("",new xb(n,[]))}(t,e),r=new lm([new ub("",{})]),i=new lm({}),o=new lm({}),s=new lm({}),a=new lm(""),u=new Nb(r,i,s,a,o,Wm,e,n.root);return u.snapshot=n.root,new Ab(new xb(u,[]),n)}class Nb{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(yt.a)(t=>Gm(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(yt.a)(t=>Gm(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Pb(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Db{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Gm(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gm(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Lb extends Eb{constructor(t,e){super(e),this.url=t,Mb(this,e)}toString(){return Fb(this._root)}}function Mb(t,e){e.value._routerState=t,e.children.forEach(e=>Mb(t,e))}function Fb(t){const e=t.children.length>0?` { ${t.children.map(Fb).join(", ")} } `:"";return`${t.value}${e}`}function Ub(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ym(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Ym(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ym(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Ym(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Vb(t,e){return Ym(t.params,e.params)&&function(t,e){return cb(t,e)&&t.every((t,n)=>Ym(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Vb(t.parent,e.parent))}function qb(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return qb(t,e,r);return qb(t,e)})}(t,e,n);return new xb(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return Bb(e,t),t}{const n=new Nb(new lm((r=e.value).url),new lm(r.params),new lm(r.queryParams),new lm(r.fragment),new lm(r.data),r.outlet,r.component,r),i=e.children.map(e=>qb(t,e));return new xb(n,i)}}var r}function Bb(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Bb(t.children[n],e.children[n])}function Hb(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function zb(t){return"object"==typeof t&&null!=t&&t.outlets}function Wb(t,e,n,r,i){let o={};return r&&tb(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new sb(n.root===t?e:Kb(n.root,t,e),o,i)}function Kb(t,e,n){const r={};return tb(t.children,(t,i)=>{r[i]=t===e?n:Kb(t,e,n)}),new ab(t.segments,r)}class Gb{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Hb(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(zb);if(r&&r!==Zm(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Qb{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function $b(t,e,n){if(t||(t=new ab([],{})),0===t.segments.length&&t.hasChildren())return Yb(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(zb(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!t_(a,u,e))return o;r+=2}else{if(!t_(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new ab(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new ab(t.segments.slice(r.pathIndex),t.children),Yb(e,0,i)}return r.match&&0===i.length?new ab(t.segments,{}):r.match&&!t.hasChildren()?Jb(t,e,n):r.match?Yb(t,0,i):Jb(t,e,n)}function Yb(t,e,n){if(0===n.length)return new ab(t.segments,{});{const r=function(t){return zb(t[0])?t[0].outlets:{[Wm]:t}}(n),i={};return tb(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=$b(t.children[r],e,n))}),tb(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new ab(t.segments,i)}}function Jb(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(zb(o)){const t=Xb(o.outlets);return new ab(r,t)}if(0===i&&Hb(n[0])){r.push(new ub(t.segments[e].path,Zb(n[0]))),i++;continue}const s=zb(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Hb(a)?(r.push(new ub(s,Zb(a))),i+=2):(r.push(new ub(s,{})),i++)}return new ab(r,{})}function Xb(t){const e={};return tb(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Jb(new ab([],{}),0,t))}),e}function Zb(t){const e={};return tb(t,(t,n)=>e[n]=`${t}`),e}function t_(t,e,n){return t==n.path&&Ym(e,n.parameters)}class e_{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Ub(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=jb(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),tb(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=jb(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=jb(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Hm(t.value.snapshot))}),t.children.length&&this.forwardEvent(new qm(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Ub(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),n_(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function n_(t){Ub(t.value),t.children.forEach(n_)}class r_{constructor(t,e){this.routes=t,this.module=e}}function i_(t){return"function"==typeof t}function o_(t){return t instanceof sb}const s_=Symbol("INITIAL_VALUE");function a_(){return _t(t=>function(...t){let e,n;return Object(wr.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(hm.a)(t[0])&&(t=t[0]),Object(fm.a)(t,n).lift(new pm(e))}(t.map(t=>t.pipe(Zt(1),Cr(s_)))).pipe(St((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==s_)return t;if(r===s_&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||o_(r))return r}return t},t)},s_),Qt(t=>t!==s_),Object(yt.a)(t=>o_(t)?t:!0===t),Zt(1)))}let u_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Lb(0,"router-outlet")},directives:function(){return[ew]},encapsulation:2}),t})();function c_(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];l_(r,h_(e,r))}}function l_(t,e){t.children&&c_(t.children,e)}function h_(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function f_(t){const e=t.children&&t.children.map(f_),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Wm&&(n.component=u_),n}function d_(t){return t.outlet||Wm}function p_(t,e){const n=t.filter(t=>d_(t)===e);return n.push(...t.filter(t=>d_(t)!==e)),n}const g_={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function y_(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},g_):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||$m)(n,t,e);if(!i)return Object.assign({},g_);const o={};tb(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function v_(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>m_(t,e,n)&&d_(n)!==Wm)}(t,n,r)){const i=new ab(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&d_(o)!==Wm){const n=new ab([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[d_(o)]=n}return i}(t,e,r,new ab(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>m_(t,e,n))}(t,n,r)){const o=new ab(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(m_(t,n,a)&&!i[d_(a)]){const n=new ab([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[d_(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new ab(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function m_(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function b_(t,e,n,r){return!!(d_(t)===r||r!==Wm&&m_(e,n,t))&&("**"===t.path||y_(e,t,n).matched)}function __(t,e,n){return 0===e.length&&!t.children[n]}class w_{constructor(t){this.segmentGroup=t||null}}class C_{constructor(t){this.urlTree=t}}function O_(t){return new dt.a(e=>e.error(new w_(t)))}function S_(t){return new dt.a(e=>e.error(new C_(t)))}function T_(t){return new dt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class E_{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=v_(this.urlTree.root,[],[],this.config).segmentGroup,e=new ab(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Wm).pipe(Object(yt.a)(t=>this.createUrlTree(I_(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(vm(t=>{if(t instanceof C_)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof w_)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Wm).pipe(Object(yt.a)(e=>this.createUrlTree(I_(e),t.queryParams,t.fragment))).pipe(vm(t=>{if(t instanceof w_)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new ab([],{[Wm]:t}):t;return new sb(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(yt.a)(t=>new ab([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(mt.a)(r).pipe(wm(r=>{const i=n.children[r],o=p_(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(yt.a)(t=>({segment:t,outlet:r})))}),St((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Qt((e,n)=>t(e,n,r)):ce.a,Cm(1),n?ne(e):oe(()=>new Gt))}())}expandSegment(t,e,n,r,i,o){return Object(mt.a)(n).pipe(wm(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(vm(t=>{if(t instanceof w_)return Object(pt.a)(null);throw t}))),le(t=>!!t),vm((t,n)=>{if(t instanceof Gt||"EmptyError"===t.name){if(__(e,r,i))return Object(pt.a)(new ab([],{}));throw new w_(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return b_(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):O_(e):O_(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?S_(i):this.lineralizeSegments(n,i).pipe(Object(_m.a)(n=>{const i=new ab(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=y_(e,r,i);if(!s)return O_(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?S_(l):this.lineralizeSegments(r,l).pipe(Object(_m.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(yt.a)(t=>(n._loadedConfig=t,new ab(r,{})))):Object(pt.a)(new ab(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=y_(e,n,r);if(!o)return O_(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(_m.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=v_(e,s,u,o),l=new ab(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(yt.a)(t=>new ab(s,t)));if(0===o.length&&0===c.length)return Object(pt.a)(new ab(s,{}));const h=d_(n)===i;return this.expandSegment(r,l,o,c,h?Wm:i,!0).pipe(Object(yt.a)(t=>new ab(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(pt.a)(new r_(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(pt.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(_m.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(yt.a)(t=>(e._loadedConfig=t,t))):function(t){return new dt.a(e=>e.error(Qm(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(pt.a)(new r_([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(pt.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&i_(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!i_(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return eb(o)});return Object(pt.a)(i).pipe(a_(),Object(Tm.a)(t=>{if(!o_(t))return;const e=Qm(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(yt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(pt.a)(n);if(r.numberOfChildren>1||!r.children.primary)return T_(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new sb(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return tb(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return tb(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new ab(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function I_(t){const e={};for(const n of Object.keys(t.children)){const r=I_(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new ab(t.segments.concat(e.segments),e.children)}return t}(new ab(t.segments,e))}class k_{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class x_{constructor(t,e){this.component=t,this.route=e}}function j_(t,e,n){const r=t._root;return R_(r,e?e._root:null,n,[r.value])}function A_(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function R_(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=jb(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!cb(t.url,e.url);case"pathParamsOrQueryParamsChange":return!cb(t.url,e.url)||!Ym(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vb(t,e)||!Ym(t.queryParams,e.queryParams);case"paramsChange":default:return!Vb(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new k_(r)):(o.data=s.data,o._resolvedData=s._resolvedData),R_(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new x_(a.outlet.component,s))}else s&&N_(e,a,i),i.canActivateChecks.push(new k_(r)),R_(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),tb(o,(t,e)=>N_(t,n.getContext(e),i)),i}function N_(t,e,n){const r=jb(t),i=t.value;tb(r,(t,r)=>{N_(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new x_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class P_{}function D_(t){return new dt.a(e=>e.error(t))}class L_{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=v_(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Wm);if(null===e)return null;const n=new Db([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Wm,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new xb(n,e),i=new Lb(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Pb(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=p_(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!M_(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===Wm?-1:e.value.outlet===Wm?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return __(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!b_(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Zm(n).parameters:{};i=new Db(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,V_(t),d_(t),t.component,t,F_(e),U_(e)+n.length,q_(t))}else{const r=y_(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Db(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,V_(t),d_(t),t.component,t,F_(e),U_(e)+o.length,q_(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=v_(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new xb(i,t)]}if(0===a.length&&0===c.length)return[new xb(i,[])];const l=d_(t)===r,h=this.processSegment(a,u,c,l?Wm:r);return null===h?null:[new xb(i,h)]}}function M_(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function F_(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function U_(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function V_(t){return t.data||{}}function q_(t){return t.resolve||{}}function B_(t){return _t(e=>{const n=t(e);return n?Object(mt.a)(n).pipe(Object(yt.a)(()=>e)):Object(pt.a)(e)})}class H_ extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const z_=new r.r("ROUTES");class W_{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(yt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new r_(Xm(i.injector.get(z_,void 0,r.q.Self|r.q.Optional)).map(f_),i)}))}loadModuleFactory(t){return"string"==typeof t?Object(mt.a)(this.loader.load(t)):eb(t()).pipe(Object(_m.a)(t=>t instanceof r.w?Object(pt.a)(t):Object(mt.a)(this.compiler.compileModuleAsync(t))))}}class K_{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new G_,this.attachRef=null}}class G_{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new K_,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Q_{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function $_(t){throw t}function Y_(t,e,n){return e.parse("/")}function J_(t,e){return Object(pt.a)(null)}let X_=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new Ft.a,this.errorHandler=$_,this.malformedUriErrorHandler=Y_,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:J_,afterPreactivation:J_},this.urlHandlingStrategy=new Q_,this.routeReuseStrategy=new H_,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new sb(new ab([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new W_(s,a,t=>this.triggerEvent(new Fm(t)),t=>this.triggerEvent(new Um(t))),this.routerState=Rb(this.currentUrlTree,this.rootComponentType),this.transitions=new lm({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Qt(t=>0!==t.id),Object(yt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),_t(t=>{let n=!1,r=!1;return Object(pt.a)(t).pipe(Object(Tm.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),_t(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(pt.a)(t).pipe(_t(t=>{const n=this.transitions.getValue();return e.next(new xm(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Xt.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,_t(t=>function(t,e,n,r,i){return new E_(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(yt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(Tm.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(_m.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new L_(t,e,n,r,i,o).recognize();return null===s?D_(new P_):Object(pt.a)(s)}catch(Hv){return D_(Hv)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(yt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(Tm.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Nm(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new xm(n,this.serializeUrl(r),i,o);e.next(a);const u=Rb(r,this.rootComponentType).snapshot;return Object(pt.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Xt.a}),B_(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Tm.a)(t=>{const e=new Pm(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(yt.a)(t=>Object.assign(Object.assign({},t),{guards:j_(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(_m.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(pt.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(mt.a)(t).pipe(Object(_m.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(pt.a)(!0);const s=o.map(o=>{const s=A_(o,e,i);let a;if(function(t){return t&&i_(t.canDeactivate)}(s))a=eb(s.canDeactivate(t,e,n,r));else{if(!i_(s))throw new Error("Invalid CanDeactivate guard");a=eb(s(t,e,n,r))}return a.pipe(le())});return Object(pt.a)(s).pipe(a_())}(t.component,t.route,n,e,r)),le(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(_m.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(mt.a)(e).pipe(wm(e=>_r(function(t,e){return null!==t&&e&&e(new Vm(t)),Object(pt.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Bm(t)),Object(pt.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>ym(()=>{const i=e.guards.map(i=>{const o=A_(i,e.node,n);let s;if(function(t){return t&&i_(t.canActivateChild)}(o))s=eb(o.canActivateChild(r,t));else{if(!i_(o))throw new Error("Invalid CanActivateChild guard");s=eb(o(r,t))}return s.pipe(le())});return Object(pt.a)(i).pipe(a_())}));return Object(pt.a)(i).pipe(a_())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(pt.a)(!0);const i=r.map(r=>ym(()=>{const i=A_(r,e,n);let o;if(function(t){return t&&i_(t.canActivate)}(i))o=eb(i.canActivate(e,t));else{if(!i_(i))throw new Error("Invalid CanActivate guard");o=eb(i(e,t))}return o.pipe(le())}));return Object(pt.a)(i).pipe(a_())}(t,e.route,n))),le(t=>!0!==t,!0))}(r,o,t,e):Object(pt.a)(n)),Object(yt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(Tm.a)(t=>{if(o_(t.guardsResult)){const e=Qm(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Dm(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Qt(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Am(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),B_(t=>{if(t.guards.canActivateChecks.length)return Object(pt.a)(t).pipe(Object(Tm.a)(t=>{const e=new Lm(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),_t(t=>{let n=!1;return Object(pt.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(_m.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(pt.a)(t);let o=0;return Object(mt.a)(n).pipe(wm(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(pt.a)({});const o={};return Object(mt.a)(i).pipe(Object(_m.a)(i=>function(t,e,n,r){const i=A_(t,e,r);return eb(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(Tm.a)(t=>{o[i]=t}))),Cm(1),Object(_m.a)(()=>Object.keys(o).length===i.length?Object(pt.a)(o):Xt.a))}(t._resolve,t,e,r).pipe(Object(yt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Pb(t,n).resolve),null)))}(t.route,e,r,i)),Object(Tm.a)(()=>o++),Cm(1),Object(_m.a)(e=>o===n.length?Object(pt.a)(t):Xt.a))})),Object(Tm.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Am(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(Tm.a)(t=>{const e=new Mm(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),B_(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(yt.a)(t=>{const e=function(t,e,n){const r=qb(t,e._root,n?n._root:void 0);return new Ab(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(Tm.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(yt.a)(t=>(new e_(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(Tm.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Am(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Em(i))),vm(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=o_(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Am(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Rm(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(hc){t.reject(hc)}}var i;return Xt.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){c_(t),this.config=t.map(f_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Wb(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Gb(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return tb(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Gb(n,e,r)}(n);if(o.toRoot())return Wb(e.root,new ab([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Qb(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Qb(t,t===e.root,0)}const r=Hb(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Qb(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Yb(s.segmentGroup,s.index,o.commands):$b(s.segmentGroup,s.index,o.commands);return Wb(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=o_(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Hv){e=this.malformedUriErrorHandler(Hv,this.urlSerializer,t)}return e}isActive(t,e){if(o_(t))return nb(this.currentUrlTree,t,e);const n=this.parseUrl(t);return nb(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new jm(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.N),r.Rb(lb),r.Rb(G_),r.Rb(w),r.Rb(r.s),r.Rb(r.x),r.Rb(r.i),r.Rb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Z_=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new Ft.a,this.subscription=t.events.subscribe(t=>{t instanceof jm&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:tw(this.skipLocationChange),replaceUrl:tw(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:tw(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(X_),r.Kb(Nb),r.Kb(y))},t.\u0275dir=r.Fb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Ub("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Qb("href",e.href,r.bc),r.Bb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})();function tw(t){return""===t||!!t}let ew=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Wm,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new nw(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(G_),r.Kb(r.Q),r.Kb(r.j),r.Sb("name"),r.Kb(r.h))},t.\u0275dir=r.Fb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class nw{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Nb?this.route:t===G_?this.childContexts:this.parent.get(t,e)}}class rw{}class iw{preload(t,e){return Object(pt.a)(null)}}let ow=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new W_(e,n,e=>t.triggerEvent(new Fm(e)),e=>t.triggerEvent(new Um(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Qt(t=>t instanceof jm),wm(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(mt.a)(n).pipe(Object(br.a)(),Object(yt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(_m.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(X_),r.Rb(r.x),r.Rb(r.i),r.Rb(r.s),r.Rb(rw))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),sw=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof jm&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof zm&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new zm(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(X_),r.Rb(N),r.Rb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const aw=new r.r("ROUTER_CONFIGURATION"),uw=new r.r("ROUTER_FORROOT_GUARD"),cw=[w,{provide:lb,useClass:hb},{provide:X_,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new X_(null,t,e,n,r,i,s,Xm(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[lb,G_,w,r.s,r.x,r.i,z_,aw,[class{},new r.B],[class{},new r.B]]},G_,{provide:Nb,useFactory:function(t){return t.routerState.root},deps:[X_]},{provide:r.x,useClass:r.K},ow,iw,class{preload(t,e){return e().pipe(vm(()=>Object(pt.a)(null)))}},{provide:aw,useValue:{enableTracing:!1}}];function lw(){return new r.z("Router",X_)}let hw=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[cw,gw(e),{provide:uw,useFactory:pw,deps:[[X_,new r.B,new r.J]]},{provide:aw,useValue:n||{}},{provide:y,useFactory:dw,deps:[a,[new r.p(m),new r.B],aw]},{provide:sw,useFactory:fw,deps:[X_,N,aw]},{provide:rw,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:iw},{provide:r.z,multi:!0,useFactory:lw},[yw,{provide:r.d,multi:!0,useFactory:vw,deps:[yw]},{provide:bw,useFactory:mw,deps:[yw]},{provide:r.b,multi:!0,useExisting:bw}]]}}static forChild(e){return{ngModule:t,providers:[gw(e)]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Rb(uw,8),r.Rb(X_,8))}}),t})();function fw(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new sw(t,e,n)}function dw(t,e,n={}){return n.useHash?new _(t,e):new b(t,e)}function pw(t){return"guarded"}function gw(t){return[{provide:r.a,multi:!0,useValue:t},{provide:z_,multi:!0,useValue:t}]}let yw=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new Ft.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(X_),r=this.injector.get(aw);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(pt.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(aw),n=this.injector.get(ow),i=this.injector.get(sw),o=this.injector.get(X_),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function vw(t){return t.appInitializer.bind(t)}function mw(t){return t.bootstrapListener.bind(t)}const bw=new r.r("Router Initializer");var _w=n("kScs"),ww=n("XoHu");function Cw(t,e){return new dt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(mt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}function Ow(t){return null==t||0===t.length}function Sw(t){return null!=t&&"number"==typeof t.length}const Tw=new r.r("NgValidators"),Ew=new r.r("NgAsyncValidators"),Iw=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class kw{static min(t){return e=>{if(Ow(e.value)||Ow(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(Ow(e.value)||Ow(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return Ow(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return Ow(t.value)||Iw.test(t.value)?null:{email:!0}}static minLength(t){return e=>Ow(e.value)||!Sw(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>Sw(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return kw.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Ow(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(xw);return 0==e.length?null:function(t){return Aw(Rw(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(xw);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(hm.a)(e))return Cw(e,null);if(Object(ww.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Cw(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Cw(t=1===t.length&&Object(hm.a)(t[0])?t[0]:t,null).pipe(Object(yt.a)(t=>e(...t)))}return Cw(t,null)}(Rw(t,e).map(jw)).pipe(Object(yt.a)(Aw))}}}function xw(t){return null!=t}function jw(t){const e=Object(r.rb)(t)?Object(mt.a)(t):t;return Object(r.qb)(e),e}function Aw(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Rw(t,e){return e.map(e=>e(t))}function Nw(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Pw(t){return null!=t?kw.compose(Nw(t)):null}function Dw(t){return null!=t?kw.composeAsync(Nw(t)):null}function Lw(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let Mw=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Pw(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Dw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t}),t})(),Fw=(()=>{class t extends Mw{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Uw(e||t)},t.\u0275dir=r.Fb({type:t,features:[r.xb]}),t})();const Uw=r.Pb(Fw);let Vw=(()=>{class t extends class{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Fw,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})(),qw=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function Bw(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Hw(t,e,n){const r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Lw(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=function(t){return t._rawAsyncValidators}(t);if(null!==e.asyncValidator?t.setAsyncValidators(Lw(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();Bw(e._rawValidators,n),Bw(e._rawAsyncValidators,n)}}function zw(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Ww(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Kw="VALID",Gw="INVALID",Qw="PENDING",$w="DISABLED";function Yw(t){return(tC(t)?t.validators:t)||null}function Jw(t){return Array.isArray(t)?Pw(t):t||null}function Xw(t,e){return(tC(e)?e.asyncValidators:t)||null}function Zw(t){return Array.isArray(t)?Dw(t):t||null}function tC(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class eC{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Jw(this._rawValidators),this._composedAsyncValidatorFn=Zw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Kw}get invalid(){return this.status===Gw}get pending(){return this.status==Qw}get disabled(){return this.status===$w}get enabled(){return this.status!==$w}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Jw(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Zw(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Qw,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=$w,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Kw,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Kw&&this.status!==Qw||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$w:Kw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Qw,this._hasOwnPendingAsyncValidator=!0;const e=jw(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof rC?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof iC&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?$w:this.errors?Gw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Qw)?Qw:this._anyControlsHaveStatus(Gw)?Gw:Kw}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){tC(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class nC extends eC{constructor(t=null,e,n){super(Yw(e),Xw(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Ww(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Ww(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class rC extends eC{constructor(t,e,n){super(Yw(e),Xw(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof nC?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class iC extends eC{constructor(t,e,n){super(Yw(e),Xw(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof nC?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const oC={provide:Fw,useExisting:Object(r.U)(()=>aC)},sC=(()=>Promise.resolve(null))();let aC=(()=>{class t extends Fw{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.n,this.form=new rC({},Pw(t),Dw(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){sC.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),function(t,e){Hw(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&zw(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&zw(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){sC.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),Ww(this._directives,t)})}addFormGroup(t){sC.then(()=>{const e=this._findContainer(t.path),n=new rC({});(function(t,e){Hw(t,e,!1)})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){sC.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){sC.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Tw,10),r.Kb(Ew,10))},t.\u0275dir=r.Fb({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.Ub("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([oC]),r.xb]}),t})(),uC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),cC=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)}}),t})(),lC=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[qw],imports:[cC]}),t})(),hC=(()=>{class t{constructor(t,e){this.firestore=t,this.router=e}ngOnInit(){}hashFunction(t){return new Promise((e,n)=>{e(_w.Md5.hashStr(t).toString())})}isAlreadySignedUp(t){return Object(qe.b)(this,void 0,void 0,function*(){return new Promise((e,n)=>Object(qe.b)(this,void 0,void 0,function*(){let n=yield this.hashFunction(t);this.firestore.collection("users").doc(n).get().subscribe(t=>{e(t.exists)})}))})}getdataPass(t){return new Promise((e,n)=>Object(qe.b)(this,void 0,void 0,function*(){this.firestore.collection("users").doc(t).valueChanges().subscribe(t=>{e(t.password)})}))}login(t,e){return Object(qe.b)(this,void 0,void 0,function*(){""!=t&&""!=e?this.isAlreadySignedUp(t).then(n=>Object(qe.b)(this,void 0,void 0,function*(){if(0==n.valueOf())return alert("email not found"),null;{console.log("1");let n=yield this.hashFunction(t),r=yield this.hashFunction(e);this.getdataPass(n).then(t=>{t&&(r==t.valueOf().toString()?this.firestore.collection("users").doc(n).update({token:!0}).catch(t=>{if(t)return alert(t),null}).then(()=>{localStorage.setItem("token",JSON.stringify({email:n,token:!0})),this.router.navigate(["//preview"])}):alert("Wrong password!"))})}})):alert("Empty fields!")})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(am),r.Kb(X_))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-login"]],decls:24,vars:0,consts:[[1,"background"],[1,"shape"],["for","email"],["type","email","placeholder","email","id","email"],["email1",""],["for","password"],["type","password","placeholder","Password","id","password"],["password1",""],["routerLink","//register"],[3,"click"]],template:function(t,e){if(1&t){const t=r.Ob();r.Nb(0,"body"),r.Nb(1,"div",0),r.Lb(2,"div",1),r.Lb(3,"div",1),r.Mb(),r.Nb(4,"form"),r.Nb(5,"h3"),r.ec(6,"Login Here"),r.Mb(),r.Nb(7,"label",2),r.ec(8,"Email"),r.Mb(),r.Lb(9,"input",3,4),r.Nb(11,"label",5),r.ec(12,"Password"),r.Mb(),r.Lb(13,"input",6,7),r.Lb(15,"br"),r.Nb(16,"span"),r.ec(17,"Not registered?"),r.Mb(),r.Nb(18,"a",8),r.ec(19," register"),r.Mb(),r.Lb(20,"br"),r.Lb(21,"br"),r.Nb(22,"button",9),r.Ub("click",function(){r.ac(t);const n=r.Zb(10),i=r.Zb(14);return e.login(n.value,i.value)}),r.ec(23,"Log In"),r.Mb(),r.Mb(),r.Mb()}},directives:[uC,Vw,aC,Z_],styles:["a[_ngcontent-%COMP%]{color:#f8d50c;transition:.3s ease-in-out}a[_ngcontent-%COMP%]:hover{color:#89ec7c}"]}),t})();function fC(t,e){1&t&&(r.Nb(0,"h1",6),r.ec(1," You are signed in , token valid "),r.Lb(2,"br"),r.Nb(3,"span",7),r.ec(4,"Data is Encrypted using Hash functions"),r.Mb(),r.Mb())}function dC(t,e){1&t&&(r.Nb(0,"h1",8),r.ec(1," You are not signed in , token invalid "),r.Mb())}function pC(t,e){1&t&&(r.Nb(0,"h1",9),r.ec(1,"Get Started"),r.Mb())}function gC(t,e){1&t&&(r.Nb(0,"a",10),r.ec(1,"Register here"),r.Mb())}function yC(t,e){if(1&t){const t=r.Ob();r.Nb(0,"button",11),r.Ub("click",function(){return r.ac(t),r.Wb().signOut()}),r.ec(1,"Logout"),r.Mb()}}let vC=(()=>{class t{constructor(t,e,n){this.firestore=t,this.route=e,this.router=n,this.tokenValid=!1}isuserValid(){return new Promise((t,e)=>{if(null!=localStorage.getItem("token")){let e=localStorage.getItem("token"),n=JSON.parse(e).token,r=JSON.parse(e).email;this.hashedEmail=r,1==n?(this.tokenValid=!0,t(!0)):this.firestore.collection("users").doc(r).valueChanges().subscribe(e=>{this.tokenValid=e.token,t(e.token)})}else this.tokenValid=!1})}ngOnInit(){this.isuserValid()}signOut(){localStorage.clear(),this.firestore.collection("users").doc(this.hashedEmail).update({token:!1}).catch(t=>alert(t)).then(()=>{this.router.navigate(["//register"])})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(am),r.Kb(Nb),r.Kb(X_))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-preview"]],decls:7,vars:5,consts:[[2,"width","100vw","height","100vh","display","flex","flex-direction","column","padding-top","10rem","align-items","center"],["style","color: white;font-size: 58px;text-align: center;",4,"ngIf"],["style","color: white;text-align: center;",4,"ngIf"],["style","color: white;font-size: 88px;",4,"ngIf"],["routerLink","//register","style","color: white;font-size: 30px;",4,"ngIf"],["style","background-color: red;\n    width: 6rem;color: white;border: none;cursor: pointer;transition: 300ms ease-in-out;",3,"click",4,"ngIf"],[2,"color","white","font-size","58px","text-align","center"],[2,"font-size","26px"],[2,"color","white","text-align","center"],[2,"color","white","font-size","88px"],["routerLink","//register",2,"color","white","font-size","30px"],[2,"background-color","red","width","6rem","color","white","border","none","cursor","pointer","transition","300ms ease-in-out",3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.dc(1,fC,5,0,"h1",1),r.dc(2,dC,2,0,"h1",2),r.dc(3,pC,2,0,"h1",3),r.dc(4,gC,2,0,"a",4),r.Lb(5,"br"),r.dc(6,yC,2,0,"button",5),r.Mb()),2&t&&(r.Ab(1),r.Xb("ngIf",1==e.tokenValid),r.Ab(1),r.Xb("ngIf",0==e.tokenValid),r.Ab(1),r.Xb("ngIf",0==e.tokenValid),r.Ab(1),r.Xb("ngIf",0==e.tokenValid),r.Ab(2),r.Xb("ngIf",1==e.tokenValid))},directives:[k,Z_],styles:["button[_ngcontent-%COMP%]:hover{background-color:#7fffd4!important;color:#000!important}"]}),t})();const mC=[{path:"",component:vC},{path:"preview",component:vC},{path:"login",component:hC},{path:"register",component:(()=>{class t{constructor(t,e){this.firestore=t,this.router=e}ngOnInit(){}hashFunction(t){return new Promise((e,n)=>{e(_w.Md5.hashStr(t).toString())})}isAlreadySignedUp(t){return Object(qe.b)(this,void 0,void 0,function*(){return new Promise((e,n)=>Object(qe.b)(this,void 0,void 0,function*(){let n=yield this.hashFunction(t);this.firestore.collection("users").doc(n).get().subscribe(t=>{e(t.exists)})}))})}register(t,e,n){return Object(qe.b)(this,void 0,void 0,function*(){""!=t&&""!=e&&""!=n?e==n?this.isAlreadySignedUp(t).then(n=>Object(qe.b)(this,void 0,void 0,function*(){if(0==n.valueOf()){let n=yield this.hashFunction(t),r=yield this.hashFunction(e);this.firestore.collection("users").doc(n).set({email:n,password:r}).catch(t=>{if(t)return alert(t),null}).then(()=>{localStorage.setItem("token",JSON.stringify({email:n,token:!0})),this.router.navigate(["//preview"])})}else alert("Email already in use! you can login")})):alert("Password does not match Confirm password!"):alert("Empty fields!")})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(am),r.Kb(X_))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-register"]],decls:28,vars:0,consts:[[1,"background"],[1,"shape"],["for","email"],["type","email","placeholder","email","id","email"],["email1",""],["for","password"],["type","password","placeholder","Password","id","password"],["password1",""],["for","cpassword"],["type","password","placeholder","Confirm Password","id","cpassword"],["cpassword1",""],["routerLink","//login"],[3,"click"]],template:function(t,e){if(1&t){const t=r.Ob();r.Nb(0,"body"),r.Nb(1,"div",0),r.Lb(2,"div",1),r.Lb(3,"div",1),r.Mb(),r.Nb(4,"form"),r.Nb(5,"h3"),r.ec(6,"Register Here"),r.Mb(),r.Nb(7,"label",2),r.ec(8,"Email"),r.Mb(),r.Lb(9,"input",3,4),r.Nb(11,"label",5),r.ec(12,"Password"),r.Mb(),r.Lb(13,"input",6,7),r.Nb(15,"label",8),r.ec(16,"Confirm password"),r.Mb(),r.Lb(17,"input",9,10),r.Lb(19,"br"),r.Nb(20,"span"),r.ec(21,"ALready registered?"),r.Mb(),r.Nb(22,"a",11),r.ec(23," login"),r.Mb(),r.Lb(24,"br"),r.Lb(25,"br"),r.Nb(26,"button",12),r.Ub("click",function(){r.ac(t);const n=r.Zb(10),i=r.Zb(14),o=r.Zb(18);return e.register(n.value,i.value,o.value)}),r.ec(27,"Register"),r.Mb(),r.Mb(),r.Mb()}},directives:[uC,Vw,aC,Z_],styles:["a[_ngcontent-%COMP%]{color:#f8d50c;transition:.3s ease-in-out}a[_ngcontent-%COMP%]:hover{color:#89ec7c}"]}),t})()}];let bC=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[hw.forRoot(mC)],hw]}),t})(),_C=(()=>{class t{constructor(){this.title="rabi3AdminApp",this.content="customers"}setContent(t){this.content=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"main"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Lb(1,"router-outlet"),r.ec(2,">\n"),r.Mb())},directives:[ew],styles:[".main[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;flex-direction:row}.left-bar[_ngcontent-%COMP%]{width:12.5%;height:100vh;overflow:hidden;background-color:#f4fdeb;box-shadow:3px 0 5px hsla(0,.8%,49%,.373)}.top-bar[_ngcontent-%COMP%]{width:100%;height:8.5vh;background-color:#ddf1c9;display:flex;align-items:center;padding-left:10%}h3[_ngcontent-%COMP%]{cursor:default;font-weight:700}ul[_ngcontent-%COMP%]{list-style-type:none}li[_ngcontent-%COMP%]{transition:.3s ease-in-out}li[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.right-content[_ngcontent-%COMP%]{width:87.5%;height:100vh;overflow:hidden}"]}),t})(),wC=(()=>{class t{}return t.\u0275mod=r.Ib({type:t,bootstrap:[_C]}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[],imports:[[lt,bC,lC,ht.a.initializeApp(cm),Le,um,mr]]}),t})();Object(r.T)(),ut().bootstrapModule(wC).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);